# VueåŸºç¡€

## å‰è¨€

å…ˆèŠä¸€ä¸‹å‰ç«¯å¼€å‘æ¨¡å¼çš„å‘å±•ã€‚

> é™æ€é¡µé¢

æœ€åˆçš„ç½‘é¡µä»¥HTMLä¸ºä¸»ï¼Œæ˜¯çº¯é™æ€çš„ç½‘é¡µã€‚ç½‘é¡µæ˜¯åªè¯»çš„ï¼Œä¿¡æ¯æµåªèƒ½ä»æœåŠ¡çš„åˆ°å®¢æˆ·ç«¯å•å‘æµ

é€šã€‚**å¼€å‘äººå‘˜ä¹Ÿåªå…³å¿ƒé¡µé¢çš„æ ·å¼å’Œå†…å®¹**å³å¯ã€‚

> å¼‚æ­¥åˆ·æ–°ï¼Œæ“ä½œDOM

- 1995å¹´ï¼Œç½‘æ™¯å·¥ç¨‹å¸ˆBrendan Eich èŠ±äº†10å¤©æ—¶é—´è®¾è®¡äº†JavaScriptè¯­è¨€.

  éšç€JavaScriptçš„è¯ç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥æ“ä½œé¡µé¢çš„DOMå…ƒç´ åŠæ ·å¼ï¼Œé¡µé¢æœ‰äº†ä¸€äº›åŠ¨æ€çš„æ•ˆæœï¼Œä½†æ˜¯ä¾

  ç„¶æ˜¯ä»¥é™æ€ä¸ºä¸»ã€‚

- ajaxç››è¡Œï¼š

  2005å¹´å¼€å§‹ï¼Œajaxé€æ¸è¢«å‰ç«¯å¼€å‘äººå‘˜æ‰€é‡è§†ï¼Œå› ä¸ºä¸ç”¨åˆ·æ–°é¡µé¢å°±å¯ä»¥æ›´æ–°é¡µé¢çš„æ•°æ®å’Œæ¸²æŸ“æ•ˆæœã€‚æ­¤æ—¶çš„å¼€å‘äººå‘˜ä¸ä»…ä»…è¦ç¼–å†™HTMLæ ·å¼ï¼Œè¿˜è¦æ‡‚ajaxä¸åç«¯äº¤äº’ï¼Œç„¶åé€šè¿‡JSæ“ä½œDomå…ƒç´ æ¥å®ç°é¡µé¢åŠ¨æ€æ•ˆæœ**ã€‚æ¯”è¾ƒæµè¡Œçš„æ¡†æ¶å¦‚Jqueryå°±æ˜¯å…¸å‹ä»£è¡¨ã€‚

> MVVMï¼Œå…³æ³¨æ¨¡å‹å’Œè§†å›¾

- 2008å¹´ï¼Œgoogleçš„Chromeå‘å¸ƒï¼Œéšåå°±ä»¥æå¿«çš„é€Ÿåº¦å é¢†å¸‚åœºï¼Œè¶…è¿‡IEæˆä¸ºæµè§ˆå™¨å¸‚åœºçš„ä¸»å¯¼è€…ã€‚

- 2009å¹´ï¼ŒRyan Dahlåœ¨è°·æ­Œçš„Chrome V8å¼•æ“åŸºç¡€ä¸Šï¼Œæ‰“é€ äº†åŸºäºäº‹ä»¶å¾ªç¯çš„å¼‚æ­¥IOæ¡†æ¶ï¼šNode.jsã€‚
  - åŸºäºæ—¶é—´å¾ªç¯çš„å¼‚æ­¥IO
  - å•çº¿ç¨‹è¿è¡Œï¼Œé¿å…å¤šçº¿ç¨‹çš„å˜é‡åŒæ­¥é—®é¢˜
  - JSå¯ä»¥ç¼–å†™åå°diamanteï¼Œå‰åå°ç»Ÿä¸€ç¼–ç¨‹è¯­è¨€

- node.jsçš„ä¼Ÿå¤§ä¹‹å¤„ä¸åœ¨äºè®©JSè¿ˆå‘äº†åç«¯å¼€å‘ï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€ä¸ªåºå¤§çš„ç”Ÿæ€ç³»ç»Ÿã€‚

- 2010å¹´ï¼ŒNPMä½œä¸ºnode.jsçš„åŒ…ç®¡ç†ç³»ç»Ÿé¦–æ¬¡å‘å¸ƒï¼Œå¼€å‘äººå‘˜å¯ä»¥éµå¾ªCommon.jsè§„èŒƒæ¥ç¼–å†™Node.jsæ¨¡å—ï¼Œç„¶åå‘å¸ƒåˆ°NPMä¸Šä¾›å…¶ä»–å¼€å‘äººå‘˜ä½¿ç”¨ã€‚ç›®å‰å·²ç»æ˜¯ä¸–ç•Œæœ€å¤§çš„åŒ…æ¨¡å—ç®¡ç†ç³»ç»Ÿã€‚éšåï¼Œåœ¨nodeçš„åŸºç¡€ä¸Šï¼Œæ¶Œç°å‡ºäº†ä¸€å¤§æ‰¹çš„å‰ç«¯æ¡†æ¶ï¼š

![image-20200526042452175](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526042452175.png)

> MVVM

- Mï¼šå³Modelï¼Œæ¨¡å‹ï¼ŒåŒ…æ‹¬æ•°æ®å’Œä¸€äº›åŸºæœ¬æ“ä½œ

- Vï¼šå³Viewï¼Œè§†å›¾ï¼Œé¡µé¢æ¸²æŸ“ç»“æœ

- VMï¼šå³View-Modelï¼Œæ¨¡å‹ä¸è§†å›¾é—´çš„åŒå‘æ“ä½œï¼ˆæ— éœ€å¼€å‘äººå‘˜å¹²æ¶‰ï¼‰

åœ¨MVVMä¹‹å‰ï¼Œå¼€å‘äººå‘˜ä»åç«¯è·å–éœ€è¦çš„æ•°æ®æ¨¡å‹ï¼Œç„¶åè¦é€šè¿‡DOMæ“ä½œModelæ¸²æŸ“åˆ°Viewä¸­ã€‚è€Œ

åå½“ç”¨æˆ·æ“ä½œè§†å›¾ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡DOMè·å–Viewä¸­çš„æ•°æ®ï¼Œç„¶ååŒæ­¥åˆ°Modelä¸­ã€‚

è€ŒMVVMä¸­çš„VMè¦åšçš„äº‹æƒ…å°±æ˜¯æŠŠDOMæ“ä½œå®Œå…¨å°è£…èµ·æ¥ï¼Œå¼€å‘äººå‘˜ä¸ç”¨å†å…³å¿ƒModelå’ŒViewä¹‹é—´æ˜¯å¦‚ä½•äº’ç›¸å½±å“çš„ï¼š

- åªè¦æˆ‘ä»¬Modelå‘ç”Ÿäº†æ”¹å˜ï¼ŒViewä¸Šè‡ªç„¶å°±ä¼šè¡¨ç°å‡ºæ¥ã€‚

- å½“ç”¨æˆ·ä¿®æ”¹äº†Viewï¼ŒModelä¸­çš„æ•°æ®ä¹Ÿä¼šè·Ÿç€æ”¹å˜ã€‚

æŠŠå¼€å‘äººå‘˜ä»ç¹ççš„DOMæ“ä½œä¸­è§£æ”¾å‡ºæ¥ï¼ŒæŠŠå…³æ³¨ç‚¹æ”¾åœ¨å¦‚ä½•æ“ä½œModelä¸Šã€‚



![image-20200526042628720](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526042628720.png)

è€Œæˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„ï¼Œå°±æ˜¯ä¸€æ¬¾MVVMæ¨¡å¼çš„æ¡†æ¶ï¼šVue

## è®¤è¯†Vue

Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº **view**) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„**æ¸è¿›å¼æ¡†æ¶**ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚

å‰ç«¯æ¡†æ¶ä¸‰å·¨å¤´ï¼šVue.jsã€React.jsã€AngularJSï¼Œvue.jsä»¥æœŸè½»é‡æ˜“ç”¨è‘—ç§°ï¼Œvue.jså’ŒReact.jså‘å±•é€Ÿåº¦æœ€å¿«,AngularJSå…³æ³¨åº¦å·²ç»å¼€å§‹ä¸‹æ»‘ã€‚

å®˜ç½‘ï¼šhttps://cn.vuejs.org/

å‚è€ƒï¼šhttps://cn.vuejs.org/v2/guide/

![image-20200526042819400](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526042819400.png)

Gitåœ°å€ï¼šhttps://github.com/vuejs

## Nodeå’ŒNPM

å‰é¢è¯´è¿‡ï¼ŒNPMæ˜¯Nodeæä¾›çš„æ¨¡å—ç®¡ç†å·¥å…·ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„ä¸‹è½½å®‰è£…å¾ˆå¤šå‰ç«¯æ¡†æ¶ï¼ŒåŒ…æ‹¬Jqueryã€AngularJSã€VueJséƒ½æœ‰ã€‚ä¸ºäº†åé¢å­¦ä¹ æ–¹ä¾¿ï¼Œæˆ‘ä»¬å…ˆå®‰è£…nodeåŠNPMå·¥å…·ã€‚

### ä¸‹è½½Node.js

ä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/en/download/

![image-20200526043016908](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526043016908.png)

æ¨èä¸‹è½½LTSç‰ˆæœ¬ã€‚

è¯¾ç¨‹ä¸­é‡‡ç”¨çš„æ˜¯v10.16.3ç‰ˆæœ¬ã€‚å¤§å®¶è‡ªè¡Œä¸‹è½½ã€‚ç„¶åä¸‹ä¸€æ­¥å®‰è£…å³å¯ã€‚

å®Œæˆä»¥åï¼Œåœ¨æ§åˆ¶å°è¾“å…¥ï¼š

node -v

çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯ï¼š

![image-20200526043127932](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526043127932.png)

### NPM

å®‰è£…å®ŒæˆNodeåº”è¯¥è‡ªå¸¦äº†NPMäº†ï¼Œåœ¨æ§åˆ¶å°è¾“å…¥ npm -v æŸ¥çœ‹ï¼š

![image-20200526043211959](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526043211959.png)



npmé»˜è®¤çš„ä»“åº“åœ°å€æ˜¯åœ¨å›½å¤–ç½‘ç«™ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼Œå»ºè®®å¤§å®¶è®¾ç½®åˆ°æ·˜å®é•œåƒã€‚ä½†æ˜¯åˆ‡æ¢é•œåƒæ˜¯æ¯”è¾ƒéº»çƒ¦

çš„ã€‚æ¨èä¸€æ¬¾åˆ‡æ¢é•œåƒçš„å·¥å…·ï¼šnrm

æˆ‘ä»¬é¦–å…ˆå®‰è£…nrmï¼Œè¿™é‡Œ -g ä»£è¡¨å…¨å±€å®‰è£…

```bash
npm install nrm -g // window å¹³å°ä¸‹è¿è¡Œè¿™ä¸ªå‘½ä»¤
sudo npm install nrm -g // macæˆ–è€…linux å¹³å°ä¸‹è¿è¡Œè¿™ä¸ªå‘½ä»¤
```

ç„¶åé€šè¿‡ nrm ls å‘½ä»¤æŸ¥çœ‹npmçš„ä»“åº“åˆ—è¡¨,å¸¦*çš„å°±æ˜¯å½“å‰é€‰ä¸­çš„é•œåƒä»“åº“ï¼š

![image-20200526043748590](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526043748590.png)

é€šè¿‡ nrm use taobao æ¥æŒ‡å®šè¦ä½¿ç”¨çš„é•œåƒæºï¼š

![image-20200526043821575](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526043821575.png)

ç„¶åé€šè¿‡ nrm test npm æ¥æµ‹è¯•é€Ÿåº¦ï¼š

![image-20200526043900540](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526043900540.png)

æ³¨æ„ï¼š

æœ‰æ•™ç¨‹æ¨èå¤§å®¶ä½¿ç”¨cnpmå‘½ä»¤ï¼Œä½†æ˜¯ä½¿ç”¨å‘ç°cnpmæœ‰æ—¶ä¼šæœ‰bugï¼Œä¸æ¨èã€‚

- å®‰è£…å®Œæˆè¯·ä¸€å®šè¦é‡å¯ä¸‹ç”µè„‘ï¼ï¼ï¼

- å®‰è£…å®Œæˆè¯·ä¸€å®šè¦é‡å¯ä¸‹ç”µè„‘ï¼ï¼ï¼

- å®‰è£…å®Œæˆè¯·ä¸€å®šè¦é‡å¯ä¸‹ç”µè„‘ï¼ï¼ï¼

## å¿«é€Ÿå…¥é—¨

### åˆ›å»ºé¡¹ç›®

```bash
mkdir vue-demo // åˆ›å»ºé¡¹ç›®ç›®å½•
```

![image-20200526044634751](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526044634751.png)

### å®‰è£…Vue

#### ç›´æ¥é€šè¿‡è„šæœ¬å¼•å…¥

å¼€å‘ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼šhttps://cn.vuejs.org/js/vue.js

ç”Ÿäº§ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼š https://cn.vuejs.org/js/vue.min.js

å¼€å‘ç‰ˆæœ¬åŒ…å«å®Œæ•´çš„è­¦å‘Šå’Œè°ƒè¯•æ¨¡å¼ï¼Œç”Ÿäº§ç‰ˆæœ¬åˆ é™¤äº†è­¦å‘Šï¼Œ33.30KB min+gzipã€‚

#### ä½¿ç”¨CDN

æœ€æ–°ç‰ˆæœ¬ï¼š

```html
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
```

æ˜ç¡®çš„ç‰ˆæœ¬å·å’Œæ„å»ºæ–‡ä»¶:

```html
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
```

åŸç”Ÿ ES Modules

```html
<script type="module">
  import Vue from 'https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.esm.browser.js'
</script>
```

#### ä½¿ç”¨ NPM

```bash
# æœ€æ–°ç¨³å®šç‰ˆ
 npm install vue --save
```



node_modulesæ˜¯é€šè¿‡npmå®‰è£…çš„æ‰€æœ‰æ¨¡å—çš„é»˜è®¤ä½ç½®ã€‚

### é¡¹ç›®çš„åˆå§‹åŒ–

```bash
cd vue-demo // è¿›å…¥é¡¹ç›®ç›®å½•
npm init -y // é¡¹ç›®åˆå§‹åŒ–
```

### æ–°å»ºHTMLæ¨¡ç‰ˆ

![image-20200526050017821](%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.assets/image-20200526050017821.png)



åœ¨ `index.html` ä¸­ç¼–å†™ä¸€æ®µç®€å•ä»£ç :

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <h2>xx å¥½å¸…ï¼ï¼ï¼</h2>
    </div>
</body>
</html>
```

h2ä¸­è¦è¾“å‡ºä¸€å¥è¯ï¼šxx éå¸¸å¸…ã€‚å‰é¢çš„xxæ˜¯è¦æ¸²æŸ“çš„æ•°æ®ã€‚

### å¼•å…¥vueçš„åŸºæœ¬åº“

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
</head>
<body>
    <div id="app">
        <h2>xx å¥½å¸…ï¼ï¼ï¼</h2>
    </div>
</body>
<!-- å¼•å…¥ vue çš„å¼€å‘åŸºæœ¬åº“ -->
<script src="https://cn.vuejs.org/js/vue.js"></script>
</html>
```

### Vue æ¸²æŸ“

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
</head>
<body>
    <div id="app">
        <h2>{{name}} å¥½å¸…ï¼ï¼ï¼</h2>
    </div>
</body>
<!-- å¼•å…¥ vue çš„å¼€å‘åŸºæœ¬åº“ -->
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    let vm = new Vue({
        el:"#app",
        data:{
            name:"ç‹å¸…"
        }
    })
</script>
</html>
```

- é¦–å…ˆé€šè¿‡ new Vue()æ¥åˆ›å»ºVueå®ä¾‹

- ç„¶åæ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸€äº›å±æ€§ï¼š

  - elï¼šæ˜¯elementçš„ç¼©å†™ï¼Œé€šè¿‡idé€‰ä¸­è¦æ¸²æŸ“çš„é¡µé¢å…ƒç´ ï¼Œæœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªdiv

  - dataï¼šæ•°æ®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå±æ€§ï¼Œéƒ½å¯ä»¥æ¸²æŸ“åˆ°è§†å›¾ä¸­

    nameï¼šè¿™é‡Œæˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ªnameå±æ€§

é¡µé¢ä¸­çš„ h2 å…ƒç´ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡{{name}}çš„æ–¹å¼ï¼Œæ¥æ¸²æŸ“åˆšåˆšå®šä¹‰çš„nameå±æ€§ã€‚

## [æ•°æ®ç»‘å®š](https://cn.vuejs.org/v2/guide/syntax.html)

#### [æ’å€¼è¡¨è¾¾å¼](https://cn.vuejs.org/v2/guide/syntax.html)

##### æ–‡æœ¬

æ•°æ®ç»‘å®šæœ€å¸¸è§çš„å½¢å¼å°±æ˜¯ä½¿ç”¨â€œMustacheâ€è¯­æ³• (åŒå¤§æ‹¬å·) çš„æ–‡æœ¬æ’å€¼ï¼š

```Â html
<span>Message: {{ msg }}</span>
```

##### åŸå§‹HTML

åŒå¤§æ‹¬å·ä¼šå°†æ•°æ®è§£é‡Šä¸ºæ™®é€šæ–‡æœ¬ï¼Œè€Œé HTML ä»£ç ã€‚ä¸ºäº†è¾“å‡ºçœŸæ­£çš„ HTMLï¼Œä½ éœ€è¦ä½¿ç”¨ [`v-html` æŒ‡ä»¤](https://cn.vuejs.org/v2/api/#v-html)ï¼š

```
<p>Using mustaches: {{ rawHtml }}</p>
<p>Using v-html directive: <span v-html="rawHtml"></span></p>
```

![image-20200527034251505](Vue%20%E5%9F%BA%E7%A1%80%E7%AC%AC%E4%B8%80%E5%A4%A9.assets/image-20200527034251505.png)

##### å±æ€§

Mustache è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML attribute ä¸Šï¼Œé‡åˆ°è¿™ç§æƒ…å†µåº”è¯¥ä½¿ç”¨ [`v-bind` æŒ‡ä»¤](https://cn.vuejs.org/v2/api/#v-bind)ï¼š

```
<div v-bind:id="dynamicId"></div>
```

##### [ä½¿ç”¨ JavaScript è¡¨è¾¾å¼](https://cn.vuejs.org/v2/guide/syntax.html#ä½¿ç”¨-JavaScript-è¡¨è¾¾å¼)

è¿„ä»Šä¸ºæ­¢ï¼Œåœ¨æˆ‘ä»¬çš„æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åªç»‘å®šç®€å•çš„ property é”®å€¼ã€‚ä½†å®é™…ä¸Šï¼Œå¯¹äºæ‰€æœ‰çš„æ•°æ®ç»‘å®šï¼ŒVue.js éƒ½æä¾›äº†å®Œå…¨çš„ JavaScript è¡¨è¾¾å¼æ”¯æŒã€‚

```
{{ number + 1 }}

{{ ok ? 'YES' : 'NO' }}

{{ message.split('').reverse().join('') }}

<div v-bind:id="'list-' + id"></div>
```

è¿™äº›è¡¨è¾¾å¼ä¼šåœ¨æ‰€å± Vue å®ä¾‹çš„æ•°æ®ä½œç”¨åŸŸä¸‹ä½œä¸º JavaScript è¢«è§£æã€‚æœ‰ä¸ªé™åˆ¶å°±æ˜¯ï¼Œæ¯ä¸ªç»‘å®šéƒ½åªèƒ½åŒ…å«**å•ä¸ªè¡¨è¾¾å¼**ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä¾‹å­éƒ½**ä¸ä¼š**ç”Ÿæ•ˆã€‚

```
<!-- è¿™æ˜¯è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ -->
{{ var a = 1 }}

<!-- æµæ§åˆ¶ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œè¯·ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ -->
{{ if (ok) { return message } }
```

#### [æŒ‡ä»¤](https://cn.vuejs.org/v2/api/#%E6%8C%87%E4%BB%A4)

æŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ `v-` å‰ç¼€çš„ç‰¹æ®Š attribute

##### v-on

- **ç¼©å†™**ï¼š`@`

- **é¢„æœŸ**ï¼š`Function | Inline Statement | Object`

- **å‚æ•°**ï¼š`event`

- **ä¿®é¥°ç¬¦**ï¼š

  - `.stop` - è°ƒç”¨ `event.stopPropagation()`ã€‚
  - `.prevent` - è°ƒç”¨ `event.preventDefault()`ã€‚
  - `.capture` - æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨ capture æ¨¡å¼ã€‚
  - `.self` - åªå½“äº‹ä»¶æ˜¯ä»ä¾¦å¬å™¨ç»‘å®šçš„å…ƒç´ æœ¬èº«è§¦å‘æ—¶æ‰è§¦å‘å›è°ƒã€‚
  - `.{keyCode | keyAlias}` - åªå½“äº‹ä»¶æ˜¯ä»ç‰¹å®šé”®è§¦å‘æ—¶æ‰è§¦å‘å›è°ƒã€‚
  - `.native` - ç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ã€‚
  - `.once` - åªè§¦å‘ä¸€æ¬¡å›è°ƒã€‚
  - `.left` - (2.2.0) åªå½“ç‚¹å‡»é¼ æ ‡å·¦é”®æ—¶è§¦å‘ã€‚
  - `.right` - (2.2.0) åªå½“ç‚¹å‡»é¼ æ ‡å³é”®æ—¶è§¦å‘ã€‚
  - `.middle` - (2.2.0) åªå½“ç‚¹å‡»é¼ æ ‡ä¸­é”®æ—¶è§¦å‘ã€‚
  - `.passive` - (2.3.0) ä»¥ `{ passive: true }` æ¨¡å¼æ·»åŠ ä¾¦å¬å™¨

- **ç”¨æ³•**ï¼š

  ç»‘å®šäº‹ä»¶ç›‘å¬å™¨ã€‚äº‹ä»¶ç±»å‹ç”±å‚æ•°æŒ‡å®šã€‚è¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•çš„åå­—æˆ–ä¸€ä¸ªå†…è”è¯­å¥ï¼Œå¦‚æœæ²¡æœ‰ä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥çœç•¥ã€‚

  ç”¨åœ¨æ™®é€šå…ƒç´ ä¸Šæ—¶ï¼Œåªèƒ½ç›‘å¬[**åŸç”Ÿ DOM äº‹ä»¶**](https://developer.mozilla.org/zh-CN/docs/Web/Events)ã€‚ç”¨åœ¨è‡ªå®šä¹‰å…ƒç´ ç»„ä»¶ä¸Šæ—¶ï¼Œä¹Ÿå¯ä»¥ç›‘å¬å­ç»„ä»¶è§¦å‘çš„**è‡ªå®šä¹‰äº‹ä»¶**ã€‚

  åœ¨ç›‘å¬åŸç”Ÿ DOM äº‹ä»¶æ—¶ï¼Œæ–¹æ³•ä»¥äº‹ä»¶ä¸ºå”¯ä¸€çš„å‚æ•°ã€‚å¦‚æœä½¿ç”¨å†…è”è¯­å¥ï¼Œè¯­å¥å¯ä»¥è®¿é—®ä¸€ä¸ª `$event` propertyï¼š`v-on:click="handle('ok', $event)"`ã€‚

  ä» `2.4.0` å¼€å§‹ï¼Œ`v-on` åŒæ ·æ”¯æŒä¸å¸¦å‚æ•°ç»‘å®šä¸€ä¸ªäº‹ä»¶/ç›‘å¬å™¨é”®å€¼å¯¹çš„å¯¹è±¡ã€‚æ³¨æ„å½“ä½¿ç”¨å¯¹è±¡è¯­æ³•æ—¶ï¼Œæ˜¯ä¸æ”¯æŒä»»ä½•ä¿®é¥°å™¨çš„ã€‚

**ç¤ºä¾‹**ï¼š

```
<!-- æ–¹æ³•å¤„ç†å™¨ -->
<button v-on:click="doThis"></button>

<!-- åŠ¨æ€äº‹ä»¶ (2.6.0+) -->
<button v-on:[event]="doThis"></button>

<!-- å†…è”è¯­å¥ -->
<button v-on:click="doThat('hello', $event)"></button>

<!-- ç¼©å†™ -->
<button @click="doThis"></button>

<!-- åŠ¨æ€äº‹ä»¶ç¼©å†™ (2.6.0+) -->
<button @[event]="doThis"></button>

<!-- åœæ­¢å†’æ³¡ -->
<button @click.stop="doThis"></button>

<!-- é˜»æ­¢é»˜è®¤è¡Œä¸º -->
<button @click.prevent="doThis"></button>

<!-- é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œæ²¡æœ‰è¡¨è¾¾å¼ -->
<form @submit.prevent></form>

<!--  ä¸²è”ä¿®é¥°ç¬¦ -->
<button @click.stop.prevent="doThis"></button>

<!-- é”®ä¿®é¥°ç¬¦ï¼Œé”®åˆ«å -->
<input @keyup.enter="onEnter">

<!-- é”®ä¿®é¥°ç¬¦ï¼Œé”®ä»£ç  -->
<input @keyup.13="onEnter">

<!-- ç‚¹å‡»å›è°ƒåªä¼šè§¦å‘ä¸€æ¬¡ -->
<button v-on:click.once="doThis"></button>

<!-- å¯¹è±¡è¯­æ³• (2.4.0+) -->
<button v-on="{ mousedown: doThis, mouseup: doThat }"></button>
```

åœ¨å­ç»„ä»¶ä¸Šç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ (å½“å­ç»„ä»¶è§¦å‘â€œmy-eventâ€æ—¶å°†è°ƒç”¨äº‹ä»¶å¤„ç†å™¨)ï¼š

```
<my-component @my-event="handleThis"></my-component>

<!-- å†…è”è¯­å¥ -->
<my-component @my-event="handleThis(123, $event)"></my-component>

<!-- ç»„ä»¶ä¸­çš„åŸç”Ÿäº‹ä»¶ -->
<my-component @click.native="onClick"></my-component>
```

##### [v-bind](https://cn.vuejs.org/v2/api/#v-bind)

- **ç¼©å†™**ï¼š`:`

- **é¢„æœŸ**ï¼š`any (with argument) | Object (without argument)`

- **å‚æ•°**ï¼š`attrOrProp (optional)`

- **ä¿®é¥°ç¬¦**ï¼š

  - `.prop` - ä½œä¸ºä¸€ä¸ª DOM property ç»‘å®šè€Œä¸æ˜¯ä½œä¸º attribute ç»‘å®šã€‚([å·®åˆ«åœ¨å“ªé‡Œï¼Ÿ](https://stackoverflow.com/questions/6003819/properties-and-attributes-in-html#answer-6004028))
  - `.camel` - (2.1.0+) å°† kebab-case attribute åè½¬æ¢ä¸º camelCaseã€‚(ä» 2.1.0 å¼€å§‹æ”¯æŒ)
  - `.sync` (2.3.0+) è¯­æ³•ç³–ï¼Œä¼šæ‰©å±•æˆä¸€ä¸ªæ›´æ–°çˆ¶ç»„ä»¶ç»‘å®šå€¼çš„ `v-on` ä¾¦å¬å™¨ã€‚

- **ç”¨æ³•**ï¼š

  åŠ¨æ€åœ°ç»‘å®šä¸€ä¸ªæˆ–å¤šä¸ª attributeï¼Œæˆ–ä¸€ä¸ªç»„ä»¶ prop åˆ°è¡¨è¾¾å¼ã€‚

  åœ¨ç»‘å®š `class` æˆ– `style` attribute æ—¶ï¼Œæ”¯æŒå…¶å®ƒç±»å‹çš„å€¼ï¼Œå¦‚æ•°ç»„æˆ–å¯¹è±¡ã€‚å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ•™ç¨‹é“¾æ¥æŸ¥çœ‹è¯¦æƒ…ã€‚

  åœ¨ç»‘å®š prop æ—¶ï¼Œprop å¿…é¡»åœ¨å­ç»„ä»¶ä¸­å£°æ˜ã€‚å¯ä»¥ç”¨ä¿®é¥°ç¬¦æŒ‡å®šä¸åŒçš„ç»‘å®šç±»å‹ã€‚

  æ²¡æœ‰å‚æ•°æ—¶ï¼Œå¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ªåŒ…å«é”®å€¼å¯¹çš„å¯¹è±¡ã€‚æ³¨æ„æ­¤æ—¶ `class` å’Œ `style` ç»‘å®šä¸æ”¯æŒæ•°ç»„å’Œå¯¹è±¡ã€‚

- **ç¤ºä¾‹**ï¼š

  ```
  <!-- ç»‘å®šä¸€ä¸ª attribute -->
  <img v-bind:src="imageSrc">
  
  <!-- åŠ¨æ€ attribute å (2.6.0+) -->
  <button v-bind:[key]="value"></button>
  
  <!-- ç¼©å†™ -->
  <img :src="imageSrc">
  
  <!-- åŠ¨æ€ attribute åç¼©å†™ (2.6.0+) -->
  <button :[key]="value"></button>
  
  <!-- å†…è”å­—ç¬¦ä¸²æ‹¼æ¥ -->
  <img :src="'/path/to/images/' + fileName">
  
  <!-- class ç»‘å®š -->
  <div :class="{ red: isRed }"></div>
  <div :class="[classA, classB]"></div>
  <div :class="[classA, { classB: isB, classC: isC }]">
  
  <!-- style ç»‘å®š -->
  <div :style="{ fontSize: size + 'px' }"></div>
  <div :style="[styleObjectA, styleObjectB]"></div>
  
  <!-- ç»‘å®šä¸€ä¸ªå…¨æ˜¯ attribute çš„å¯¹è±¡ -->
  <div v-bind="{ id: someProp, 'other-attr': otherProp }"></div>
  
  <!-- é€šè¿‡ prop ä¿®é¥°ç¬¦ç»‘å®š DOM attribute -->
  <div v-bind:text-content.prop="text"></div>
  
  <!-- prop ç»‘å®šã€‚â€œpropâ€å¿…é¡»åœ¨ my-component ä¸­å£°æ˜ã€‚-->
  <my-component :prop="someThing"></my-component>
  
  <!-- é€šè¿‡ $props å°†çˆ¶ç»„ä»¶çš„ props ä¸€èµ·ä¼ ç»™å­ç»„ä»¶ -->
  <child-component v-bind="$props"></child-component>
  
  <!-- XLink -->
  <svg><a :xlink:special="foo"></a></svg>
  ```

  `.camel` ä¿®é¥°ç¬¦å…è®¸åœ¨ä½¿ç”¨ DOM æ¨¡æ¿æ—¶å°† `v-bind` property åç§°é©¼å³°åŒ–ï¼Œä¾‹å¦‚ SVG çš„ `viewBox` propertyï¼š

  ```
  <svg :view-box.camel="viewBox"></svg>
  ```

  åœ¨ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿æˆ–é€šè¿‡ `vue-loader`/`vueify` ç¼–è¯‘æ—¶ï¼Œæ— éœ€ä½¿ç”¨ `.camel`ã€‚

##### v-model

- **é¢„æœŸ**ï¼šéšè¡¨å•æ§ä»¶ç±»å‹ä¸åŒè€Œä¸åŒã€‚

- **é™åˆ¶**ï¼š

  - input
  - select 
  - Textarea

  - components

- **ä¿®é¥°ç¬¦**ï¼š

  - [`.lazy`](https://cn.vuejs.org/v2/guide/forms.html#lazy) - å–ä»£ `input` ç›‘å¬ `change` äº‹ä»¶
  - [`.number`](https://cn.vuejs.org/v2/guide/forms.html#number) - è¾“å…¥å­—ç¬¦ä¸²è½¬ä¸ºæœ‰æ•ˆçš„æ•°å­—
  - [`.trim`](https://cn.vuejs.org/v2/guide/forms.html#trim) - è¾“å…¥é¦–å°¾ç©ºæ ¼è¿‡æ»¤

- **ç”¨æ³•**ï¼š

  åœ¨è¡¨å•æ§ä»¶æˆ–è€…ç»„ä»¶ä¸Šåˆ›å»ºåŒå‘ç»‘å®šã€‚ç»†èŠ‚è¯·çœ‹ä¸‹é¢çš„æ•™ç¨‹é“¾æ¥ã€‚

- **å‚è€ƒ**ï¼š

  - [è¡¨å•æ§ä»¶ç»‘å®š](https://cn.vuejs.org/v2/guide/forms.html)
  - [ç»„ä»¶ - åœ¨è¾“å…¥ç»„ä»¶ä¸Šä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶](https://cn.vuejs.org/v2/guide/components-custom-events.html#å°†åŸç”Ÿäº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶)

  ###### æ–‡æœ¬

  ```js
  <input v-model="message" placeholder="edit me">
  <p>Message is: {{ message }}</p>
  ```

  ###### å¤šè¡Œæ–‡æœ¬

  ```html
  <span>Multiline message is:</span>
  <p style="white-space: pre-line;">{{ message }}</p>
  <br>
  <textarea v-model="message" placeholder="add multiple lines"></textarea>
  ```

  ###### [å¤é€‰æ¡†](https://cn.vuejs.org/v2/guide/forms.html#å¤é€‰æ¡†)

  ```html
  <input type="checkbox" id="checkbox" v-model="checked">
  <label for="checkbox">{{ checked }}</label>
  //å¤šä¸ªå¤é€‰æ¡†ï¼Œç»‘å®šåˆ°åŒä¸€ä¸ªæ•°ç»„ï¼š
  <div id='example-3'>
    <input type="checkbox" id="jack" value="Jack" v-model="checkedNames">
    <label for="jack">Jack</label>
    <input type="checkbox" id="john" value="John" v-model="checkedNames">
    <label for="john">John</label>
    <input type="checkbox" id="mike" value="Mike" v-model="checkedNames">
    <label for="mike">Mike</label>
    <br>
    <span>Checked names: {{ checkedNames }}</span>
  </div>
  ```

  ###### [å•é€‰æŒ‰é’®](https://cn.vuejs.org/v2/guide/forms.html#å•é€‰æŒ‰é’®)

  ```html
  <div id="example-4">
    <input type="radio" id="one" value="One" v-model="picked">
    <label for="one">One</label>
    <br>
    <input type="radio" id="two" value="Two" v-model="picked">
    <label for="two">Two</label>
    <br>
    <span>Picked: {{ picked }}</span>
  </div>
  ```

  ###### [é€‰æ‹©æ¡†](https://cn.vuejs.org/v2/guide/forms.html#é€‰æ‹©æ¡†)

  ```html
  <div id="example-5">
    <select v-model="selected">
      <option disabled value="">è¯·é€‰æ‹©</option>
      <option>A</option>
      <option>B</option>
      <option>C</option>
    </select>
    <span>Selected: {{ selected }}</span>
  </div>
  new Vue({
    el: '...',
    data: {
      selected: ''
    }
  })
  // å¤šé€‰
  <div id="example-6">
    <select v-model="selected" multiple style="width: 50px;">
      <option>A</option>
      <option>B</option>
      <option>C</option>
    </select>
    <br>
    <span>Selected: {{ selected }}</span>
  </div>
  new Vue({
    el: '#example-6',
    data: {
      selected: []
    }
  })
  ```

##### [v-text](https://cn.vuejs.org/v2/api/#v-text)

- **é¢„æœŸ**ï¼š`string`

- **è¯¦ç»†**ï¼š

  æ›´æ–°å…ƒç´ çš„ `textContent`ã€‚å¦‚æœè¦æ›´æ–°éƒ¨åˆ†çš„ `textContent`ï¼Œéœ€è¦ä½¿ç”¨ `{{ Mustache }}` æ’å€¼ã€‚

- **ç¤ºä¾‹**ï¼š

  ```
  <span v-text="msg"></span>
  <!-- å’Œä¸‹é¢çš„ä¸€æ · -->
  <span>{{msg}}</span>
  ```

- **å‚è€ƒ**ï¼š[æ•°æ®ç»‘å®šè¯­æ³• - æ’å€¼](https://cn.vuejs.org/v2/guide/syntax.html#æ’å€¼)



##### [v-html](https://cn.vuejs.org/v2/api/#v-html)

- **é¢„æœŸ**ï¼š`string`

- **è¯¦ç»†**ï¼š

  æ›´æ–°å…ƒç´ çš„ `innerHTML`ã€‚**æ³¨æ„ï¼šå†…å®¹æŒ‰æ™®é€š HTML æ’å…¥ - ä¸ä¼šä½œä¸º Vue æ¨¡æ¿è¿›è¡Œç¼–è¯‘**ã€‚å¦‚æœè¯•å›¾ä½¿ç”¨ `v-html` ç»„åˆæ¨¡æ¿ï¼Œå¯ä»¥é‡æ–°è€ƒè™‘æ˜¯å¦é€šè¿‡ä½¿ç”¨ç»„ä»¶æ¥æ›¿ä»£ã€‚

  åœ¨ç½‘ç«™ä¸ŠåŠ¨æ€æ¸²æŸ“ä»»æ„ HTML æ˜¯éå¸¸å±é™©çš„ï¼Œå› ä¸ºå®¹æ˜“å¯¼è‡´ [XSS æ”»å‡»](https://en.wikipedia.org/wiki/Cross-site_scripting)ã€‚åªåœ¨å¯ä¿¡å†…å®¹ä¸Šä½¿ç”¨ `v-html`ï¼Œ**æ°¸ä¸**ç”¨åœ¨ç”¨æˆ·æäº¤çš„å†…å®¹ä¸Šã€‚

  åœ¨[å•æ–‡ä»¶ç»„ä»¶](https://cn.vuejs.org/v2/guide/single-file-components.html)é‡Œï¼Œ`scoped` çš„æ ·å¼ä¸ä¼šåº”ç”¨åœ¨ `v-html` å†…éƒ¨ï¼Œå› ä¸ºé‚£éƒ¨åˆ† HTML æ²¡æœ‰è¢« Vue çš„æ¨¡æ¿ç¼–è¯‘å™¨å¤„ç†ã€‚å¦‚æœä½ å¸Œæœ›é’ˆå¯¹ `v-html` çš„å†…å®¹è®¾ç½®å¸¦ä½œç”¨åŸŸçš„ CSSï¼Œä½ å¯ä»¥æ›¿æ¢ä¸º [CSS Modules](https://vue-loader.vuejs.org/en/features/css-modules.html) æˆ–ç”¨ä¸€ä¸ªé¢å¤–çš„å…¨å±€ `` å…ƒç´ æ‰‹åŠ¨è®¾ç½®ç±»ä¼¼ BEM çš„ä½œç”¨åŸŸç­–ç•¥ã€‚

- **ç¤ºä¾‹**ï¼š

  ```
  <div v-html="html"></div>
  ```

- **å‚è€ƒ**ï¼š[æ•°æ®ç»‘å®šè¯­æ³• - æ’å€¼](https://cn.vuejs.org/v2/guide/syntax.html#çº¯-HTML)

```JavaScript

```

##### v-pre

- **ä¸éœ€è¦è¡¨è¾¾å¼**

- **ç”¨æ³•**ï¼š

  è·³è¿‡è¿™ä¸ªå…ƒç´ å’Œå®ƒçš„å­å…ƒç´ çš„ç¼–è¯‘è¿‡ç¨‹ã€‚å¯ä»¥ç”¨æ¥æ˜¾ç¤ºåŸå§‹ Mustache æ ‡ç­¾ã€‚è·³è¿‡å¤§é‡æ²¡æœ‰æŒ‡ä»¤çš„èŠ‚ç‚¹ä¼šåŠ å¿«ç¼–è¯‘ã€‚

- **ç¤ºä¾‹**ï¼š

  ```html
  <span v-pre>{{ this will not be compiled }}</span>
  ```

##### v-once

- **ä¸éœ€è¦è¡¨è¾¾å¼**

- **è¯¦ç»†**ï¼š

  åªæ¸²æŸ“å…ƒç´ å’Œç»„ä»¶**ä¸€æ¬¡**ã€‚éšåçš„é‡æ–°æ¸²æŸ“ï¼Œå…ƒç´ /ç»„ä»¶åŠå…¶æ‰€æœ‰çš„å­èŠ‚ç‚¹å°†è¢«è§†ä¸ºé™æ€å†…å®¹å¹¶è·³è¿‡ã€‚è¿™å¯ä»¥ç”¨äºä¼˜åŒ–æ›´æ–°æ€§èƒ½ã€‚

  ```
  <!-- å•ä¸ªå…ƒç´  -->
  <span v-once>This will never change: {{msg}}</span>
  <!-- æœ‰å­å…ƒç´  -->
  <div v-once>
    <h1>comment</h1>
    <p>{{msg}}</p>
  </div>
  <!-- ç»„ä»¶ -->
  <my-component v-once :comment="msg"></my-component>
  <!-- `v-for` æŒ‡ä»¤-->
  <ul>
    <li v-for="i in list" v-once>{{i}}</li>
  </ul>
  ```

- **å‚è€ƒ**ï¼š

  - [æ•°æ®ç»‘å®šè¯­æ³•- æ’å€¼](https://cn.vuejs.org/v2/guide/syntax.html#æ’å€¼)
  - [ç»„ä»¶ - å¯¹ä½å¼€é”€çš„é™æ€ç»„ä»¶ä½¿ç”¨ `v-once`](https://cn.vuejs.org/v2/guide/components-edge-cases.html#é€šè¿‡-v-once-åˆ›å»ºä½å¼€é”€çš„é™æ€ç»„ä»¶)



##### v-cloak

- **ä¸éœ€è¦è¡¨è¾¾å¼**

- **ç”¨æ³•**ï¼š

  è¿™ä¸ªæŒ‡ä»¤ä¿æŒåœ¨å…ƒç´ ä¸Šç›´åˆ°å…³è”å®ä¾‹ç»“æŸç¼–è¯‘ã€‚å’Œ CSS è§„åˆ™å¦‚ `[v-cloak] { display: none }` ä¸€èµ·ç”¨æ—¶ï¼Œè¿™ä¸ªæŒ‡ä»¤å¯ä»¥éšè—æœªç¼–è¯‘çš„ Mustache æ ‡ç­¾ç›´åˆ°å®ä¾‹å‡†å¤‡å®Œæ¯•ã€‚

- **ç¤ºä¾‹**ï¼š

  ```
  [v-cloak] {
    display: none;
  }
  ```

  ```
  <div v-cloak>
    {{ message }}
  </div>
  ```

  

  ä¸ä¼šæ˜¾ç¤ºï¼Œç›´åˆ°ç¼–è¯‘ç»“æŸã€‚

â€‹	

##### v-if

- **é¢„æœŸ**ï¼š`any`

- **ç”¨æ³•**ï¼š

  æ ¹æ®è¡¨è¾¾å¼çš„å€¼çš„ [truthiness](https://developer.mozilla.org/zh-CN/docs/Glossary/Truthy) æ¥æœ‰æ¡ä»¶åœ°æ¸²æŸ“å…ƒç´ ã€‚åœ¨åˆ‡æ¢æ—¶å…ƒç´ åŠå®ƒçš„æ•°æ®ç»‘å®š / ç»„ä»¶è¢«é”€æ¯å¹¶é‡å»ºã€‚å¦‚æœå…ƒç´ æ˜¯ `ï¼Œå°†æå‡ºå®ƒçš„å†…å®¹ä½œä¸ºæ¡ä»¶å—ã€‚

  å½“æ¡ä»¶å˜åŒ–æ—¶è¯¥æŒ‡ä»¤è§¦å‘è¿‡æ¸¡æ•ˆæœã€‚

  å½“å’Œ `v-if` ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ`v-for` çš„ä¼˜å…ˆçº§æ¯” `v-if` æ›´é«˜ã€‚è¯¦è§[åˆ—è¡¨æ¸²æŸ“æ•™ç¨‹](https://cn.vuejs.org/v2/guide/list.html#v-for-with-v-if)

- **å‚è€ƒ**ï¼š[æ¡ä»¶æ¸²æŸ“ - v-if](https://cn.vuejs.org/v2/guide/conditional.html)

##### v-show

- **é¢„æœŸ**ï¼š`any`

- **ç”¨æ³•**ï¼š

  æ ¹æ®è¡¨è¾¾å¼ä¹‹çœŸå‡å€¼ï¼Œåˆ‡æ¢å…ƒç´ çš„ `display` CSS propertyã€‚

  å½“æ¡ä»¶å˜åŒ–æ—¶è¯¥æŒ‡ä»¤è§¦å‘è¿‡æ¸¡æ•ˆæœã€‚

- **å‚è€ƒ**ï¼š[æ¡ä»¶æ¸²æŸ“ - v-show](https://cn.vuejs.org/v2/guide/conditional.html#v-show)

##### v-for

- **é¢„æœŸ**ï¼š`Array | Object | number | string | Iterable (2.6 æ–°å¢)`

- **ç”¨æ³•**ï¼š

  åŸºäºæºæ•°æ®å¤šæ¬¡æ¸²æŸ“å…ƒç´ æˆ–æ¨¡æ¿å—ã€‚æ­¤æŒ‡ä»¤ä¹‹å€¼ï¼Œå¿…é¡»ä½¿ç”¨ç‰¹å®šè¯­æ³• `alias in expression`ï¼Œä¸ºå½“å‰éå†çš„å…ƒç´ æä¾›åˆ«åï¼š

  ```
  <div v-for="item in items">
    {{ item.text }}
  </div>
  ```

  å¦å¤–ä¹Ÿå¯ä»¥ä¸ºæ•°ç»„ç´¢å¼•æŒ‡å®šåˆ«å (æˆ–è€…ç”¨äºå¯¹è±¡çš„é”®)ï¼š

  ```
  <div v-for="(item, index) in items"></div>
  <div v-for="(val, key) in object"></div>
  <div v-for="(val, name, index) in object"></div>
  ```

  `v-for` çš„é»˜è®¤è¡Œä¸ºä¼šå°è¯•åŸåœ°ä¿®æ”¹å…ƒç´ è€Œä¸æ˜¯ç§»åŠ¨å®ƒä»¬ã€‚è¦å¼ºåˆ¶å…¶é‡æ–°æ’åºå…ƒç´ ï¼Œä½ éœ€è¦ç”¨ç‰¹æ®Š attribute `key` æ¥æä¾›ä¸€ä¸ªæ’åºæç¤ºï¼š

  ```
  <div v-for="item in items" :key="item.id">
    {{ item.text }}
  </div>
  ```

  ä» 2.6 èµ·ï¼Œ`v-for` ä¹Ÿå¯ä»¥åœ¨å®ç°äº†[å¯è¿­ä»£åè®®](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Iteration_protocols#å¯è¿­ä»£åè®®)çš„å€¼ä¸Šä½¿ç”¨ï¼ŒåŒ…æ‹¬åŸç”Ÿçš„ `Map` å’Œ `Set`ã€‚ä¸è¿‡åº”è¯¥æ³¨æ„çš„æ˜¯ Vue 2.x ç›®å‰å¹¶ä¸æ”¯æŒå¯å“åº”çš„ `Map` å’Œ `Set` å€¼ï¼Œæ‰€ä»¥æ— æ³•è‡ªåŠ¨æ¢æµ‹å˜æ›´ã€‚

  å½“å’Œ `v-if` ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ`v-for` çš„ä¼˜å…ˆçº§æ¯” `v-if` æ›´é«˜ã€‚è¯¦è§[åˆ—è¡¨æ¸²æŸ“æ•™ç¨‹](https://cn.vuejs.org/v2/guide/list.html#v-for-with-v-if)

  `v-for` çš„è¯¦ç»†ç”¨æ³•å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥æŸ¥çœ‹æ•™ç¨‹è¯¦ç»†è¯´æ˜ã€‚

- **å‚è€ƒ**ï¼š

  - [åˆ—è¡¨æ¸²æŸ“](https://cn.vuejs.org/v2/guide/list.html)
  - [k](https://cn.vuejs.org/v2/guide/list.html#key)

##### è‡ªå®šä¹‰æŒ‡ä»¤

é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ (`v-model` å’Œ `v-show`)ï¼ŒVue ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚æ³¨æ„ï¼Œåœ¨ Vue2.0 ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚ä¸¾ä¸ªæ–‡æœ¬æ¡†è‡ªåŠ¨èšç„¦çš„ä¾‹å­ï¼Œå½“é¡µé¢åŠ è½½æ—¶ï¼Œè¯¥å…ƒç´ å°†è·å¾—ç„¦ç‚¹ (æ³¨æ„ï¼š`autofocus` åœ¨ç§»åŠ¨ç‰ˆ Safari ä¸Šä¸å·¥ä½œ)ã€‚äº‹å®ä¸Šï¼Œåªè¦ä½ åœ¨æ‰“å¼€è¿™ä¸ªé¡µé¢åè¿˜æ²¡ç‚¹å‡»è¿‡ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªè¾“å…¥æ¡†å°±åº”å½“è¿˜æ˜¯å¤„äºèšç„¦çŠ¶æ€ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨æŒ‡ä»¤æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š

```js
// æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ `v-focus`
Vue.directive('focus', {
  // å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦
  inserted: function (el) {
    // èšç„¦å…ƒç´ 
    el.focus()
  }
})
```

å¦‚æœæƒ³æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ï¼Œç»„ä»¶ä¸­ä¹Ÿæ¥å—ä¸€ä¸ª `directives` çš„é€‰é¡¹:

```js
directives: {
  focus: {
    // æŒ‡ä»¤çš„å®šä¹‰
    inserted: function (el) {
      el.focus()
    }
  }
}
```

ç„¶åä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä»»ä½•å…ƒç´ ä¸Šä½¿ç”¨æ–°çš„ `v-focus` propertyï¼Œå¦‚ä¸‹ï¼š

```html
<input v-focus>
```





###### [é’©å­å‡½æ•°](https://cn.vuejs.org/v2/guide/custom-directive.html#é’©å­å‡½æ•°) 

ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š

- `bind`ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚
- `inserted`ï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚
- `update`ï¼šæ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ï¼Œ**ä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ VNode æ›´æ–°ä¹‹å‰**ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚

æˆ‘ä»¬ä¼šåœ¨[ç¨å](https://cn.vuejs.org/v2/guide/render-function.html#è™šæ‹Ÿ-DOM)è®¨è®º[æ¸²æŸ“å‡½æ•°](https://cn.vuejs.org/v2/guide/render-function.html)æ—¶ä»‹ç»æ›´å¤š VNodes çš„ç»†èŠ‚ã€‚

- `componentUpdated`ï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode **åŠå…¶å­ VNode** å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚
- `unbind`ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é’©å­å‡½æ•°çš„å‚æ•° (å³ `el`ã€`binding`ã€`vnode` å’Œ `oldVnode`)ã€‚

###### [é’©å­å‡½æ•°å‚æ•°](https://cn.vuejs.org/v2/guide/custom-directive.html#é’©å­å‡½æ•°å‚æ•°)

æŒ‡ä»¤é’©å­å‡½æ•°ä¼šè¢«ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š

- `el`ï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOMã€‚

- ```
  binding
  ```

  ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ propertyï¼š

  - `name`ï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ `v-` å‰ç¼€ã€‚
  - `value`ï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼š`v-my-directive="1 + 1"` ä¸­ï¼Œç»‘å®šå€¼ä¸º `2`ã€‚
  - `oldValue`ï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ `update` å’Œ `componentUpdated` é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚
  - `expression`ï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ `v-my-directive="1 + 1"` ä¸­ï¼Œè¡¨è¾¾å¼ä¸º `"1 + 1"`ã€‚
  - `arg`ï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ `v-my-directive:foo` ä¸­ï¼Œå‚æ•°ä¸º `"foo"`ã€‚
  - `modifiers`ï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š`v-my-directive.foo.bar` ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º `{ foo: true, bar: true }`ã€‚

- `vnode`ï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ [VNode API](https://cn.vuejs.org/v2/api/#VNode-æ¥å£) æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

- `oldVnode`ï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ `update` å’Œ `componentUpdated` é’©å­ä¸­å¯ç”¨ã€‚

é™¤äº† `el` ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ [`dataset`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset) æ¥è¿›è¡Œã€‚

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨äº†è¿™äº› property çš„è‡ªå®šä¹‰é’©å­æ ·ä¾‹ï¼š

```
<div id="hook-arguments-example" v-demo:foo.a.b="message"></div>
Vue.directive('demo', {
  bind: function (el, binding, vnode) {
    var s = JSON.stringify
    el.innerHTML =
      'name: '       + s(binding.name) + '<br>' +
      'value: '      + s(binding.value) + '<br>' +
      'expression: ' + s(binding.expression) + '<br>' +
      'argument: '   + s(binding.arg) + '<br>' +
      'modifiers: '  + s(binding.modifiers) + '<br>' +
      'vnode keys: ' + Object.keys(vnode).join(', ')
  }
})

new Vue({
  el: '#hook-arguments-example',
  data: {
    message: 'hello!'
  }
})
```

name: "demo"
value: "hello!"
expression: "message"
argument: "foo"
modifiers: {"a":true,"b":true}
vnode keys: tag, data, children, text, elm, ns, context, fnContext, fnOptions, fnScopeId, key, componentOptions, componentInstance, parent, raw, isStatic, isRootInsert, isComment, isCloned, isOnce, asyncFactory, asyncMeta, isAsyncPlaceholder

###### [åŠ¨æ€æŒ‡ä»¤å‚æ•°](https://cn.vuejs.org/v2/guide/custom-directive.html#åŠ¨æ€æŒ‡ä»¤å‚æ•°)

æŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ `v-mydirective:[argument]="value"` ä¸­ï¼Œ`argument` å‚æ•°å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹æ•°æ®è¿›è¡Œæ›´æ–°ï¼è¿™ä½¿å¾—è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥åœ¨åº”ç”¨ä¸­è¢«çµæ´»ä½¿ç”¨ã€‚

ä¾‹å¦‚ä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œç”¨æ¥é€šè¿‡å›ºå®šå¸ƒå±€å°†å…ƒç´ å›ºå®šåœ¨é¡µé¢ä¸Šã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªé€šè¿‡æŒ‡ä»¤å€¼æ¥æ›´æ–°ç«–ç›´ä½ç½®åƒç´ å€¼çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼š

```
<div id="baseexample">
  <p>Scroll down the page</p>
  <p v-pin="200">Stick me 200px from the top of the page</p>
</div>
Vue.directive('pin', {
  bind: function (el, binding, vnode) {
    el.style.position = 'fixed'
    el.style.top = binding.value + 'px'
  }
})

new Vue({
  el: '#baseexample'
})
```

è¿™ä¼šæŠŠè¯¥å…ƒç´ å›ºå®šåœ¨è·ç¦»é¡µé¢é¡¶éƒ¨ 200 åƒç´ çš„ä½ç½®ã€‚ä½†å¦‚æœåœºæ™¯æ˜¯æˆ‘ä»¬éœ€è¦æŠŠå…ƒç´ å›ºå®šåœ¨å·¦ä¾§è€Œä¸æ˜¯é¡¶éƒ¨åˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶ä½¿ç”¨åŠ¨æ€å‚æ•°å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ ¹æ®æ¯ä¸ªç»„ä»¶å®ä¾‹æ¥è¿›è¡Œæ›´æ–°ã€‚

```
<div id="dynamicexample">
  <h3>Scroll down inside this section â†“</h3>
  <p v-pin:[direction]="200">I am pinned onto the page at 200px to the left.</p>
</div>
Vue.directive('pin', {
  bind: function (el, binding, vnode) {
    el.style.position = 'fixed'
    var s = (binding.arg == 'left' ? 'left' : 'top')
    el.style[s] = binding.value + 'px'
  }
})

new Vue({
  el: '#dynamicexample',
  data: function () {
    return {
      direction: 'left'
    }
  }
})
```

## [ç»„ä»¶](https://cn.vuejs.org/v2/guide/components.html)

### [ç»„ä»¶æ³¨å†Œ](https://cn.vuejs.org/v2/guide/components-registration.html)

#### åŸºæœ¬ç¤ºä¾‹

```html
// å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°ç»„ä»¶
Vue.component('button-counter', {
  data: function () {
    return {
      count: 0
    }
  },
  template: '<button v-on:click="count++">You clicked me {{ count }} times.</button>'
})
```

> å› ä¸ºç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ `new Vue` æ¥æ”¶ç›¸åŒçš„é€‰é¡¹ï¼Œä¾‹å¦‚ `data`ã€`computed`ã€`watch`ã€`methods` ä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­ç­‰ã€‚ä»…æœ‰çš„ä¾‹å¤–æ˜¯åƒ `el` è¿™æ ·æ ¹å®ä¾‹ç‰¹æœ‰çš„é€‰é¡¹ã€‚

#### [ç»„ä»¶å](https://cn.vuejs.org/v2/guide/components-registration.html#ç»„ä»¶å)

##### [ç»„ä»¶åå¤§å°å†™](https://cn.vuejs.org/v2/guide/components-registration.html#ç»„ä»¶åå¤§å°å†™)

å®šä¹‰ç»„ä»¶åçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š

##### ä½¿ç”¨ kebab-case

```
Vue.component('my-component-name', { /* ... */ })
```

å½“ä½¿ç”¨ kebab-case (çŸ­æ¨ªçº¿åˆ†éš”å‘½å) å®šä¹‰ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä½ ä¹Ÿå¿…é¡»åœ¨å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰å…ƒç´ æ—¶ä½¿ç”¨ kebab-caseï¼Œä¾‹å¦‚ ``ã€‚

##### ä½¿ç”¨ PascalCase

```
Vue.component('MyComponentName', { /* ... */ })
```

å½“ä½¿ç”¨ PascalCase (é¦–å­—æ¯å¤§å†™å‘½å) å®šä¹‰ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä½ åœ¨å¼•ç”¨è¿™ä¸ªè‡ªå®šä¹‰å…ƒç´ æ—¶ä¸¤ç§å‘½åæ³•éƒ½å¯ä»¥ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ `` å’Œ `` éƒ½æ˜¯å¯æ¥å—çš„ã€‚æ³¨æ„ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œç›´æ¥åœ¨ DOM (å³éå­—ç¬¦ä¸²çš„æ¨¡æ¿) ä¸­ä½¿ç”¨æ—¶åªæœ‰ kebab-case æ˜¯æœ‰æ•ˆçš„ã€‚

#### [data å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°](https://cn.vuejs.org/v2/guide/components.html#data-å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°)

å½“æˆ‘ä»¬å®šä¹‰è¿™ä¸ª `` ç»„ä»¶æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°å®ƒçš„ `data` å¹¶ä¸æ˜¯åƒè¿™æ ·ç›´æ¥æä¾›ä¸€ä¸ªå¯¹è±¡ï¼š

```
data: {
  count: 0
}
```

å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œ**ä¸€ä¸ªç»„ä»¶çš„ `data` é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°**ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼š

```js
data: function () {
  return {
    count: 0
  }
}
```

#### [å•ä¸ªæ ¹å…ƒç´ ](https://cn.vuejs.org/v2/guide/components.html#å•ä¸ªæ ¹å…ƒç´ )

å½“æ„å»ºä¸€ä¸ªç»„ä»¶æ—¶ï¼Œä½ çš„æ¨¡æ¿æœ€ç»ˆä¼šåŒ…å«çš„ä¸œè¥¿è¿œä¸æ­¢ä¸€ä¸ªæ ‡ç­¾ï¼š

```
<h3>{{ title }}</h3>
```

å¯èƒ½ä½ è¿˜ä¼šæœ‰å¦å¤–ä¸€ä¸ªå¹¶è¡Œæ ‡ç­¾ï¼š

```
<h3>{{ title }}</h3>
<div v-html="content"></div>
```

ç„¶è€Œå¦‚æœä½ åœ¨æ¨¡æ¿ä¸­å°è¯•è¿™æ ·å†™ï¼ŒVue ä¼šæ˜¾ç¤ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶è§£é‡Šé“ **every component must have a single root element (æ¯ä¸ªç»„ä»¶å¿…é¡»åªæœ‰ä¸€ä¸ªæ ¹å…ƒç´ )**ã€‚ä½ å¯ä»¥å°†æ¨¡æ¿çš„å†…å®¹åŒ…è£¹åœ¨ä¸€ä¸ªçˆ¶å…ƒç´ å†…ï¼Œæ¥ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œä¾‹å¦‚ï¼š

```html
<div class="blog-post">
  <h3>{{ title }}</h3>
  <div v-html="content"></div>
</div>
```



#### [ç»„ä»¶çš„ç»„ç»‡](https://cn.vuejs.org/v2/guide/components.html#ç»„ä»¶çš„ç»„ç»‡)

##### **å…¨å±€æ³¨å†Œ**

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªç”¨è¿‡ `Vue.component` æ¥åˆ›å»ºç»„ä»¶ï¼š

```
Vue.component('my-component-name', {
  // ... é€‰é¡¹ ...
})
```

è¿™äº›ç»„ä»¶æ˜¯**å…¨å±€æ³¨å†Œçš„**ã€‚ä¹Ÿå°±æ˜¯è¯´å®ƒä»¬åœ¨æ³¨å†Œä¹‹åå¯ä»¥ç”¨åœ¨ä»»ä½•æ–°åˆ›å»ºçš„ Vue æ ¹å®ä¾‹ (`new Vue`) çš„æ¨¡æ¿ä¸­ã€‚æ¯”å¦‚ï¼š

```
Vue.component('component-a', { /* ... */ })
Vue.component('component-b', { /* ... */ })
Vue.component('component-c', { /* ... */ })

new Vue({ el: '#app' })
<div id="app">
  <component-a></component-a>
  <component-b></component-b>
  <component-c></component-c>
</div>
```

åœ¨æ‰€æœ‰å­ç»„ä»¶ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸‰ä¸ªç»„ä»¶*åœ¨å„è‡ªå†…éƒ¨*ä¹Ÿéƒ½å¯ä»¥ç›¸äº’ä½¿ç”¨ã€‚

##### å±€éƒ¨æ³¨å†Œ

å…¨å±€æ³¨å†Œå¾€å¾€æ˜¯ä¸å¤Ÿç†æƒ³çš„ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªåƒ webpack è¿™æ ·çš„æ„å»ºç³»ç»Ÿï¼Œå…¨å±€æ³¨å†Œæ‰€æœ‰çš„ç»„ä»¶æ„å‘³ç€å³ä¾¿ä½ å·²ç»ä¸å†ä½¿ç”¨ä¸€ä¸ªç»„ä»¶äº†ï¼Œå®ƒä»ç„¶ä¼šè¢«åŒ…å«åœ¨ä½ æœ€ç»ˆçš„æ„å»ºç»“æœä¸­ã€‚è¿™é€ æˆäº†ç”¨æˆ·ä¸‹è½½çš„ JavaScript çš„æ— è°“çš„å¢åŠ ã€‚

åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡æ¥å®šä¹‰ç»„ä»¶ï¼š

```
var ComponentA = { /* ... */ }
var ComponentB = { /* ... */ }
var ComponentC = { /* ... */ }
```

ç„¶ååœ¨ `components` é€‰é¡¹ä¸­å®šä¹‰ä½ æƒ³è¦ä½¿ç”¨çš„ç»„ä»¶ï¼š

```
new Vue({
  el: '#app',
  components: {
    'component-a': ComponentA,
    'component-b': ComponentB
  }
})
```

å¯¹äº `components` å¯¹è±¡ä¸­çš„æ¯ä¸ª property æ¥è¯´ï¼Œå…¶ property åå°±æ˜¯è‡ªå®šä¹‰å…ƒç´ çš„åå­—ï¼Œå…¶ property å€¼å°±æ˜¯è¿™ä¸ªç»„ä»¶çš„é€‰é¡¹å¯¹è±¡ã€‚

æ³¨æ„**å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶åœ¨å…¶å­ç»„ä»¶ä¸­\*ä¸å¯ç”¨\***ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å¸Œæœ› `ComponentA` åœ¨ `ComponentB` ä¸­å¯ç”¨ï¼Œåˆ™ä½ éœ€è¦è¿™æ ·å†™ï¼š

```
var ComponentA = { /* ... */ }

var ComponentB = {
  components: {
    'component-a': ComponentA
  },
  // ...
}
```

### [Prop](https://cn.vuejs.org/v2/guide/components-props.html)

#### [ä¾‹å­](https://cn.vuejs.org/v2/guide/components.html#é€šè¿‡-Prop-å‘å­ç»„ä»¶ä¼ é€’æ•°æ®)

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <blog-post 
        :key="post.id"
        v-for="(post,index) in posts"
        :post-title="post.title"
        ></blog-post>
    </div>
</body>
<!-- 1.å¼•å…¥ vue çš„ä¾èµ–åº“  -->
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    Vue.component("blog-post",{
        props:["postTitle"],
        template:`<h1>{{postTitle}}</h1>`
    })
    let vm = new Vue({
        el:"#app",
        data:{
            posts:[{
                title:"ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘",
                id:1
            },{
                title:"ğŸ’¯ğŸ’¯ğŸ’¯ğŸ’¯ğŸ’¯ğŸ’¯",
                id:2
            },{
                title:"ğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜ŠğŸ˜Š",
                id:3
            }]
        }
    })
</script>

</html>
```

#### [Prop çš„å¤§å°å†™ (camelCase vs kebab-case)](https://cn.vuejs.org/v2/guide/components-props.html#Prop-çš„å¤§å°å†™-camelCase-vs-kebab-case)

HTML ä¸­çš„ attribute åæ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šæŠŠæ‰€æœ‰å¤§å†™å­—ç¬¦è§£é‡Šä¸ºå°å†™å­—ç¬¦ã€‚è¿™æ„å‘³ç€å½“ä½ ä½¿ç”¨ DOM ä¸­çš„æ¨¡æ¿æ—¶ï¼ŒcamelCase (é©¼å³°å‘½åæ³•) çš„ prop åéœ€è¦ä½¿ç”¨å…¶ç­‰ä»·çš„ kebab-case (çŸ­æ¨ªçº¿åˆ†éš”å‘½å) å‘½åï¼š

```
Vue.component('blog-post', {
  // åœ¨ JavaScript ä¸­æ˜¯ camelCase çš„
  props: ['postTitle'],
  template: '<h3>{{ postTitle }}</h3>'
})
<!-- åœ¨ HTML ä¸­æ˜¯ kebab-case çš„ -->
<blog-post post-title="hello!"></blog-post>
```



#### Propsçš„ç±»å‹

```js
        props: { 
            postTitle: String,
            likes:Number,
            isPublished:Boolean,
            commentIds:Array,
            author:Object,
            callback:Function,
            contactsPromise:Promise
        },
```

#### [ä¼ é€’é™æ€æˆ–åŠ¨æ€ Prop](https://cn.vuejs.org/v2/guide/components-props.html#ä¼ é€’é™æ€æˆ–åŠ¨æ€-Prop)

ä¼ é€’é™æ€çš„propå€¼,ç›´æ¥é€šè¿‡å±æ€§

```html
<blog-post title="My journey with Vue"></blog-post>
```

ä¼ é€’åŠ¨æ€çš„propå€¼,é€šè¿‡`v-bind`

```html
<blog-post
  v-bind:title="post.title + ' by ' + post.author.name"
></blog-post>
```

ä¼ æ•°å­—

```html
        <blog-post v-bind:likes="3"></blog-post>
```



ä¼ å¸ƒå°”å€¼

```html
<!-- åŒ…å«è¯¥ prop æ²¡æœ‰å€¼çš„æƒ…å†µåœ¨å†…ï¼Œéƒ½æ„å‘³ç€ `true`ã€‚-->
<blog-post is-published></blog-post>

<!-- å³ä¾¿ `false` æ˜¯é™æ€çš„ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ `v-bind` æ¥å‘Šè¯‰ Vue -->
<!-- è¿™æ˜¯ä¸€ä¸ª JavaScript è¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚-->
<blog-post v-bind:is-published="false"></blog-post>

<!-- ç”¨ä¸€ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€èµ‹å€¼ã€‚-->
<blog-post v-bind:is-published="post.isPublished"></blog-post>
```

ä¼ æ•°ç»„

```html
<!-- å³ä¾¿æ•°ç»„æ˜¯é™æ€çš„ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ `v-bind` æ¥å‘Šè¯‰ Vue -->
<!-- è¿™æ˜¯ä¸€ä¸ª JavaScript è¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚-->
<blog-post v-bind:comment-ids="[234, 266, 273]"></blog-post>

<!-- ç”¨ä¸€ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€èµ‹å€¼ã€‚-->
<blog-post v-bind:comment-ids="post.commentIds"></blog-post>
```

ä¼ å¯¹è±¡

```html
<!-- å³ä¾¿å¯¹è±¡æ˜¯é™æ€çš„ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ `v-bind` æ¥å‘Šè¯‰ Vue -->
<!-- è¿™æ˜¯ä¸€ä¸ª JavaScript è¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚-->
<blog-post
  v-bind:author="{
    name: 'Veronica',
    company: 'Veridian Dynamics'
  }"
></blog-post>

<!-- ç”¨ä¸€ä¸ªå˜é‡è¿›è¡ŒåŠ¨æ€èµ‹å€¼ã€‚-->
<blog-post v-bind:author="post.author"></blog-post>
```

ä¼ å…¥ä¸€ä¸ªå¯¹è±¡æ‰€æœ‰çš„å±æ€§

```html
å¦‚æœä½ æƒ³è¦å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ property éƒ½ä½œä¸º prop ä¼ å…¥ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ v-bind (å–ä»£ v-bind:prop-name)ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„å¯¹è±¡ postï¼š

post: {
  id: 1,
  title: 'My Journey with Vue'
}
ä¸‹é¢çš„æ¨¡æ¿ï¼š

<blog-post v-bind="post"></blog-post>
ç­‰ä»·äºï¼š

<blog-post
  v-bind:id="post.id"
  v-bind:title="post.title"
></blog-post>
```

#### çˆ¶å­ä¼ å€¼

- çˆ¶å‘å­ä¼ å€¼ é€šè¿‡å±æ€§
- å­å‘çˆ¶ä¼ å€¼ é€šè¿‡äº‹ä»¶

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <blog-post v-on:my-event="customevent"
        title="ğŸ‘ğŸ˜Š"
        ></blog-post>

    </div>
</body>
<!-- 1.å¼•å…¥ vue çš„ä¾èµ–åº“  -->
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    Vue.component("blog-post", {
        props: {
            title:String
        },
        data: function () {
            return {
            }
        },
        template: `<h1 @click="childFn">
                ç‚¹å‡»å­å‘çˆ¶ä¼ å€¼ {{title}}
            </h1>
            
            `
        ,
        methods: {
            childFn: function (e) {
                // this.$emit("my-event", 123) é€šè¿‡è§¦å‘äº‹ä»¶ å›ä¼ æ•°æ®
                this.$emit("my-event", 123)
            }
        },
    })
    let vm = new Vue({
        el: "#app",
        data: {

        },
        methods: {
            customevent: function (e) {
                console.log(e);
            }
        },
    })
</script>

</html>
```



#### [å•å‘æ•°æ®æµ](https://cn.vuejs.org/v2/guide/components-props.html#å•å‘æ•°æ®æµ)

æ‰€æœ‰çš„ prop éƒ½ä½¿å¾—å…¶çˆ¶å­ prop ä¹‹é—´å½¢æˆäº†ä¸€ä¸ª**å•å‘ä¸‹è¡Œç»‘å®š**ï¼šçˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚è¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–å˜æ›´çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£ã€‚

é¢å¤–çš„ï¼Œæ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿå˜æ›´æ—¶ï¼Œå­ç»„ä»¶ä¸­æ‰€æœ‰çš„ prop éƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚è¿™æ„å‘³ç€ä½ **ä¸**åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜ propã€‚å¦‚æœä½ è¿™æ ·åšäº†ï¼ŒVue ä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚

è¿™é‡Œæœ‰ä¸¤ç§å¸¸è§çš„è¯•å›¾å˜æ›´ä¸€ä¸ª prop çš„æƒ…å½¢ï¼š

1. **è¿™ä¸ª prop ç”¨æ¥ä¼ é€’ä¸€ä¸ªåˆå§‹å€¼ï¼›è¿™ä¸ªå­ç»„ä»¶æ¥ä¸‹æ¥å¸Œæœ›å°†å…¶ä½œä¸ºä¸€ä¸ªæœ¬åœ°çš„ prop æ•°æ®æ¥ä½¿ç”¨ã€‚**åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½å®šä¹‰ä¸€ä¸ªæœ¬åœ°çš„ data property å¹¶å°†è¿™ä¸ª prop ç”¨ä½œå…¶åˆå§‹å€¼ï¼š

   ```
   props: ['initialCounter'],
   data: function () {
     return {
       counter: this.initialCounter
     }
   }
   ```

2. **è¿™ä¸ª prop ä»¥ä¸€ç§åŸå§‹çš„å€¼ä¼ å…¥ä¸”éœ€è¦è¿›è¡Œè½¬æ¢ã€‚**åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½ä½¿ç”¨è¿™ä¸ª prop çš„å€¼æ¥å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§ï¼š

   ```
   props: ['size'],
   computed: {
     normalizedSize: function () {
       return this.size.trim().toLowerCase()
     }
   }
   ```

> æ³¨æ„åœ¨ JavaScript ä¸­å¯¹è±¡å’Œæ•°ç»„æ˜¯é€šè¿‡å¼•ç”¨ä¼ å…¥çš„ï¼Œæ‰€ä»¥å¯¹äºä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡ç±»å‹çš„ prop æ¥è¯´ï¼Œåœ¨å­ç»„ä»¶ä¸­æ”¹å˜å˜æ›´è¿™ä¸ªå¯¹è±¡æˆ–æ•°ç»„æœ¬èº«**å°†ä¼š**å½±å“åˆ°çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚

#### [Prop éªŒè¯](https://cn.vuejs.org/v2/guide/components-props.html#Prop-éªŒè¯)

æˆ‘ä»¬å¯ä»¥ä¸ºç»„ä»¶çš„ prop æŒ‡å®šéªŒè¯è¦æ±‚ï¼Œä¾‹å¦‚ä½ çŸ¥é“çš„è¿™äº›ç±»å‹ã€‚å¦‚æœæœ‰ä¸€ä¸ªéœ€æ±‚æ²¡æœ‰è¢«æ»¡è¶³ï¼Œåˆ™ Vue ä¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è­¦å‘Šä½ ã€‚è¿™åœ¨å¼€å‘ä¸€ä¸ªä¼šè¢«åˆ«äººç”¨åˆ°çš„ç»„ä»¶æ—¶å°¤å…¶æœ‰å¸®åŠ©ã€‚

ä¸ºäº†å®šåˆ¶ prop çš„éªŒè¯æ–¹å¼ï¼Œä½ å¯ä»¥ä¸º `props` ä¸­çš„å€¼æä¾›ä¸€ä¸ªå¸¦æœ‰éªŒè¯éœ€æ±‚çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚ä¾‹å¦‚ï¼š

```html
Vue.component('my-component', {
  props: {
    // åŸºç¡€çš„ç±»å‹æ£€æŸ¥ (`null` å’Œ `undefined` ä¼šé€šè¿‡ä»»ä½•ç±»å‹éªŒè¯)
    propA: Number,
    // å¤šä¸ªå¯èƒ½çš„ç±»å‹
    propB: [String, Number],
    // å¿…å¡«çš„å­—ç¬¦ä¸²
    propC: {
      type: String,
      required: true
    },
    // å¸¦æœ‰é»˜è®¤å€¼çš„æ•°å­—
    propD: {
      type: Number,
      default: 100
    },
    // å¸¦æœ‰é»˜è®¤å€¼çš„å¯¹è±¡
    propE: {
      type: Object,
      // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å–
      default: function () {
        return { message: 'hello' }
      }
    },
    // è‡ªå®šä¹‰éªŒè¯å‡½æ•°
    propF: {
      validator: function (value) {
        // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª
        return ['success', 'warning', 'danger'].indexOf(value) !== -1
      }
    }
  }
})
```

å½“ prop éªŒè¯å¤±è´¥çš„æ—¶å€™ï¼Œ(å¼€å‘ç¯å¢ƒæ„å»ºç‰ˆæœ¬çš„) Vue å°†ä¼šäº§ç”Ÿä¸€ä¸ªæ§åˆ¶å°çš„è­¦å‘Šã€‚

ä¾‹å­ï¼š

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <blog-post v-bind="obj"></blog-post>


    </div>
</body>
<!-- 1.å¼•å…¥ vue çš„ä¾èµ–åº“  -->
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    function Person(name,sex){

    }
    Vue.component("blog-post", {
        props: {
            // number:Number,
            number: [Number, String],
            name: {
                type: String,
                required: true
            },
            sex: {
                type: String,
                default: "ç”·"
            },
            object: {
                type: Object,
               // required:true,
                default: function () {
                    return { message: "ğŸ’¯" };
                }
            },
            score:{
                validator:function(value){
                    return value > 60
                }
            },
            author:Person

        },
        template: `
            <h1>
                number:{{number}}
                name:{{name}}
                sex:{{sex}}
                object:{{object}}
            </h1>
        `
    });
    let vm = new Vue({
        el: "#app",
        data: {
            obj: {
                // number:1,
                number: "tt",
                //  name:"Thomas"
                name: "",
                sex: "å¥³",
                //score:50,
                score:70,
                author:new Person()
                //author:123 æŠ¥é”™
                // object: {


                // }
            }
        }
    })
</script>

</html>
```

###### ç±»å‹æ£€æŸ¥

`type` å¯ä»¥æ˜¯ä¸‹åˆ—åŸç”Ÿæ„é€ å‡½æ•°ä¸­çš„ä¸€ä¸ªï¼š

- `String`
- `Number`
- `Boolean`
- `Array`
- `Object`
- `Date`
- `Function`
- `Symbol`

é¢å¤–çš„ï¼Œ`type` è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”é€šè¿‡ `instanceof` æ¥è¿›è¡Œæ£€æŸ¥ç¡®è®¤ã€‚ä¾‹å¦‚ï¼Œç»™å®šä¸‹åˆ—ç°æˆçš„æ„é€ å‡½æ•°ï¼š

```
function Person (firstName, lastName) {
  this.firstName = firstName
  this.lastName = lastName
}
```

ä½ å¯ä»¥ä½¿ç”¨ï¼š

```
Vue.component('blog-post', {
  props: {
    author: Person
  }
})
```

æ¥éªŒè¯ `author` prop çš„å€¼æ˜¯å¦æ˜¯é€šè¿‡ `new Person` åˆ›å»ºçš„ã€‚



> æ³¨æ„é‚£äº› prop ä¼šåœ¨ä¸€ä¸ªç»„ä»¶å®ä¾‹åˆ›å»º**ä¹‹å‰**è¿›è¡ŒéªŒè¯ï¼Œæ‰€ä»¥å®ä¾‹çš„ property (å¦‚ `data`ã€`computed` ç­‰) åœ¨ `default` æˆ– `validator` å‡½æ•°ä¸­æ˜¯ä¸å¯ç”¨çš„ã€‚

###### [é Prop çš„ Attribute](https://cn.vuejs.org/v2/guide/components-props.html#é-Prop-çš„-Attribute)

ä¸€ä¸ªé prop çš„ attribute æ˜¯æŒ‡ä¼ å‘ä¸€ä¸ªç»„ä»¶ï¼Œä½†æ˜¯è¯¥ç»„ä»¶å¹¶æ²¡æœ‰ç›¸åº” prop å®šä¹‰çš„ attributeã€‚

å› ä¸ºæ˜¾å¼å®šä¹‰çš„ prop é€‚ç”¨äºå‘ä¸€ä¸ªå­ç»„ä»¶ä¼ å…¥ä¿¡æ¯ï¼Œç„¶è€Œç»„ä»¶åº“çš„ä½œè€…å¹¶ä¸æ€»èƒ½é¢„è§ç»„ä»¶ä¼šè¢«ç”¨äºæ€æ ·çš„åœºæ™¯ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç»„ä»¶å¯ä»¥æ¥å—ä»»æ„çš„ attributeï¼Œè€Œè¿™äº› attribute ä¼šè¢«æ·»åŠ åˆ°è¿™ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šã€‚

ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹ä½ é€šè¿‡ä¸€ä¸ª Bootstrap æ’ä»¶ä½¿ç”¨äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ `` ç»„ä»¶ï¼Œè¿™ä¸ªæ’ä»¶éœ€è¦åœ¨å…¶ `` ä¸Šç”¨åˆ°ä¸€ä¸ª `data-date-picker` attributeã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ª attribute æ·»åŠ åˆ°ä½ çš„ç»„ä»¶å®ä¾‹ä¸Šï¼š

```
<bootstrap-date-input data-date-picker="activated"></bootstrap-date-input>
```

ç„¶åè¿™ä¸ª `data-date-picker="activated"` attribute å°±ä¼šè‡ªåŠ¨æ·»åŠ åˆ° `` çš„æ ¹å…ƒç´ ä¸Šã€‚

#### [æ›¿æ¢/åˆå¹¶å·²æœ‰çš„ Attribute](https://cn.vuejs.org/v2/guide/components-props.html#æ›¿æ¢-åˆå¹¶å·²æœ‰çš„-Attribute)

æƒ³è±¡ä¸€ä¸‹çš„æ¨¡æ¿æ˜¯è¿™æ ·çš„ï¼š

```
<input type="date" class="form-control">
```

ä¸ºäº†ç»™æˆ‘ä»¬çš„æ—¥æœŸé€‰æ‹©å™¨æ’ä»¶å®šåˆ¶ä¸€ä¸ªä¸»é¢˜ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åƒè¿™æ ·æ·»åŠ ä¸€ä¸ªç‰¹åˆ«çš„ç±»åï¼š

```
<bootstrap-date-input
  data-date-picker="activated"
  class="date-picker-theme-dark"
></bootstrap-date-input>
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªä¸åŒçš„ `class` çš„å€¼ï¼š

- `form-control`ï¼Œè¿™æ˜¯åœ¨ç»„ä»¶çš„æ¨¡æ¿å†…è®¾ç½®å¥½çš„
- `date-picker-theme-dark`ï¼Œè¿™æ˜¯ä»ç»„ä»¶çš„çˆ¶çº§ä¼ å…¥çš„

å¯¹äºç»å¤§å¤šæ•° attribute æ¥è¯´ï¼Œä»å¤–éƒ¨æä¾›ç»™ç»„ä»¶çš„å€¼ä¼šæ›¿æ¢æ‰ç»„ä»¶å†…éƒ¨è®¾ç½®å¥½çš„å€¼ã€‚æ‰€ä»¥å¦‚æœä¼ å…¥ `type="text"` å°±ä¼šæ›¿æ¢æ‰ `type="date"` å¹¶æŠŠå®ƒç ´åï¼åº†å¹¸çš„æ˜¯ï¼Œ`class` å’Œ `style` attribute ä¼šç¨å¾®æ™ºèƒ½ä¸€äº›ï¼Œå³ä¸¤è¾¹çš„å€¼ä¼šè¢«åˆå¹¶èµ·æ¥ï¼Œä»è€Œå¾—åˆ°æœ€ç»ˆçš„å€¼ï¼š`form-control date-picker-theme-dark`ã€‚

#### [ç¦ç”¨ Attribute ç»§æ‰¿](https://cn.vuejs.org/v2/guide/components-props.html#ç¦ç”¨-Attribute-ç»§æ‰¿)

å¦‚æœä½ **ä¸**å¸Œæœ›ç»„ä»¶çš„æ ¹å…ƒç´ ç»§æ‰¿ attributeï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶çš„é€‰é¡¹ä¸­è®¾ç½® `inheritAttrs: false`ã€‚ä¾‹å¦‚ï¼š

```
Vue.component('my-component', {
  inheritAttrs: false,
  // ...
})
```

è¿™å°¤å…¶é€‚åˆé…åˆå®ä¾‹çš„ `$attrs` property ä½¿ç”¨ï¼Œè¯¥ property åŒ…å«äº†ä¼ é€’ç»™ä¸€ä¸ªç»„ä»¶çš„ attribute åå’Œ attribute å€¼ï¼Œä¾‹å¦‚ï¼š

```
{
  required: true,
  placeholder: 'Enter your username'
}
```

æœ‰äº† `inheritAttrs: false` å’Œ `$attrs`ï¼Œä½ å°±å¯ä»¥æ‰‹åŠ¨å†³å®šè¿™äº› attribute ä¼šè¢«èµ‹äºˆå“ªä¸ªå…ƒç´ ã€‚åœ¨æ’°å†™[åŸºç¡€ç»„ä»¶](https://cn.vuejs.org/v2/style-guide/#åŸºç¡€ç»„ä»¶å-å¼ºçƒˆæ¨è)çš„æ—¶å€™æ˜¯å¸¸ä¼šç”¨åˆ°çš„ï¼š

```
Vue.component('base-input', {
  inheritAttrs: false,
  props: ['label', 'value'],
  template: `
    <label>
      {{ label }}
      <input
        v-bind="$attrs"
        v-bind:value="value"
        v-on:input="$emit('input', $event.target.value)"
      >
    </label>
  `
})
```

æ³¨æ„ `inheritAttrs: false` é€‰é¡¹**ä¸ä¼š**å½±å“ `style` å’Œ `class` çš„ç»‘å®šã€‚

è¿™ä¸ªæ¨¡å¼å…è®¸ä½ åœ¨ä½¿ç”¨åŸºç¡€ç»„ä»¶çš„æ—¶å€™æ›´åƒæ˜¯ä½¿ç”¨åŸå§‹çš„ HTML å…ƒç´ ï¼Œè€Œä¸ä¼šæ‹…å¿ƒå“ªä¸ªå…ƒç´ æ˜¯çœŸæ­£çš„æ ¹å…ƒç´ ï¼š

```
<base-input
  v-model="username"
  required
  placeholder="Enter your username"
></base-input>
```

ä¾‹å­

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <base-input placeholder="hallo" required v-bind="obj" id="123" class="demo1"></base-input>
    </div>
</body>
<!-- 1.å¼•å…¥ vue çš„ä¾èµ–åº“  -->
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>

    Vue.component("base-input", {
        inheritAttrs: false,
        props: {
   

        },
        template: `
            <div class="demo2">
            <input v-bind="$attrs" >
            </input> 
            </div>
        `
    });
    let vm = new Vue({
        el: "#app",
        data: {

        }
    })
</script>

</html>
```



### ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ

æ¯ä¸ª Vue å®ä¾‹åœ¨è¢«åˆ›å»ºæ—¶éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹â€”â€”ä¾‹å¦‚ï¼Œéœ€è¦è®¾ç½®æ•°æ®ç›‘å¬ã€ç¼–è¯‘æ¨¡æ¿ã€å°†å®ä¾‹æŒ‚è½½åˆ° DOM å¹¶åœ¨æ•°æ®å˜åŒ–æ—¶æ›´æ–° DOM ç­‰ã€‚åŒæ—¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¹Ÿä¼šè¿è¡Œä¸€äº›å«åš**ç”Ÿå‘½å‘¨æœŸé’©å­**çš„å‡½æ•°ï¼Œè¿™ç»™äº†ç”¨æˆ·åœ¨ä¸åŒé˜¶æ®µæ·»åŠ è‡ªå·±çš„ä»£ç çš„æœºä¼šã€‚

æ¯”å¦‚ [`created`](https://cn.vuejs.org/v2/api/#created) é’©å­å¯ä»¥ç”¨æ¥åœ¨ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºä¹‹åæ‰§è¡Œä»£ç ï¼š

```
new Vue({
  data: {
    a: 1
  },
  created: function () {
    // `this` æŒ‡å‘ vm å®ä¾‹
    console.log('a is: ' + this.a)
  }
})
// => "a is: 1"
```

ä¹Ÿæœ‰ä¸€äº›å…¶å®ƒçš„é’©å­ï¼Œåœ¨å®ä¾‹ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ï¼Œå¦‚ [`mounted`](https://cn.vuejs.org/v2/api/#mounted)ã€[`updated`](https://cn.vuejs.org/v2/api/#updated) å’Œ [`destroyed`](https://cn.vuejs.org/v2/api/#destroyed)ã€‚ç”Ÿå‘½å‘¨æœŸé’©å­çš„ `this` ä¸Šä¸‹æ–‡æŒ‡å‘è°ƒç”¨å®ƒçš„ Vue å®ä¾‹ã€‚

ä¸è¦åœ¨é€‰é¡¹ property æˆ–å›è°ƒä¸Šä½¿ç”¨[ç®­å¤´å‡½æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions)ï¼Œæ¯”å¦‚ `created: () => console.log(this.a)` æˆ– `vm.$watch('a', newValue => this.myMethod())`ã€‚å› ä¸ºç®­å¤´å‡½æ•°å¹¶æ²¡æœ‰ `this`ï¼Œ`this` ä¼šä½œä¸ºå˜é‡ä¸€ç›´å‘ä¸Šçº§è¯æ³•ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´è‡³æ‰¾åˆ°ä¸ºæ­¢ï¼Œç»å¸¸å¯¼è‡´ `Uncaught TypeError: Cannot read property of undefined` æˆ– `Uncaught TypeError: this.myMethod is not a function` ä¹‹ç±»çš„é”™è¯¯ã€‚

#### [ç”Ÿå‘½å‘¨æœŸå›¾ç¤º](https://cn.vuejs.org/v2/guide/instance.html#ç”Ÿå‘½å‘¨æœŸå›¾ç¤º)

ä¸‹å›¾å±•ç¤ºäº†å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½ ä¸éœ€è¦ç«‹é©¬å¼„æ˜ç™½æ‰€æœ‰çš„ä¸œè¥¿ï¼Œä¸è¿‡éšç€ä½ çš„ä¸æ–­å­¦ä¹ å’Œä½¿ç”¨ï¼Œå®ƒçš„å‚è€ƒä»·å€¼ä¼šè¶Šæ¥è¶Šé«˜ã€‚

![Vue å®ä¾‹ç”Ÿå‘½å‘¨æœŸ](Vue%20%E5%9F%BA%E7%A1%80%E7%AC%AC%E5%9B%9B%E5%A4%A9.assets/lifecycle.png)



### [è‡ªå®šä¹‰äº‹ä»¶](https://cn.vuejs.org/v2/guide/components-custom-events.html)

#### äº‹ä»¶å å§‹ç»ˆä½¿ç”¨ kebab-case çš„äº‹ä»¶å

ä¸åŒäºç»„ä»¶å’Œ propï¼Œäº‹ä»¶åä¸å­˜åœ¨ä»»ä½•è‡ªåŠ¨åŒ–çš„å¤§å°å†™è½¬æ¢ã€‚è€Œæ˜¯è§¦å‘çš„äº‹ä»¶åéœ€è¦å®Œå…¨åŒ¹é…ç›‘å¬è¿™ä¸ªäº‹ä»¶æ‰€ç”¨çš„åç§°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè§¦å‘ä¸€ä¸ª camelCase åå­—çš„äº‹ä»¶ï¼š

```
this.$emit('myEvent')
```

åˆ™ç›‘å¬è¿™ä¸ªåå­—çš„ kebab-case ç‰ˆæœ¬æ˜¯ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœçš„ï¼š

```
<!-- æ²¡æœ‰æ•ˆæœ -->
<my-component v-on:my-event="doSomething"></my-component>
```

ä¸åŒäºç»„ä»¶å’Œ propï¼Œäº‹ä»¶åä¸ä¼šè¢«ç”¨ä½œä¸€ä¸ª JavaScript å˜é‡åæˆ– property åï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç†ç”±ä½¿ç”¨ camelCase æˆ– PascalCase äº†ã€‚å¹¶ä¸” `v-on` äº‹ä»¶ç›‘å¬å™¨åœ¨ DOM æ¨¡æ¿ä¸­ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºå…¨å°å†™ (å› ä¸º HTML æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„)ï¼Œæ‰€ä»¥ `v-on:myEvent` å°†ä¼šå˜æˆ `v-on:myevent`â€”â€”å¯¼è‡´ `myEvent` ä¸å¯èƒ½è¢«ç›‘å¬åˆ°ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬æ¨èä½ **å§‹ç»ˆä½¿ç”¨ kebab-case çš„äº‹ä»¶å**ã€‚

#### [è‡ªå®šä¹‰ç»„ä»¶çš„ `v-model`](https://cn.vuejs.org/v2/guide/components-custom-events.html#è‡ªå®šä¹‰ç»„ä»¶çš„-v-model)

ä¸€ä¸ªç»„ä»¶ä¸Šçš„ `v-model` é»˜è®¤ä¼šåˆ©ç”¨åä¸º `value` çš„ prop å’Œåä¸º `input` çš„äº‹ä»¶ï¼Œä½†æ˜¯åƒå•é€‰æ¡†ã€å¤é€‰æ¡†ç­‰ç±»å‹çš„è¾“å…¥æ§ä»¶å¯èƒ½ä¼šå°† `value` attribute ç”¨äº[ä¸åŒçš„ç›®çš„](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox#Value)ã€‚`model` é€‰é¡¹å¯ä»¥ç”¨æ¥é¿å…è¿™æ ·çš„å†²çªï¼š

```
Vue.component('base-checkbox', {
  model: {
    prop: 'checked',
    event: 'change'
  },
  props: {
    checked: Boolean
  },
  template: `
    <input
      type="checkbox"
      v-bind:checked="checked"
      v-on:change="$emit('change', $event.target.checked)"
    >
  `
})
```

ç°åœ¨åœ¨è¿™ä¸ªç»„ä»¶ä¸Šä½¿ç”¨ `v-model` çš„æ—¶å€™ï¼š

```
<base-checkbox v-model="lovingVue"></base-checkbox>
```

è¿™é‡Œçš„ `lovingVue` çš„å€¼å°†ä¼šä¼ å…¥è¿™ä¸ªåä¸º `checked` çš„ propã€‚åŒæ—¶å½“ `` è§¦å‘ä¸€ä¸ª `change` äº‹ä»¶å¹¶é™„å¸¦ä¸€ä¸ªæ–°çš„å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ª `lovingVue` çš„ property å°†ä¼šè¢«æ›´æ–°ã€‚

> æ³¨æ„ä½ ä»ç„¶éœ€è¦åœ¨ç»„ä»¶çš„ `props` é€‰é¡¹é‡Œå£°æ˜ `checked` è¿™ä¸ª propã€‚

#### [å°†åŸç”Ÿäº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶](https://cn.vuejs.org/v2/guide/components-custom-events.html#å°†åŸç”Ÿäº‹ä»¶ç»‘å®šåˆ°ç»„ä»¶)

ä½ å¯èƒ½æœ‰å¾ˆå¤šæ¬¡æƒ³è¦åœ¨ä¸€ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šç›´æ¥ç›‘å¬ä¸€ä¸ªåŸç”Ÿäº‹ä»¶ã€‚è¿™æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ `v-on` çš„ `.native` ä¿®é¥°ç¬¦ï¼š

```
<base-input v-on:focus.native="onFocus"></base-input>
```

åœ¨æœ‰çš„æ—¶å€™è¿™æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œä¸è¿‡åœ¨ä½ å°è¯•ç›‘å¬ä¸€ä¸ªç±»ä¼¼ `` çš„éå¸¸ç‰¹å®šçš„å…ƒç´ æ—¶ï¼Œè¿™å¹¶ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚æ¯”å¦‚ä¸Šè¿° `` ç»„ä»¶å¯èƒ½åšäº†å¦‚ä¸‹é‡æ„ï¼Œæ‰€ä»¥æ ¹å…ƒç´ å®é™…ä¸Šæ˜¯ä¸€ä¸ªå…ƒç´ ï¼š

```
<label>
  {{ label }}
  <input
    v-bind="$attrs"
    v-bind:value="value"
    v-on:input="$emit('input', $event.target.value)"
  >
</label>
```

è¿™æ—¶ï¼Œçˆ¶çº§çš„ `.native` ç›‘å¬å™¨å°†é™é»˜å¤±è´¥ã€‚å®ƒä¸ä¼šäº§ç”Ÿä»»ä½•æŠ¥é”™ï¼Œä½†æ˜¯ `onFocus` å¤„ç†å‡½æ•°ä¸ä¼šå¦‚ä½ é¢„æœŸåœ°è¢«è°ƒç”¨ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVue æä¾›äº†ä¸€ä¸ª `$listeners` propertyï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†ä½œç”¨åœ¨è¿™ä¸ªç»„ä»¶ä¸Šçš„æ‰€æœ‰ç›‘å¬å™¨ã€‚ä¾‹å¦‚ï¼š

```
{
  focus: function (event) { /* ... */ }
  input: function (value) { /* ... */ },
}
```

æœ‰äº†è¿™ä¸ª `$listeners` propertyï¼Œä½ å°±å¯ä»¥é…åˆ `v-on="$listeners"` å°†æ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨æŒ‡å‘è¿™ä¸ªç»„ä»¶çš„æŸä¸ªç‰¹å®šçš„å­å…ƒç´ ã€‚å¯¹äºç±»ä¼¼  çš„ä½ å¸Œæœ›å®ƒä¹Ÿå¯ä»¥é…åˆ `v-model` å·¥ä½œçš„ç»„ä»¶æ¥è¯´ï¼Œä¸ºè¿™äº›ç›‘å¬å™¨åˆ›å»ºä¸€ä¸ªç±»ä¼¼ä¸‹è¿° `inputListeners` çš„è®¡ç®—å±æ€§é€šå¸¸æ˜¯éå¸¸æœ‰ç”¨çš„ï¼š

```
Vue.component('base-input', {
  inheritAttrs: false,
  props: ['label', 'value'],
  computed: {
    inputListeners: function () {
      var vm = this
      // `Object.assign` å°†æ‰€æœ‰çš„å¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªæ–°å¯¹è±¡
      return Object.assign({},
        // æˆ‘ä»¬ä»çˆ¶çº§æ·»åŠ æ‰€æœ‰çš„ç›‘å¬å™¨
        this.$listeners,
        // ç„¶åæˆ‘ä»¬æ·»åŠ è‡ªå®šä¹‰ç›‘å¬å™¨ï¼Œ
        // æˆ–è¦†å†™ä¸€äº›ç›‘å¬å™¨çš„è¡Œä¸º
        {
          // è¿™é‡Œç¡®ä¿ç»„ä»¶é…åˆ `v-model` çš„å·¥ä½œ
          input: function (event) {
            vm.$emit('input', event.target.value)
          }
        }
      )
    }
  },
  template: `
    <label>
      {{ label }}
      <input
        v-bind="$attrs"
        v-bind:value="value"
        v-on="inputListeners"
      >
    </label>
  `
})
```

ç°åœ¨ `` ç»„ä»¶æ˜¯ä¸€ä¸ªå®Œå…¨é€æ˜çš„åŒ…è£¹å™¨äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥å®Œå…¨åƒä¸€ä¸ªæ™®é€šçš„ `` å…ƒç´ ä¸€æ ·ä½¿ç”¨äº†ï¼šæ‰€æœ‰è·Ÿå®ƒç›¸åŒçš„ attribute å’Œç›‘å¬å™¨éƒ½å¯ä»¥å·¥ä½œã€‚

#### [`.sync` ä¿®é¥°ç¬¦](https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-ä¿®é¥°ç¬¦)

åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹ä¸€ä¸ª prop è¿›è¡Œâ€œåŒå‘ç»‘å®šâ€ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒçœŸæ­£çš„åŒå‘ç»‘å®šä¼šå¸¦æ¥ç»´æŠ¤ä¸Šçš„é—®é¢˜ï¼Œå› ä¸ºå­ç»„ä»¶å¯ä»¥å˜æ›´çˆ¶ç»„ä»¶ï¼Œä¸”åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶éƒ½æ²¡æœ‰æ˜æ˜¾çš„å˜æ›´æ¥æºã€‚

è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æ¨èä»¥ `update:myPropName` çš„æ¨¡å¼è§¦å‘äº‹ä»¶å–è€Œä»£ä¹‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€ä¸ªåŒ…å« `title` prop çš„å‡è®¾çš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•è¡¨è¾¾å¯¹å…¶èµ‹æ–°å€¼çš„æ„å›¾ï¼š

```
this.$emit('update:title', newTitle)
```

ç„¶åçˆ¶ç»„ä»¶å¯ä»¥ç›‘å¬é‚£ä¸ªäº‹ä»¶å¹¶æ ¹æ®éœ€è¦æ›´æ–°ä¸€ä¸ªæœ¬åœ°çš„æ•°æ® propertyã€‚ä¾‹å¦‚ï¼š

```
<text-document
  v-bind:title="doc.title"
  v-on:update:title="doc.title = $event"
></text-document>
```

ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬ä¸ºè¿™ç§æ¨¡å¼æä¾›ä¸€ä¸ªç¼©å†™ï¼Œå³ `.sync` ä¿®é¥°ç¬¦ï¼š

```
<text-document v-bind:title.sync="doc.title"></text-document>
```

æ³¨æ„å¸¦æœ‰ `.sync` ä¿®é¥°ç¬¦çš„ `v-bind` **ä¸èƒ½**å’Œè¡¨è¾¾å¼ä¸€èµ·ä½¿ç”¨ (ä¾‹å¦‚ `v-bind:title.sync=â€doc.title + â€˜!â€™â€` æ˜¯æ— æ•ˆçš„)ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä½ åªèƒ½æä¾›ä½ æƒ³è¦ç»‘å®šçš„ property åï¼Œç±»ä¼¼ `v-model`ã€‚

å½“æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯¹è±¡åŒæ—¶è®¾ç½®å¤šä¸ª prop çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å°†è¿™ä¸ª `.sync` ä¿®é¥°ç¬¦å’Œ `v-bind` é…åˆä½¿ç”¨ï¼š

```
<text-document v-bind.sync="doc"></text-document>
```

è¿™æ ·ä¼šæŠŠ `doc` å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ª property (å¦‚ `title`) éƒ½ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ prop ä¼ è¿›å»ï¼Œç„¶åå„è‡ªæ·»åŠ ç”¨äºæ›´æ–°çš„ `v-on` ç›‘å¬å™¨ã€‚

å°† `v-bind.sync` ç”¨åœ¨ä¸€ä¸ªå­—é¢é‡çš„å¯¹è±¡ä¸Šï¼Œä¾‹å¦‚ `v-bind.sync=â€{ title: doc.title }â€`ï¼Œæ˜¯æ— æ³•æ­£å¸¸å·¥ä½œçš„ï¼Œå› ä¸ºåœ¨è§£æä¸€ä¸ªåƒè¿™æ ·çš„å¤æ‚è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œæœ‰å¾ˆå¤šè¾¹ç¼˜æƒ…å†µéœ€è¦è€ƒè™‘ã€‚



```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <!-- <test>{{user.name}}</test> -->
        <!-- <test v-bind:text="textValue"
            v-on:update:text="textValue=$event">
        </test> -->
        <test v-bind:text.sync="textValue">
        </test>
        {{textValue}}
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    Vue.component("test", {
        props:["text"],
        template: `
            <button @click="changeValue">ä¿®æ”¹textå€¼   {{textValue}}</button>
         
        `,
        data: function () {
            return {
                textValue:this.text
            }
        },
        methods: {
            changeValue:function(){
                console.log("change Value",this.text);
                this.textValue = "ğŸ‘";
                this.$emit("update:text",this.textValue);
            }
        },
    })
    let vm = new Vue({
        el: "#app",
        data: {
            textValue:"ğŸ’¯"
        },
        methods: {
            // changevalue:function(e){
            //     console.log(e);
            // }
        },
    })
</script>

</html>
```





### [æ’æ§½](https://cn.vuejs.org/v2/guide/components-slots.html)

#### [æ’æ§½å†…å®¹](https://cn.vuejs.org/v2/guide/components-slots.html#æ’æ§½å†…å®¹)

Vue å®ç°äº†ä¸€å¥—å†…å®¹åˆ†å‘çš„ APIï¼Œè¿™å¥— API çš„è®¾è®¡çµæ„Ÿæºè‡ª [Web Components è§„èŒƒè‰æ¡ˆ](https://github.com/w3c/webcomponents/blob/gh-pages/proposals/Slots-Proposal.md)ï¼Œå°† `` å…ƒç´ ä½œä¸ºæ‰¿è½½åˆ†å‘å†…å®¹çš„å‡ºå£ã€‚

å®ƒå…è®¸ä½ åƒè¿™æ ·åˆæˆç»„ä»¶ï¼š

```
<navigation-link url="/profile">
  Your Profile
</navigation-link>
```

ç„¶åä½ åœ¨ `` çš„æ¨¡æ¿ä¸­å¯èƒ½ä¼šå†™ä¸ºï¼š

```
<a
  v-bind:href="url"
  class="nav-link"
>
  <slot></slot>
</a>
```

å½“ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œ`` å°†ä¼šè¢«æ›¿æ¢ä¸ºâ€œYour Profileâ€ã€‚æ’æ§½å†…å¯ä»¥åŒ…å«ä»»ä½•æ¨¡æ¿ä»£ç ï¼ŒåŒ…æ‹¬ HTMLï¼š

```
<navigation-link url="/profile">
  <!-- æ·»åŠ ä¸€ä¸ª Font Awesome å›¾æ ‡ -->
  <span class="fa fa-user"></span>
  Your Profile
</navigation-link>
```

ç”šè‡³å…¶å®ƒçš„ç»„ä»¶ï¼š

```
<navigation-link url="/profile">
  <!-- æ·»åŠ ä¸€ä¸ªå›¾æ ‡çš„ç»„ä»¶ -->
  <font-awesome-icon name="user"></font-awesome-icon>
  Your Profile
</navigation-link>
```

å¦‚æœ `` **æ²¡æœ‰**åŒ…å«ä¸€ä¸ª `` å…ƒç´ ï¼Œåˆ™è¯¥ç»„ä»¶èµ·å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¹‹é—´çš„ä»»ä½•å†…å®¹éƒ½ä¼šè¢«æŠ›å¼ƒã€‚

#### [ç¼–è¯‘ä½œç”¨åŸŸ](https://cn.vuejs.org/v2/guide/components-slots.html#ç¼–è¯‘ä½œç”¨åŸŸ)

å½“ä½ æƒ³åœ¨ä¸€ä¸ªæ’æ§½ä¸­ä½¿ç”¨æ•°æ®æ—¶ï¼Œä¾‹å¦‚ï¼š

```
<navigation-link url="/profile">
  Logged in as {{ user.name }}
</navigation-link>
```

è¯¥æ’æ§½è·Ÿæ¨¡æ¿çš„å…¶å®ƒåœ°æ–¹ä¸€æ ·å¯ä»¥è®¿é—®ç›¸åŒçš„å®ä¾‹ property (ä¹Ÿå°±æ˜¯ç›¸åŒçš„â€œä½œç”¨åŸŸâ€)ï¼Œè€Œ**ä¸èƒ½**è®¿é—® `` çš„ä½œç”¨åŸŸã€‚ä¾‹å¦‚ `url` æ˜¯è®¿é—®ä¸åˆ°çš„ï¼š

```
<navigation-link url="/profile">
  Clicking here will send you to: {{ url }}
  <!--
  è¿™é‡Œçš„ `url` ä¼šæ˜¯ undefinedï¼Œå› ä¸ºå…¶ (æŒ‡è¯¥æ’æ§½çš„) å†…å®¹æ˜¯
  _ä¼ é€’ç»™_ <navigation-link> çš„è€Œä¸æ˜¯
  åœ¨ <navigation-link> ç»„ä»¶*å†…éƒ¨*å®šä¹‰çš„ã€‚
  -->
</navigation-link>
```

ä½œä¸ºä¸€æ¡è§„åˆ™ï¼Œè¯·è®°ä½ï¼š

> çˆ¶çº§æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨çˆ¶çº§ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„ï¼›å­æ¨¡æ¿é‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åœ¨å­ä½œç”¨åŸŸä¸­ç¼–è¯‘çš„ã€‚

#### [åå¤‡å†…å®¹](https://cn.vuejs.org/v2/guide/components-slots.html#åå¤‡å†…å®¹)

æœ‰æ—¶ä¸ºä¸€ä¸ªæ’æ§½è®¾ç½®å…·ä½“çš„åå¤‡ (ä¹Ÿå°±æ˜¯é»˜è®¤çš„) å†…å®¹æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œå®ƒåªä¼šåœ¨æ²¡æœ‰æä¾›å†…å®¹çš„æ—¶å€™è¢«æ¸²æŸ“ã€‚ä¾‹å¦‚åœ¨ä¸€ä¸ª `` ç»„ä»¶ä¸­ï¼š

```
<button type="submit">
  <slot></slot>
</button>
```

æˆ‘ä»¬å¯èƒ½å¸Œæœ›è¿™ä¸ª `` å†…ç»å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ¸²æŸ“æ–‡æœ¬â€œSubmitâ€ã€‚ä¸ºäº†å°†â€œSubmitâ€ä½œä¸ºåå¤‡å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒæ”¾åœ¨ `` æ ‡ç­¾å†…ï¼š

```
<button type="submit">
  <slot>Submit</slot>
</button>
```

ç°åœ¨å½“æˆ‘åœ¨ä¸€ä¸ªçˆ¶çº§ç»„ä»¶ä¸­ä½¿ç”¨ `` å¹¶ä¸”ä¸æä¾›ä»»ä½•æ’æ§½å†…å®¹æ—¶ï¼š

```
<submit-button></submit-button>
```

åå¤‡å†…å®¹â€œSubmitâ€å°†ä¼šè¢«æ¸²æŸ“ï¼š

```
<button type="submit">
  Submit
</button>
```

ä½†æ˜¯å¦‚æœæˆ‘ä»¬æä¾›å†…å®¹ï¼š

```
<submit-button>
  Save
</submit-button>
```

åˆ™è¿™ä¸ªæä¾›çš„å†…å®¹å°†ä¼šè¢«æ¸²æŸ“ä»è€Œå–ä»£åå¤‡å†…å®¹ï¼š

```
<button type="submit">
  Save
</button>
```

#### [å…·åæ’æ§½](https://cn.vuejs.org/v2/guide/components-slots.html#å…·åæ’æ§½)

> è‡ª 2.6.0 èµ·æœ‰æ‰€æ›´æ–°ã€‚å·²åºŸå¼ƒçš„ä½¿ç”¨ `slot` attribute çš„è¯­æ³•åœ¨[è¿™é‡Œ](https://cn.vuejs.org/v2/guide/components-slots.html#åºŸå¼ƒäº†çš„è¯­æ³•)ã€‚

æœ‰æ—¶æˆ‘ä»¬éœ€è¦å¤šä¸ªæ’æ§½ã€‚ä¾‹å¦‚å¯¹äºä¸€ä¸ªå¸¦æœ‰å¦‚ä¸‹æ¨¡æ¿çš„ `` ç»„ä»¶ï¼š

```
<div class="container">
  <header>
    <!-- æˆ‘ä»¬å¸Œæœ›æŠŠé¡µå¤´æ”¾è¿™é‡Œ -->
  </header>
  <main>
    <!-- æˆ‘ä»¬å¸Œæœ›æŠŠä¸»è¦å†…å®¹æ”¾è¿™é‡Œ -->
  </main>
  <footer>
    <!-- æˆ‘ä»¬å¸Œæœ›æŠŠé¡µè„šæ”¾è¿™é‡Œ -->
  </footer>
</div>
```

å¯¹äºè¿™æ ·çš„æƒ…å†µï¼Œ`` å…ƒç´ æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ attributeï¼š`name`ã€‚è¿™ä¸ª attribute å¯ä»¥ç”¨æ¥å®šä¹‰é¢å¤–çš„æ’æ§½ï¼š

```
<div class="container">
  <header>
    <slot name="header"></slot>
  </header>
  <main>
    <slot></slot>
  </main>
  <footer>
    <slot name="footer"></slot>
  </footer>
</div>
```

ä¸€ä¸ªä¸å¸¦ `name` çš„ `` å‡ºå£ä¼šå¸¦æœ‰éšå«çš„åå­—â€œdefaultâ€ã€‚

åœ¨å‘å…·åæ’æ§½æä¾›å†…å®¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ª ` å…ƒç´ ä¸Šä½¿ç”¨ `v-slot` æŒ‡ä»¤ï¼Œå¹¶ä»¥ `v-slot` çš„å‚æ•°çš„å½¢å¼æä¾›å…¶åç§°ï¼š

```
<base-layout>
  <template v-slot:header>
    <h1>Here might be a page title</h1>
  </template>

  <p>A paragraph for the main content.</p>
  <p>And another one.</p>

  <template v-slot:footer>
    <p>Here's some contact info</p>
  </template>
</base-layout>
```

ç°åœ¨ ` å…ƒç´ ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å°†ä¼šè¢«ä¼ å…¥ç›¸åº”çš„æ’æ§½ã€‚ä»»ä½•æ²¡æœ‰è¢«åŒ…è£¹åœ¨å¸¦æœ‰ `v-slot` çš„ ` ä¸­çš„å†…å®¹éƒ½ä¼šè¢«è§†ä¸ºé»˜è®¤æ’æ§½çš„å†…å®¹ã€‚

ç„¶è€Œï¼Œå¦‚æœä½ å¸Œæœ›æ›´æ˜ç¡®ä¸€äº›ï¼Œä»ç„¶å¯ä»¥åœ¨ä¸€ä¸ª ` ä¸­åŒ…è£¹é»˜è®¤æ’æ§½çš„å†…å®¹ï¼š

```
<base-layout>
  <template v-slot:header>
    <h1>Here might be a page title</h1>
  </template>

  <template v-slot:default>
    <p>A paragraph for the main content.</p>
    <p>And another one.</p>
  </template>

  <template v-slot:footer>
    <p>Here's some contact info</p>
  </template>
</base-layout>
```

ä»»ä½•ä¸€ç§å†™æ³•éƒ½ä¼šæ¸²æŸ“å‡ºï¼š

```
<div class="container">
  <header>
    <h1>Here might be a page title</h1>
  </header>
  <main>
    <p>A paragraph for the main content.</p>
    <p>And another one.</p>
  </main>
  <footer>
    <p>Here's some contact info</p>
  </footer>
</div>
```

æ³¨æ„ **`v-slot` åªèƒ½æ·»åŠ åœ¨ ` ä¸Š** (åªæœ‰[ä¸€ç§ä¾‹å¤–æƒ…å†µ](https://cn.vuejs.org/v2/guide/components-slots.html#ç‹¬å é»˜è®¤æ’æ§½çš„ç¼©å†™è¯­æ³•))ï¼Œè¿™ä¸€ç‚¹å’Œå·²ç»åºŸå¼ƒçš„ [`slot` attribute](https://cn.vuejs.org/v2/guide/components-slots.html#åºŸå¼ƒäº†çš„è¯­æ³•) ä¸åŒã€‚

#### [ä½œç”¨åŸŸæ’æ§½](https://cn.vuejs.org/v2/guide/components-slots.html#ä½œç”¨åŸŸæ’æ§½)

> è‡ª 2.6.0 èµ·æœ‰æ‰€æ›´æ–°ã€‚å·²åºŸå¼ƒçš„ä½¿ç”¨ `slot-scope` attribute çš„è¯­æ³•åœ¨[è¿™é‡Œ](https://cn.vuejs.org/v2/guide/components-slots.html#åºŸå¼ƒäº†çš„è¯­æ³•)ã€‚

æœ‰æ—¶è®©æ’æ§½å†…å®¹èƒ½å¤Ÿè®¿é—®å­ç»„ä»¶ä¸­æ‰æœ‰çš„æ•°æ®æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œè®¾æƒ³ä¸€ä¸ªå¸¦æœ‰å¦‚ä¸‹æ¨¡æ¿çš„ `` ç»„ä»¶ï¼š

```
<span>
  <slot>{{ user.lastName }}</slot>
</span>
```

æˆ‘ä»¬å¯èƒ½æƒ³æ¢æ‰å¤‡ç”¨å†…å®¹ï¼Œç”¨åè€Œéå§“æ¥æ˜¾ç¤ºã€‚å¦‚ä¸‹ï¼š

```
<current-user>
  {{ user.firstName }}
</current-user>
```

ç„¶è€Œä¸Šè¿°ä»£ç ä¸ä¼šæ­£å¸¸å·¥ä½œï¼Œå› ä¸ºåªæœ‰ `` ç»„ä»¶å¯ä»¥è®¿é—®åˆ° `user` è€Œæˆ‘ä»¬æä¾›çš„å†…å®¹æ˜¯åœ¨çˆ¶çº§æ¸²æŸ“çš„ã€‚

ä¸ºäº†è®© `user` åœ¨çˆ¶çº§çš„æ’æ§½å†…å®¹ä¸­å¯ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°† `user` ä½œä¸º `` å…ƒç´ çš„ä¸€ä¸ª attribute ç»‘å®šä¸Šå»ï¼š

```
<span>
  <slot v-bind:user="user">
    {{ user.lastName }}
  </slot>
</span>
```

ç»‘å®šåœ¨ `` å…ƒç´ ä¸Šçš„ attribute è¢«ç§°ä¸º**æ’æ§½ prop**ã€‚ç°åœ¨åœ¨çˆ¶çº§ä½œç”¨åŸŸä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦å€¼çš„ `v-slot` æ¥å®šä¹‰æˆ‘ä»¬æä¾›çš„æ’æ§½ prop çš„åå­—ï¼š

```
<current-user>
  <template v-slot:default="slotProps">
    {{ slotProps.user.firstName }}
  </template>
</current-user>
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©å°†åŒ…å«æ‰€æœ‰æ’æ§½ prop çš„å¯¹è±¡å‘½åä¸º `slotProps`ï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„ä½ å–œæ¬¢çš„åå­—ã€‚

##### ç‹¬[å é»˜è®¤æ’æ§½çš„ç¼©å†™è¯­æ³•](https://cn.vuejs.org/v2/guide/components-slots.html#ç‹¬å é»˜è®¤æ’æ§½çš„ç¼©å†™è¯­æ³•)

åœ¨ä¸Šè¿°æƒ…å†µä¸‹ï¼Œå½“è¢«æä¾›çš„å†…å®¹*åªæœ‰*é»˜è®¤æ’æ§½æ—¶ï¼Œç»„ä»¶çš„æ ‡ç­¾æ‰å¯ä»¥è¢«å½“ä½œæ’æ§½çš„æ¨¡æ¿æ¥ä½¿ç”¨ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ `v-slot` ç›´æ¥ç”¨åœ¨ç»„ä»¶ä¸Šï¼š

```
<current-user v-slot:default="slotProps">
  {{ slotProps.user.firstName }}
</current-user>
```

è¿™ç§å†™æ³•è¿˜å¯ä»¥æ›´ç®€å•ã€‚å°±åƒå‡å®šæœªæŒ‡æ˜çš„å†…å®¹å¯¹åº”é»˜è®¤æ’æ§½ä¸€æ ·ï¼Œä¸å¸¦å‚æ•°çš„ `v-slot` è¢«å‡å®šå¯¹åº”é»˜è®¤æ’æ§½ï¼š

```
<current-user v-slot="slotProps">
  {{ slotProps.user.firstName }}
</current-user>
```

æ³¨æ„é»˜è®¤æ’æ§½çš„ç¼©å†™è¯­æ³•**ä¸èƒ½**å’Œå…·åæ’æ§½æ··ç”¨ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´ä½œç”¨åŸŸä¸æ˜ç¡®ï¼š

```
<!-- æ— æ•ˆï¼Œä¼šå¯¼è‡´è­¦å‘Š -->
<current-user v-slot="slotProps">
  {{ slotProps.user.firstName }}
  <template v-slot:other="otherSlotProps">
    slotProps is NOT available here
  </template>
</current-user>
```

åªè¦å‡ºç°å¤šä¸ªæ’æ§½ï¼Œè¯·å§‹ç»ˆä¸º*æ‰€æœ‰çš„*æ’æ§½ä½¿ç”¨å®Œæ•´çš„åŸºäº ` çš„è¯­æ³•ï¼š

<current-user>

  <template v-slot:default="slotProps">
    {{ slotProps.user.firstName }}
  </template>

  <template v-slot:other="otherSlotProps">
    ...
  </template>
</current-user>

##### è§£æ„æ’æ§½ Prop

ä½œç”¨åŸŸæ’æ§½çš„å†…éƒ¨å·¥ä½œåŸç†æ˜¯å°†ä½ çš„æ’æ§½å†…å®¹åŒ…æ‹¬åœ¨ä¸€ä¸ªä¼ å…¥å•ä¸ªå‚æ•°çš„å‡½æ•°é‡Œï¼š
function (slotProps) {
  // æ’æ§½å†…å®¹
}
è¿™æ„å‘³ç€ v-slot çš„å€¼å®é™…ä¸Šå¯ä»¥æ˜¯ä»»ä½•èƒ½å¤Ÿä½œä¸ºå‡½æ•°å®šä¹‰ä¸­çš„å‚æ•°çš„ JavaScript è¡¨è¾¾å¼ã€‚æ‰€ä»¥åœ¨æ”¯æŒçš„ç¯å¢ƒä¸‹ (å•æ–‡ä»¶ç»„ä»¶æˆ–ç°ä»£æµè§ˆå™¨)ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ ES2015 è§£æ„æ¥ä¼ å…¥å…·ä½“çš„æ’æ§½ propï¼Œå¦‚ä¸‹ï¼š

<current-user v-slot="{ user }">
  {{ user.firstName }}
</current-user>
è¿™æ ·å¯ä»¥ä½¿æ¨¡æ¿æ›´ç®€æ´ï¼Œå°¤å…¶æ˜¯åœ¨è¯¥æ’æ§½æä¾›äº†å¤šä¸ª prop çš„æ—¶å€™ã€‚å®ƒåŒæ ·å¼€å¯äº† prop é‡å‘½åç­‰å…¶å®ƒå¯èƒ½ï¼Œä¾‹å¦‚å°† user é‡å‘½åä¸º personï¼š

<current-user v-slot="{ user: person }">
  {{ person.firstName }}
</current-user>
ä½ ç”šè‡³å¯ä»¥å®šä¹‰åå¤‡å†…å®¹ï¼Œç”¨äºæ’æ§½ prop æ˜¯ undefined çš„æƒ…å½¢ï¼š

<current-user v-slot="{ user = { firstName: 'Guest' } }">
  {{ user.firstName }}
</current-user>



#### [åŠ¨æ€æ’æ§½å](https://cn.vuejs.org/v2/guide/components-slots.html#åŠ¨æ€æ’æ§½å)

> 2.6.0 æ–°å¢

[åŠ¨æ€æŒ‡ä»¤å‚æ•°](https://cn.vuejs.org/v2/guide/syntax.html#åŠ¨æ€å‚æ•°)ä¹Ÿå¯ä»¥ç”¨åœ¨ `v-slot` ä¸Šï¼Œæ¥å®šä¹‰åŠ¨æ€çš„æ’æ§½åï¼š

```
<base-layout>
  <template v-slot:[dynamicSlotName]>
    ...
  </template>
</base-layout>


```

```html

```



#### [å…·åæ’æ§½çš„ç¼©å†™](https://cn.vuejs.org/v2/guide/components-slots.html#å…·åæ’æ§½çš„ç¼©å†™)

> 2.6.0 æ–°å¢

è·Ÿ `v-on` å’Œ `v-bind` ä¸€æ ·ï¼Œ`v-slot` ä¹Ÿæœ‰ç¼©å†™ï¼Œå³æŠŠå‚æ•°ä¹‹å‰çš„æ‰€æœ‰å†…å®¹ (`v-slot:`) æ›¿æ¢ä¸ºå­—ç¬¦ `#`ã€‚ä¾‹å¦‚ `v-slot:header` å¯ä»¥è¢«é‡å†™ä¸º `#header`ï¼š

```
<base-layout>
  <template #header>
    <h1>Here might be a page title</h1>
  </template>

  <p>A paragraph for the main content.</p>
  <p>And another one.</p>

  <template #footer>
    <p>Here's some contact info</p>
  </template>
</base-layout>
```

ç„¶è€Œï¼Œå’Œå…¶å®ƒæŒ‡ä»¤ä¸€æ ·ï¼Œè¯¥ç¼©å†™åªåœ¨å…¶æœ‰å‚æ•°çš„æ—¶å€™æ‰å¯ç”¨ã€‚è¿™æ„å‘³ç€ä»¥ä¸‹è¯­æ³•æ˜¯æ— æ•ˆçš„ï¼š

```
<!-- è¿™æ ·ä¼šè§¦å‘ä¸€ä¸ªè­¦å‘Š -->
<current-user #="{ user }">
  {{ user.firstName }}
</current-user>
```

å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ç¼©å†™çš„è¯ï¼Œä½ å¿…é¡»å§‹ç»ˆä»¥æ˜ç¡®æ’æ§½åå–è€Œä»£ä¹‹ï¼š

```
<current-user #default="{ user }">
  {{ user.firstName }}
</current-user>
```



```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <!-- <test>{{user.name}}</test> -->
        <test>
            <section>æ²¡æœ‰åç§°éƒ¨åˆ†</section>
            <!-- åŠ¨æ€å‚æ•°ç»‘å®š -->
            <template v-slot:[header]="{user}">
                {{user.firstName}}
            </template>
            <!-- å‚æ•°è§£æ„ -->
            <template v-slot:header="{user}">
                {{user.firstName}}
            </template>
            <!-- v-slot ç¼©å†™ -->
            <template #footer="slotProps">
               {{slotProps.user.lastName}}
            </template>
        </test>
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    Vue.component("test", {
        template: `
        <span>
             <slot></slot>
             <slot name="header" v-bind:user="user"></slot>
             <slot name="footer" v-bind:user="user"></slot>
        </span>
        `,
        data: function () {
            return {
                user: {
                    firstName:"fistname",
                    lastName: "TT",
                }
            }
        }
    })
    let vm = new Vue({
        el: "#app",
        data: {
            header:"header"
        }
    })
</script>

</html>
```





### [åŠ¨æ€ç»„ä»¶ & å¼‚æ­¥ç»„ä»¶](https://cn.vuejs.org/v2/guide/components-dynamic-async.html)

#### [component](https://cn.vuejs.org/v2/api/#component)

- **Props**ï¼š

  - `is` - string | ComponentDefinition | ComponentConstructor
  - `inline-template` - boolean

- **ç”¨æ³•**ï¼š

  æ¸²æŸ“ä¸€ä¸ªâ€œå…ƒç»„ä»¶â€ä¸ºåŠ¨æ€ç»„ä»¶ã€‚ä¾ `is` çš„å€¼ï¼Œæ¥å†³å®šå“ªä¸ªç»„ä»¶è¢«æ¸²æŸ“ã€‚

  ```
  <!-- åŠ¨æ€ç»„ä»¶ç”± vm å®ä¾‹çš„ `componentId` property æ§åˆ¶ -->
  <component :is="componentId"></component>
  
  <!-- ä¹Ÿèƒ½å¤Ÿæ¸²æŸ“æ³¨å†Œè¿‡çš„ç»„ä»¶æˆ– prop ä¼ å…¥çš„ç»„ä»¶ -->
  <component :is="$options.components.child"></component>
  ```

#### [keep-alive](https://cn.vuejs.org/v2/api/#keep-alive)

- **Props**ï¼š

  - `include` - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚åªæœ‰åç§°åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ã€‚
  - `exclude` - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚ä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ã€‚
  - `max` - æ•°å­—ã€‚æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚

- **ç”¨æ³•**ï¼š

  `` åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬ã€‚å’Œ `` ç›¸ä¼¼ï¼Œ`` æ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼šå®ƒè‡ªèº«ä¸ä¼šæ¸²æŸ“ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨ç»„ä»¶çš„çˆ¶ç»„ä»¶é“¾ä¸­ã€‚

  å½“ç»„ä»¶åœ¨ `` å†…è¢«åˆ‡æ¢ï¼Œå®ƒçš„ `activated` å’Œ `deactivated` è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å°†ä¼šè¢«å¯¹åº”æ‰§è¡Œã€‚

  > åœ¨ 2.2.0 åŠå…¶æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œ`activated` å’Œ `deactivated` å°†ä¼šåœ¨ `` æ ‘å†…çš„æ‰€æœ‰åµŒå¥—ç»„ä»¶ä¸­è§¦å‘ã€‚

  ä¸»è¦ç”¨äºä¿ç•™ç»„ä»¶çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚

  ```
  <!-- åŸºæœ¬ -->
  <keep-alive>
    <component :is="view"></component>
  </keep-alive>
  
  <!-- å¤šä¸ªæ¡ä»¶åˆ¤æ–­çš„å­ç»„ä»¶ -->
  <keep-alive>
    <comp-a v-if="a > 1"></comp-a>
    <comp-b v-else></comp-b>
  </keep-alive>
  
  <!-- å’Œ `<transition>` ä¸€èµ·ä½¿ç”¨ -->
  <transition>
    <keep-alive>
      <component :is="view"></component>
    </keep-alive>
  </transition>
  ```

  æ³¨æ„ï¼Œ`` æ˜¯ç”¨åœ¨å…¶ä¸€ä¸ªç›´å±çš„å­ç»„ä»¶è¢«å¼€å…³çš„æƒ…å½¢ã€‚å¦‚æœä½ åœ¨å…¶ä¸­æœ‰ `v-for` åˆ™ä¸ä¼šå·¥ä½œã€‚å¦‚æœæœ‰ä¸Šè¿°çš„å¤šä¸ªæ¡ä»¶æ€§çš„å­å…ƒç´ ï¼Œ`` è¦æ±‚åŒæ—¶åªæœ‰ä¸€ä¸ªå­å…ƒç´ è¢«æ¸²æŸ“ã€‚

- **`include` and `exclude`**

  > 2.1.0 æ–°å¢

  `include` å’Œ `exclude` prop å…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°ç¼“å­˜ã€‚äºŒè€…éƒ½å¯ä»¥ç”¨é€—å·åˆ†éš”å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼æˆ–ä¸€ä¸ªæ•°ç»„æ¥è¡¨ç¤ºï¼š

  ```
  <!-- é€—å·åˆ†éš”å­—ç¬¦ä¸² -->
  <keep-alive include="a,b">
    <component :is="view"></component>
  </keep-alive>
  
  <!-- æ­£åˆ™è¡¨è¾¾å¼ (ä½¿ç”¨ `v-bind`) -->
  <keep-alive :include="/a|b/">
    <component :is="view"></component>
  </keep-alive>
  
  <!-- æ•°ç»„ (ä½¿ç”¨ `v-bind`) -->
  <keep-alive :include="['a', 'b']">
    <component :is="view"></component>
  </keep-alive>
  ```

  åŒ¹é…é¦–å…ˆæ£€æŸ¥ç»„ä»¶è‡ªèº«çš„ `name` é€‰é¡¹ï¼Œå¦‚æœ `name` é€‰é¡¹ä¸å¯ç”¨ï¼Œåˆ™åŒ¹é…å®ƒçš„å±€éƒ¨æ³¨å†Œåç§° (çˆ¶ç»„ä»¶ `components` é€‰é¡¹çš„é”®å€¼)ã€‚åŒ¿åç»„ä»¶ä¸èƒ½è¢«åŒ¹é…ã€‚

- **`max`**

  > 2.5.0 æ–°å¢

  æœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚ä¸€æ—¦è¿™ä¸ªæ•°å­—è¾¾åˆ°äº†ï¼Œåœ¨æ–°å®ä¾‹è¢«åˆ›å»ºä¹‹å‰ï¼Œå·²ç¼“å­˜ç»„ä»¶ä¸­æœ€ä¹…æ²¡æœ‰è¢«è®¿é—®çš„å®ä¾‹ä¼šè¢«é”€æ¯æ‰ã€‚

  ```
  <keep-alive :max="10">
    <component :is="view"></component>
  </keep-alive>
  ```

   ä¸ä¼šåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰ç¼“å­˜å®ä¾‹ã€‚



#### [å¼‚æ­¥ç»„ä»¶](https://cn.vuejs.org/v2/guide/components-dynamic-async.html#å¼‚æ­¥ç»„ä»¶)

åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†åº”ç”¨åˆ†å‰²æˆå°ä¸€äº›çš„ä»£ç å—ï¼Œå¹¶ä¸”åªåœ¨éœ€è¦çš„æ—¶å€™æ‰ä»æœåŠ¡å™¨åŠ è½½ä¸€ä¸ªæ¨¡å—ã€‚ä¸ºäº†ç®€åŒ–ï¼ŒVue å…è®¸ä½ ä»¥ä¸€ä¸ªå·¥å‚å‡½æ•°çš„æ–¹å¼å®šä¹‰ä½ çš„ç»„ä»¶ï¼Œè¿™ä¸ªå·¥å‚å‡½æ•°ä¼šå¼‚æ­¥è§£æä½ çš„ç»„ä»¶å®šä¹‰ã€‚Vue åªæœ‰åœ¨è¿™ä¸ªç»„ä»¶éœ€è¦è¢«æ¸²æŸ“çš„æ—¶å€™æ‰ä¼šè§¦å‘è¯¥å·¥å‚å‡½æ•°ï¼Œä¸”ä¼šæŠŠç»“æœç¼“å­˜èµ·æ¥ä¾›æœªæ¥é‡æ¸²æŸ“ã€‚

```html

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <section>10ç§’åå‡ºç°</section>
        <async-example></async-example>
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    Vue.component("async-example",function(resolve,reject){
        setTimeout(function(){
            // reject({
            //  template:`  <section>  33å¼‚æ­¥å‡½æ•°</section>`
            // })
            resolve({
             template:`  <section>  33å¼‚æ­¥å‡½æ•°</section>`
            })
        },10000)
    })

    let vm = new Vue({
        el: "#app",
        data: {
           
        }
    })
</script>

</html>
```









### [å¤„ç†è¾¹ç•Œæƒ…å†µ](https://cn.vuejs.org/v2/guide/components-edge-cases.html)

#### [è®¿é—®å…ƒç´  & ç»„ä»¶](https://cn.vuejs.org/v2/guide/components-edge-cases.html#è®¿é—®å…ƒç´ -amp-ç»„ä»¶)

åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœ€å¥½ä¸è¦è§¦è¾¾å¦ä¸€ä¸ªç»„ä»¶å®ä¾‹å†…éƒ¨æˆ–æ‰‹åŠ¨æ“ä½œ DOM å…ƒç´ ã€‚ä¸è¿‡ä¹Ÿç¡®å®åœ¨ä¸€äº›æƒ…å†µä¸‹åšè¿™äº›äº‹æƒ…æ˜¯åˆé€‚çš„ã€‚

#### [è®¿é—®æ ¹å®ä¾‹](https://cn.vuejs.org/v2/guide/components-edge-cases.html#è®¿é—®æ ¹å®ä¾‹)

åœ¨æ¯ä¸ª `new Vue` å®ä¾‹çš„å­ç»„ä»¶ä¸­ï¼Œå…¶æ ¹å®ä¾‹å¯ä»¥é€šè¿‡ `$root` property è¿›è¡Œè®¿é—®ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸ªæ ¹å®ä¾‹ä¸­ï¼š

```
// Vue æ ¹å®ä¾‹
new Vue({
  data: {
    foo: 1
  },
  computed: {
    bar: function () { /* ... */ }
  },
  methods: {
    baz: function () { /* ... */ }
  }
})
```

æ‰€æœ‰çš„å­ç»„ä»¶éƒ½å¯ä»¥å°†è¿™ä¸ªå®ä¾‹ä½œä¸ºä¸€ä¸ªå…¨å±€ store æ¥è®¿é—®æˆ–ä½¿ç”¨ã€‚

```
// è·å–æ ¹ç»„ä»¶çš„æ•°æ®
this.$root.foo

// å†™å…¥æ ¹ç»„ä»¶çš„æ•°æ®
this.$root.foo = 2

// è®¿é—®æ ¹ç»„ä»¶çš„è®¡ç®—å±æ€§
this.$root.bar

// è°ƒç”¨æ ¹ç»„ä»¶çš„æ–¹æ³•
this.$root.baz()
```

å¯¹äº demo æˆ–éå¸¸å°å‹çš„æœ‰å°‘é‡ç»„ä»¶çš„åº”ç”¨æ¥è¯´è¿™æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ä¸è¿‡è¿™ä¸ªæ¨¡å¼æ‰©å±•åˆ°ä¸­å¤§å‹åº”ç”¨æ¥è¯´å°±ä¸ç„¶äº†ã€‚å› æ­¤åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èä½¿ç”¨ [Vuex](https://github.com/vuejs/vuex) æ¥ç®¡ç†åº”ç”¨çš„çŠ¶æ€ã€‚

#### [è®¿é—®çˆ¶çº§ç»„ä»¶å®ä¾‹](https://cn.vuejs.org/v2/guide/components-edge-cases.html#è®¿é—®çˆ¶çº§ç»„ä»¶å®ä¾‹)

å’Œ `$root` ç±»ä¼¼ï¼Œ`$parent` property å¯ä»¥ç”¨æ¥ä»ä¸€ä¸ªå­ç»„ä»¶è®¿é—®çˆ¶ç»„ä»¶çš„å®ä¾‹ã€‚å®ƒæä¾›äº†ä¸€ç§æœºä¼šï¼Œå¯ä»¥åœ¨åæœŸéšæ—¶è§¦è¾¾çˆ¶çº§ç»„ä»¶ï¼Œä»¥æ›¿ä»£å°†æ•°æ®ä»¥ prop çš„æ–¹å¼ä¼ å…¥å­ç»„ä»¶çš„æ–¹å¼ã€‚

> åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè§¦è¾¾çˆ¶çº§ç»„ä»¶ä¼šä½¿å¾—ä½ çš„åº”ç”¨æ›´éš¾è°ƒè¯•å’Œç†è§£ï¼Œå°¤å…¶æ˜¯å½“ä½ å˜æ›´äº†çˆ¶çº§ç»„ä»¶çš„æ•°æ®çš„æ—¶å€™ã€‚å½“æˆ‘ä»¬ç¨åå›çœ‹é‚£ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œå¾ˆéš¾æ‰¾å‡ºé‚£ä¸ªå˜æ›´æ˜¯ä»å“ªé‡Œå‘èµ·çš„ã€‚

#### [è®¿é—®å­ç»„ä»¶å®ä¾‹æˆ–å­å…ƒç´ ](https://cn.vuejs.org/v2/guide/components-edge-cases.html#è®¿é—®å­ç»„ä»¶å®ä¾‹æˆ–å­å…ƒç´ )

å°½ç®¡å­˜åœ¨ prop å’Œäº‹ä»¶ï¼Œæœ‰çš„æ—¶å€™ä½ ä»å¯èƒ½éœ€è¦åœ¨ JavaScript é‡Œç›´æ¥è®¿é—®ä¸€ä¸ªå­ç»„ä»¶ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ å¯ä»¥é€šè¿‡ `ref` è¿™ä¸ª attribute ä¸ºå­ç»„ä»¶èµ‹äºˆä¸€ä¸ª ID å¼•ç”¨ã€‚ä¾‹å¦‚ï¼š

```
<base-input ref="usernameInput"></base-input>
```

ç°åœ¨åœ¨ä½ å·²ç»å®šä¹‰äº†è¿™ä¸ª `ref` çš„ç»„ä»¶é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š

```
this.$refs.usernameInput
```

æ¥è®¿é—®è¿™ä¸ª `` å®ä¾‹ï¼Œä»¥ä¾¿ä¸æ—¶ä¹‹éœ€ã€‚æ¯”å¦‚ç¨‹åºåŒ–åœ°ä»ä¸€ä¸ªçˆ¶çº§ç»„ä»¶èšç„¦è¿™ä¸ªè¾“å…¥æ¡†ã€‚åœ¨åˆšæ‰é‚£ä¸ªä¾‹å­ä¸­ï¼Œè¯¥ `` ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»ä¼¼çš„ `ref` æä¾›å¯¹å†…éƒ¨è¿™ä¸ªæŒ‡å®šå…ƒç´ çš„è®¿é—®ï¼Œä¾‹å¦‚ï¼š

```
<input ref="input">
```

ç”šè‡³å¯ä»¥é€šè¿‡å…¶çˆ¶çº§ç»„ä»¶å®šä¹‰æ–¹æ³•ï¼š

```
methods: {
  // ç”¨æ¥ä»çˆ¶çº§ç»„ä»¶èšç„¦è¾“å…¥æ¡†
  focus: function () {
    this.$refs.input.focus()
  }
}
```

è¿™æ ·å°±å…è®¸çˆ¶çº§ç»„ä»¶é€šè¿‡ä¸‹é¢çš„ä»£ç èšç„¦  é‡Œçš„è¾“å…¥æ¡†ï¼š

```
this.$refs.usernameInput.focus()
```

å½“ `ref` å’Œ `v-for` ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ï¼Œä½ å¾—åˆ°çš„ ref å°†ä¼šæ˜¯ä¸€ä¸ªåŒ…å«äº†å¯¹åº”æ•°æ®æºçš„è¿™äº›å­ç»„ä»¶çš„æ•°ç»„ã€‚

> `$refs` åªä¼šåœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆä¹‹åç”Ÿæ•ˆï¼Œå¹¶ä¸”å®ƒä»¬ä¸æ˜¯å“åº”å¼çš„ã€‚è¿™ä»…ä½œä¸ºä¸€ä¸ªç”¨äºç›´æ¥æ“ä½œå­ç»„ä»¶çš„â€œé€ƒç”Ÿèˆ±â€â€”â€”ä½ åº”è¯¥é¿å…åœ¨æ¨¡æ¿æˆ–è®¡ç®—å±æ€§ä¸­è®¿é—® `$refs`ã€‚

#### [ä¾èµ–æ³¨å…¥](https://cn.vuejs.org/v2/guide/components-edge-cases.html#ä¾èµ–æ³¨å…¥)

`provide` é€‰é¡¹å…è®¸æˆ‘ä»¬æŒ‡å®šæˆ‘ä»¬æƒ³è¦**æä¾›**ç»™åä»£ç»„ä»¶çš„æ•°æ®/æ–¹æ³•ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯ å†…éƒ¨çš„ `getMap` æ–¹æ³•ï¼š

```
provide: function () {
  return {
    getMap: this.getMap
  }
}
```

ç„¶ååœ¨ä»»ä½•åä»£ç»„ä»¶é‡Œï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ `inject` é€‰é¡¹æ¥æ¥æ”¶æŒ‡å®šçš„æˆ‘ä»¬æƒ³è¦æ·»åŠ åœ¨è¿™ä¸ªå®ä¾‹ä¸Šçš„ propertyï¼š

```
inject: ['getMap']
```

ç›¸æ¯” `$parent` æ¥è¯´ï¼Œè¿™ä¸ªç”¨æ³•å¯ä»¥è®©æˆ‘ä»¬åœ¨*ä»»æ„*åä»£ç»„ä»¶ä¸­è®¿é—® `getMap`ï¼Œè€Œä¸éœ€è¦æš´éœ²æ•´ä¸ª å®ä¾‹ã€‚è¿™å…è®¸æˆ‘ä»¬æ›´å¥½çš„æŒç»­ç ”å‘è¯¥ç»„ä»¶ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒæˆ‘ä»¬å¯èƒ½ä¼šæ”¹å˜/ç§»é™¤ä¸€äº›å­ç»„ä»¶ä¾èµ–çš„ä¸œè¥¿ã€‚åŒæ—¶è¿™äº›ç»„ä»¶ä¹‹é—´çš„æ¥å£æ˜¯å§‹ç»ˆæ˜ç¡®å®šä¹‰çš„ï¼Œå°±å’Œ `props` ä¸€æ ·ã€‚

å®é™…ä¸Šï¼Œä½ å¯ä»¥æŠŠä¾èµ–æ³¨å…¥çœ‹ä½œä¸€éƒ¨åˆ†â€œå¤§èŒƒå›´æœ‰æ•ˆçš„ propâ€ï¼Œé™¤äº†ï¼š

- ç¥–å…ˆç»„ä»¶ä¸éœ€è¦çŸ¥é“å“ªäº›åä»£ç»„ä»¶ä½¿ç”¨å®ƒæä¾›çš„ property
- åä»£ç»„ä»¶ä¸éœ€è¦çŸ¥é“è¢«æ³¨å…¥çš„ property æ¥è‡ªå“ªé‡Œ

> ç„¶è€Œï¼Œä¾èµ–æ³¨å…¥è¿˜æ˜¯æœ‰è´Ÿé¢å½±å“çš„ã€‚å®ƒå°†ä½ åº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶ä¸å®ƒä»¬å½“å‰çš„ç»„ç»‡æ–¹å¼è€¦åˆèµ·æ¥ï¼Œä½¿é‡æ„å˜å¾—æ›´åŠ å›°éš¾ã€‚åŒæ—¶æ‰€æä¾›çš„ property æ˜¯éå“åº”å¼çš„ã€‚è¿™æ˜¯å‡ºäºè®¾è®¡çš„è€ƒè™‘ï¼Œå› ä¸ºä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºä¸€ä¸ªä¸­å¿ƒåŒ–è§„æ¨¡åŒ–çš„æ•°æ®è·Ÿ[ä½¿ç”¨ `$root`](https://cn.vuejs.org/v2/guide/components-edge-cases.html#è®¿é—®æ ¹å®ä¾‹)åšè¿™ä»¶äº‹éƒ½æ˜¯ä¸å¤Ÿå¥½çš„ã€‚å¦‚æœä½ æƒ³è¦å…±äº«çš„è¿™ä¸ª property æ˜¯ä½ çš„åº”ç”¨ç‰¹æœ‰çš„ï¼Œè€Œä¸æ˜¯é€šç”¨åŒ–çš„ï¼Œæˆ–è€…å¦‚æœä½ æƒ³åœ¨ç¥–å…ˆç»„ä»¶ä¸­æ›´æ–°æ‰€æä¾›çš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™æ„å‘³ç€ä½ å¯èƒ½éœ€è¦æ¢ç”¨ä¸€ä¸ªåƒ [Vuex](https://github.com/vuejs/vuex) è¿™æ ·çœŸæ­£çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆäº†ã€‚

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <section>10ç§’åå‡ºç°</section>
        <section>{{counter}}</section>
        <input type="text" ref="input">
        <!-- <test ref="test" v-for="item,index in [1,2,3]"></test> -->
        <test ref="test"></test>
        <!-- <async-example></async-example> -->
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    Vue.component("test", {
        inject:["getString"],
        template: `
           <div>{{counter}}</div>
        `,
        data: function () {
            return {
                counter: this.getString()
            }
        },
        methods: {
            handleEvent: function () {
                console.log(this.$parent);
                console.log(this.$parent.counter, this.$parent.bar, this.$parent.getString())
            }
        },
    })

    let vm = new Vue({
        provide: function () {
            return {
                getString: this.getString
            }
        },
        el: "#app",
        computed: {
            bar: function () {
                return 123;
            }
        },
        methods: {
            getString: function () {
                console.log(this.$refs)
                return "name";
            }
        },
        data: {
            counter: 1
        }
    })
    // vm.$root.counter = 2;
    // console.log(vm.$root.counter, vm.$root.bar, vm.$root.getString())
</script>

</html>
```

#### 





## å¯å¤ç”¨æ€§&ç»„åˆ

### *æ¸²æŸ“å‡½æ•°å’Œ[JSX](https://cn.vuejs.org/v2/guide/render-function.html)

### æ··å…¥

æ··å…¥ (mixin) æä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ Vue ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚ä¸€ä¸ªæ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«â€œæ··åˆâ€è¿›å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        {{counter}}
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
   let myMinx = {
       data:function(){
          return {
            counter:1
          } 
       },
       created() {
           console.log("creating");
       },
   }
   let Component = Vue.extend({
       mixins:[myMinx]
   })
    let vm = new Component();
    vm.$mount("#app");
</script>

</html>
```

#### [é€‰é¡¹åˆå¹¶](https://cn.vuejs.org/v2/guide/mixins.html#é€‰é¡¹åˆå¹¶)

å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼è¿›è¡Œâ€œåˆå¹¶â€ã€‚

æ¯”å¦‚ï¼Œæ•°æ®å¯¹è±¡åœ¨å†…éƒ¨ä¼šè¿›è¡Œé€’å½’åˆå¹¶ï¼Œå¹¶åœ¨å‘ç”Ÿå†²çªæ—¶ä»¥ç»„ä»¶æ•°æ®ä¼˜å…ˆã€‚

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        {{counter}}
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
   let myMinx = {
       data:{
           counter:1
       },
       created() {
           console.log("creating");
       },
   }
   let vm = new Vue({
       created() {
          console.log("creating in component");
       },
       mixins:[myMinx],
       el:"#app",
       data:{
           counter:2
       }
   })
</script>

</html>
```



#### [å…¨å±€æ··å…¥](https://cn.vuejs.org/v2/guide/mixins.html#å…¨å±€æ··å…¥)

æ··å…¥ä¹Ÿå¯ä»¥è¿›è¡Œå…¨å±€æ³¨å†Œã€‚ä½¿ç”¨æ—¶æ ¼å¤–å°å¿ƒï¼ä¸€æ—¦ä½¿ç”¨å…¨å±€æ··å…¥ï¼Œå®ƒå°†å½±å“**æ¯ä¸€ä¸ª**ä¹‹ååˆ›å»ºçš„ Vue å®ä¾‹ã€‚ä½¿ç”¨æ°å½“æ—¶ï¼Œè¿™å¯ä»¥ç”¨æ¥ä¸ºè‡ªå®šä¹‰é€‰é¡¹æ³¨å…¥å¤„ç†é€»è¾‘ã€‚

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">
        {{counter}}
    </div>
</body>
<script src="https://cn.vuejs.org/js/vue.js"></script>
<script>
    // å…¨å±€æ··å…¥
    Vue.mixin({
        created() {
            console.log("creating from mixin");
        },
    });
    let vm = new Vue({
        el: "#app",
        data: {
            counter: 2
        }
    })
</script>

</html>
```

#### *[è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥](https://cn.vuejs.org/v2/guide/mixins.html#è‡ªå®šä¹‰é€‰é¡¹åˆå¹¶ç­–ç•¥)

è‡ªå®šä¹‰é€‰é¡¹å°†ä½¿ç”¨é»˜è®¤ç­–ç•¥ï¼Œå³ç®€å•åœ°è¦†ç›–å·²æœ‰å€¼ã€‚å¦‚æœæƒ³è®©è‡ªå®šä¹‰é€‰é¡¹ä»¥è‡ªå®šä¹‰é€»è¾‘åˆå¹¶ï¼Œå¯ä»¥å‘ `Vue.config.optionMergeStrategies` æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼š

```
Vue.config.optionMergeStrategies.myOption = function (toVal, fromVal) {
  // è¿”å›åˆå¹¶åçš„å€¼
}
```

å¯¹äºå¤šæ•°å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ä¸ `methods` ç›¸åŒçš„åˆå¹¶ç­–ç•¥ï¼š

```
var strategies = Vue.config.optionMergeStrategies
strategies.myOption = strategies.methods
```

å¯ä»¥åœ¨ [Vuex](https://github.com/vuejs/vuex) 1.x çš„æ··å…¥ç­–ç•¥é‡Œæ‰¾åˆ°ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­ï¼š

```
const merge = Vue.config.optionMergeStrategies.computed
Vue.config.optionMergeStrategies.vuex = function (toVal, fromVal) {
  if (!toVal) return fromVal
  if (!fromVal) return toVal
  return {
    getters: merge(toVal.getters, fromVal.getters),
    state: merge(toVal.state, fromVal.state),
    actions: merge(toVal.actions, fromVal.actions)
  }
}
```



### è¿‡æ»¤å™¨

Vue.js å…è®¸ä½ è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œå¯è¢«ç”¨äºä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–ã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼š**åŒèŠ±æ‹¬å·æ’å€¼å’Œ `v-bind` è¡¨è¾¾å¼** (åè€…ä» 2.1.0+ å¼€å§‹æ”¯æŒ)ã€‚è¿‡æ»¤å™¨åº”è¯¥è¢«æ·»åŠ åœ¨ JavaScript è¡¨è¾¾å¼çš„å°¾éƒ¨ï¼Œç”±â€œç®¡é“â€ç¬¦å·æŒ‡ç¤ºï¼š

```
<!-- åœ¨åŒèŠ±æ‹¬å·ä¸­ -->
{{ message | capitalize }}

<!-- åœ¨ `v-bind` ä¸­ -->
<div v-bind:id="rawId | formatId"></div>
```

ä½ å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶çš„é€‰é¡¹ä¸­å®šä¹‰æœ¬åœ°çš„è¿‡æ»¤å™¨ï¼š

```
filters: {
  capitalize: function (value) {
    if (!value) return ''
    value = value.toString()
    return value.charAt(0).toUpperCase() + value.slice(1)
  }
}
```

æˆ–è€…åœ¨åˆ›å»º Vue å®ä¾‹ä¹‹å‰å…¨å±€å®šä¹‰è¿‡æ»¤å™¨ï¼š

```
Vue.filter('capitalize', function (value) {
  if (!value) return ''
  value = value.toString()
  return value.charAt(0).toUpperCase() + value.slice(1)
})

new Vue({
  // ...
})
```

å½“å…¨å±€è¿‡æ»¤å™¨å’Œå±€éƒ¨è¿‡æ»¤å™¨é‡åæ—¶ï¼Œä¼šé‡‡ç”¨å±€éƒ¨è¿‡æ»¤å™¨ã€‚

ä¸‹é¢è¿™ä¸ªä¾‹å­ç”¨åˆ°äº† `capitalize` è¿‡æ»¤å™¨ï¼š

John

è¿‡æ»¤å™¨å‡½æ•°æ€»æ¥æ”¶è¡¨è¾¾å¼çš„å€¼ (ä¹‹å‰çš„æ“ä½œé“¾çš„ç»“æœ) ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ`capitalize` è¿‡æ»¤å™¨å‡½æ•°å°†ä¼šæ”¶åˆ° `message` çš„å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚

è¿‡æ»¤å™¨å¯ä»¥ä¸²è”ï¼š

```
{{ message | filterA | filterB }}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`filterA` è¢«å®šä¹‰ä¸ºæ¥æ”¶å•ä¸ªå‚æ•°çš„è¿‡æ»¤å™¨å‡½æ•°ï¼Œè¡¨è¾¾å¼ `message` çš„å€¼å°†ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°å‡½æ•°ä¸­ã€‚ç„¶åç»§ç»­è°ƒç”¨åŒæ ·è¢«å®šä¹‰ä¸ºæ¥æ”¶å•ä¸ªå‚æ•°çš„è¿‡æ»¤å™¨å‡½æ•° `filterB`ï¼Œå°† `filterA` çš„ç»“æœä¼ é€’åˆ° `filterB` ä¸­ã€‚

è¿‡æ»¤å™¨æ˜¯ JavaScript å‡½æ•°ï¼Œå› æ­¤å¯ä»¥æ¥æ”¶å‚æ•°ï¼š

```
{{ message | filterA('arg1', arg2) }}
```

è¿™é‡Œï¼Œ`filterA` è¢«å®šä¹‰ä¸ºæ¥æ”¶ä¸‰ä¸ªå‚æ•°çš„è¿‡æ»¤å™¨å‡½æ•°ã€‚å…¶ä¸­ `message` çš„å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ™®é€šå­—ç¬¦ä¸² `'arg1'` ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨è¾¾å¼ `arg2` çš„å€¼ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ã€‚

### æ’ä»¶



æ’ä»¶é€šå¸¸ç”¨æ¥ä¸º Vue æ·»åŠ å…¨å±€åŠŸèƒ½ã€‚æ’ä»¶çš„åŠŸèƒ½èŒƒå›´æ²¡æœ‰ä¸¥æ ¼çš„é™åˆ¶â€”â€”ä¸€èˆ¬æœ‰ä¸‹é¢å‡ ç§ï¼š

1. æ·»åŠ å…¨å±€æ–¹æ³•æˆ–è€… propertyã€‚å¦‚ï¼š[vue-custom-element](https://github.com/karol-f/vue-custom-element)
2. æ·»åŠ å…¨å±€èµ„æºï¼šæŒ‡ä»¤/è¿‡æ»¤å™¨/è¿‡æ¸¡ç­‰ã€‚å¦‚ [vue-touch](https://github.com/vuejs/vue-touch)
3. é€šè¿‡å…¨å±€æ··å…¥æ¥æ·»åŠ ä¸€äº›ç»„ä»¶é€‰é¡¹ã€‚å¦‚ [vue-router](https://github.com/vuejs/vue-router)
4. æ·»åŠ  Vue å®ä¾‹æ–¹æ³•ï¼Œé€šè¿‡æŠŠå®ƒä»¬æ·»åŠ åˆ° `Vue.prototype` ä¸Šå®ç°ã€‚
5. ä¸€ä¸ªåº“ï¼Œæä¾›è‡ªå·±çš„ APIï¼ŒåŒæ—¶æä¾›ä¸Šé¢æåˆ°çš„ä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½ã€‚å¦‚ [vue-router](https://github.com/vuejs/vue-router)

#### [ä½¿ç”¨æ’ä»¶](https://cn.vuejs.org/v2/guide/plugins.html#ä½¿ç”¨æ’ä»¶)

é€šè¿‡å…¨å±€æ–¹æ³• `Vue.use()` ä½¿ç”¨æ’ä»¶ã€‚å®ƒéœ€è¦åœ¨ä½ è°ƒç”¨ `new Vue()` å¯åŠ¨åº”ç”¨ä¹‹å‰å®Œæˆï¼š

```
// è°ƒç”¨ `MyPlugin.install(Vue)`
Vue.use(MyPlugin)

new Vue({
  // ...ç»„ä»¶é€‰é¡¹
})
```

ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹å¯¹è±¡ï¼š

```
Vue.use(MyPlugin, { someOption: true })
```

`Vue.use` ä¼šè‡ªåŠ¨é˜»æ­¢å¤šæ¬¡æ³¨å†Œç›¸åŒæ’ä»¶ï¼Œå±Šæ—¶å³ä½¿å¤šæ¬¡è°ƒç”¨ä¹Ÿåªä¼šæ³¨å†Œä¸€æ¬¡è¯¥æ’ä»¶ã€‚

Vue.js å®˜æ–¹æä¾›çš„ä¸€äº›æ’ä»¶ (ä¾‹å¦‚ `vue-router`) åœ¨æ£€æµ‹åˆ° `Vue` æ˜¯å¯è®¿é—®çš„å…¨å±€å˜é‡æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ `Vue.use()`ã€‚ç„¶è€Œåœ¨åƒ CommonJS è¿™æ ·çš„æ¨¡å—ç¯å¢ƒä¸­ï¼Œä½ åº”è¯¥å§‹ç»ˆæ˜¾å¼åœ°è°ƒç”¨ `Vue.use()`ï¼š

```
// ç”¨ Browserify æˆ– webpack æä¾›çš„ CommonJS æ¨¡å—ç¯å¢ƒæ—¶
var Vue = require('vue')
var VueRouter = require('vue-router')

// ä¸è¦å¿˜äº†è°ƒç”¨æ­¤æ–¹æ³•
Vue.use(VueRouter)
```

[awesome-vue](https://github.com/vuejs/awesome-vue#components--libraries) é›†åˆäº†å¤§é‡ç”±ç¤¾åŒºè´¡çŒ®çš„æ’ä»¶å’Œåº“ã€‚

#### [å¼€å‘æ’ä»¶](https://cn.vuejs.org/v2/guide/plugins.html#å¼€å‘æ’ä»¶)

Vue.js çš„æ’ä»¶åº”è¯¥æš´éœ²ä¸€ä¸ª `install` æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `Vue` æ„é€ å™¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„é€‰é¡¹å¯¹è±¡ï¼š

```
MyPlugin.install = function (Vue, options) {
  // 1. æ·»åŠ å…¨å±€æ–¹æ³•æˆ– property
  Vue.myGlobalMethod = function () {
    // é€»è¾‘...
  }

  // 2. æ·»åŠ å…¨å±€èµ„æº
  Vue.directive('my-directive', {
    bind (el, binding, vnode, oldVnode) {
      // é€»è¾‘...
    }
    ...
  })

  // 3. æ³¨å…¥ç»„ä»¶é€‰é¡¹
  Vue.mixin({
    created: function () {
      // é€»è¾‘...
    }
    ...
  })

  // 4. æ·»åŠ å®ä¾‹æ–¹æ³•
  Vue.prototype.$myMethod = function (methodOptions) {
    // é€»è¾‘...
  }
}
```



## [Vueå•æ–‡ä»¶ç»„ä»¶](https://cn.vuejs.org/v2/guide/single-file-components.html#ad)

åœ¨å¾ˆå¤š Vue é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `Vue.component` æ¥å®šä¹‰å…¨å±€ç»„ä»¶ï¼Œç´§æ¥ç€ç”¨ `new Vue({ el: '#container '})` åœ¨æ¯ä¸ªé¡µé¢å†…æŒ‡å®šä¸€ä¸ªå®¹å™¨å…ƒç´ ã€‚

è¿™ç§æ–¹å¼åœ¨å¾ˆå¤šä¸­å°è§„æ¨¡çš„é¡¹ç›®ä¸­è¿ä½œçš„å¾ˆå¥½ï¼Œåœ¨è¿™äº›é¡¹ç›®é‡Œ JavaScript åªè¢«ç”¨æ¥åŠ å¼ºç‰¹å®šçš„è§†å›¾ã€‚ä½†å½“åœ¨æ›´å¤æ‚çš„é¡¹ç›®ä¸­ï¼Œæˆ–è€…ä½ çš„å‰ç«¯å®Œå…¨ç”± JavaScript é©±åŠ¨çš„æ—¶å€™ï¼Œä¸‹é¢è¿™äº›ç¼ºç‚¹å°†å˜å¾—éå¸¸æ˜æ˜¾ï¼š

- **å…¨å±€å®šä¹‰ (Global definitions)** å¼ºåˆ¶è¦æ±‚æ¯ä¸ª component ä¸­çš„å‘½åä¸å¾—é‡å¤
- **å­—ç¬¦ä¸²æ¨¡æ¿ (String templates)** ç¼ºä¹è¯­æ³•é«˜äº®ï¼Œåœ¨ HTML æœ‰å¤šè¡Œçš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°ä¸‘é™‹çš„ `\`
- **ä¸æ”¯æŒ CSS (No CSS support)** æ„å‘³ç€å½“ HTML å’Œ JavaScript ç»„ä»¶åŒ–æ—¶ï¼ŒCSS æ˜æ˜¾è¢«é—æ¼
- **æ²¡æœ‰æ„å»ºæ­¥éª¤ (No build step)** é™åˆ¶åªèƒ½ä½¿ç”¨ HTML å’Œ ES5 JavaScriptï¼Œè€Œä¸èƒ½ä½¿ç”¨é¢„å¤„ç†å™¨ï¼Œå¦‚ Pug (formerly Jade) å’Œ Babel

æ–‡ä»¶æ‰©å±•åä¸º `.vue` çš„ **single-file components (å•æ–‡ä»¶ç»„ä»¶)** ä¸ºä»¥ä¸Šæ‰€æœ‰é—®é¢˜æä¾›äº†è§£å†³æ–¹æ³•ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ä½¿ç”¨ webpack æˆ– Browserify ç­‰æ„å»ºå·¥å…·ã€‚

è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶åä¸º `Hello.vue` çš„ç®€å•å®ä¾‹ï¼š

[![å•æ–‡ä»¶ç»„ä»¶çš„ç¤ºä¾‹ (ç‚¹å‡»æŸ¥çœ‹æ–‡æœ¬ç‰ˆçš„ä»£ç ](Vue%20%E5%9F%BA%E7%A1%80%E7%AC%AC%E5%9B%9B%E5%A4%A9.assets/vue-component.png)](https://codesandbox.io/s/github/vuejs/vuejs.org/tree/master/src/v2/examples/vue-20-single-file-components)

ç°åœ¨æˆ‘ä»¬è·å¾—ï¼š

- [å®Œæ•´è¯­æ³•é«˜äº®](https://github.com/vuejs/awesome-vue#source-code-editing)
- [CommonJS æ¨¡å—](https://webpack.js.org/concepts/modules/#what-is-a-webpack-module)
- [ç»„ä»¶ä½œç”¨åŸŸçš„ CSS](https://vue-loader.vuejs.org/zh-cn/features/scoped-css.html)

æ­£å¦‚æˆ‘ä»¬è¯´è¿‡çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¢„å¤„ç†å™¨æ¥æ„å»ºç®€æ´å’ŒåŠŸèƒ½æ›´ä¸°å¯Œçš„ç»„ä»¶ï¼Œæ¯”å¦‚ Pugï¼ŒBabel (with ES2015 modules)ï¼Œå’Œ Stylusã€‚

[![å¸¦é¢„å¤„ç†å™¨çš„å•æ–‡ä»¶ç»„ä»¶çš„ç¤ºä¾‹ (Vue%20%E5%9F%BA%E7%A1%80%E7%AC%AC%E5%9B%9B%E5%A4%A9.assets/vue-component-with-preprocessors.png)](https://cn.vuejs.org/images/vue-component-with-preprocessors.png)](https://gist.github.com/chrisvfritz/1c9f2daea9bc078dcb47e9a82e5f7587)

è¿™äº›ç‰¹å®šçš„è¯­è¨€åªæ˜¯ä¾‹å­ï¼Œä½ å¯ä»¥åªæ˜¯ç®€å•åœ°ä½¿ç”¨ Babelï¼ŒTypeScriptï¼ŒSCSSï¼ŒPostCSS - æˆ–è€…å…¶ä»–ä»»ä½•èƒ½å¤Ÿå¸®åŠ©ä½ æé«˜ç”Ÿäº§åŠ›çš„é¢„å¤„ç†å™¨ã€‚å¦‚æœæ­é… `vue-loader` ä½¿ç”¨ webpackï¼Œå®ƒä¹Ÿèƒ½ä¸º CSS Modules æä¾›å¤´ç­‰æ”¯æŒã€‚

#### [æ€ä¹ˆçœ‹å¾…å…³æ³¨ç‚¹åˆ†ç¦»ï¼Ÿ](https://cn.vuejs.org/v2/guide/single-file-components.html#æ€ä¹ˆçœ‹å¾…å…³æ³¨ç‚¹åˆ†ç¦»ï¼Ÿ)

ä¸€ä¸ªé‡è¦çš„äº‹æƒ…å€¼å¾—æ³¨æ„ï¼Œ**å…³æ³¨ç‚¹åˆ†ç¦»ä¸ç­‰äºæ–‡ä»¶ç±»å‹åˆ†ç¦»ã€‚**åœ¨ç°ä»£ UI å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å·²ç»å‘ç°ç›¸æ¯”äºæŠŠä»£ç åº“åˆ†ç¦»æˆä¸‰ä¸ªå¤§çš„å±‚æ¬¡å¹¶å°†å…¶ç›¸äº’äº¤ç»‡èµ·æ¥ï¼ŒæŠŠå®ƒä»¬åˆ’åˆ†ä¸ºæ¾æ•£è€¦åˆçš„ç»„ä»¶å†å°†å…¶ç»„åˆèµ·æ¥æ›´åˆç†ä¸€äº›ã€‚åœ¨ä¸€ä¸ªç»„ä»¶é‡Œï¼Œå…¶æ¨¡æ¿ã€é€»è¾‘å’Œæ ·å¼æ˜¯å†…éƒ¨è€¦åˆçš„ï¼Œå¹¶ä¸”æŠŠä»–ä»¬æ­é…åœ¨ä¸€èµ·å®é™…ä¸Šä½¿å¾—ç»„ä»¶æ›´åŠ å†…èšä¸”æ›´å¯ç»´æŠ¤ã€‚

å³ä¾¿ä½ ä¸å–œæ¬¢å•æ–‡ä»¶ç»„ä»¶ï¼Œä½ ä»ç„¶å¯ä»¥æŠŠ JavaScriptã€CSS åˆ†ç¦»æˆç‹¬ç«‹çš„æ–‡ä»¶ç„¶ååšåˆ°çƒ­é‡è½½å’Œé¢„ç¼–è¯‘ã€‚

```
<!-- my-component.vue -->
<template>
  <div>This will be pre-compiled</div>
</template>
<script src="./my-component.js"></script>
<style src="./my-component.css"></style>
```

#### [èµ·æ­¥](https://cn.vuejs.org/v2/guide/single-file-components.html#èµ·æ­¥)

##### [ä¾‹å­æ²™ç®±](https://cn.vuejs.org/v2/guide/single-file-components.html#ä¾‹å­æ²™ç®±)

å¦‚æœä½ å¸Œæœ›æ·±å…¥äº†è§£å¹¶å¼€å§‹ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ï¼Œè¯·æ¥ CodeSandbox [çœ‹çœ‹è¿™ä¸ªç®€å•çš„ todo åº”ç”¨](https://codesandbox.io/s/o29j95wx9)ã€‚

##### [é’ˆå¯¹åˆšæ¥è§¦ JavaScript æ¨¡å—å¼€å‘ç³»ç»Ÿçš„ç”¨æˆ·](https://cn.vuejs.org/v2/guide/single-file-components.html#é’ˆå¯¹åˆšæ¥è§¦-JavaScript-æ¨¡å—å¼€å‘ç³»ç»Ÿçš„ç”¨æˆ·)

æœ‰äº† `.vue` ç»„ä»¶ï¼Œæˆ‘ä»¬å°±è¿›å…¥äº†é«˜çº§ JavaScript åº”ç”¨é¢†åŸŸã€‚å¦‚æœä½ æ²¡æœ‰å‡†å¤‡å¥½çš„è¯ï¼Œæ„å‘³ç€è¿˜éœ€è¦å­¦ä¼šä½¿ç”¨ä¸€äº›é™„åŠ çš„å·¥å…·ï¼š

- **Node Package Manager (NPM)**ï¼šé˜…è¯» [Getting Started guide](https://docs.npmjs.com/packages-and-modules/getting-packages-from-the-registry) ä¸­å…³äºå¦‚ä½•ä»æ³¨å†Œåœ° (registry) è·å–åŒ…çš„ç« èŠ‚ã€‚
- **Modern JavaScript with ES2015/16**ï¼šé˜…è¯» Babel çš„ [Learn ES2015 guide](https://babeljs.io/docs/learn-es2015/)ã€‚ä½ ä¸éœ€è¦ç«‹åˆ»è®°ä½æ¯ä¸€ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯ä½ å¯ä»¥ä¿ç•™è¿™ä¸ªé¡µé¢ä»¥ä¾¿åæœŸå‚è€ƒã€‚

åœ¨ä½ èŠ±ä¸€å¤©æ—¶é—´äº†è§£è¿™äº›èµ„æºä¹‹åï¼Œæˆ‘ä»¬å»ºè®®ä½ å‚è€ƒ [Vue CLI 3](https://cli.vuejs.org/zh/)ã€‚åªè¦éµå¾ªæŒ‡ç¤ºï¼Œä½ å°±èƒ½å¾ˆå¿«åœ°è¿è¡Œä¸€ä¸ªå¸¦æœ‰ `.vue` ç»„ä»¶ã€ES2015ã€webpack å’Œçƒ­é‡è½½ (hot-reloading) çš„ Vue é¡¹ç›®ï¼

##### [é’ˆå¯¹é«˜çº§ç”¨æˆ·](https://cn.vuejs.org/v2/guide/single-file-components.html#é’ˆå¯¹é«˜çº§ç”¨æˆ·)

CLI ä¼šä¸ºä½ æå®šå¤§å¤šæ•°å·¥å…·çš„é…ç½®é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç»†ç²’åº¦è‡ªå®šä¹‰[é…ç½®é¡¹](https://cli.vuejs.org/zh/config/)ã€‚

æœ‰æ—¶ä½ ä¼šæƒ³ä»é›¶æ­å»ºä½ è‡ªå·±çš„æ„å»ºå·¥å…·ï¼Œè¿™æ—¶ä½ éœ€è¦é€šè¿‡ [Vue Loader](https://vue-loader.vuejs.org/zh/) æ‰‹åŠ¨é…ç½® webpackã€‚å…³äºå­¦ä¹ æ›´å¤š webpack çš„å†…å®¹ï¼Œè¯·æŸ¥é˜…[å…¶å®˜æ–¹æ–‡æ¡£](https://webpack.js.org/configuration/)å’Œ [Webpack Academy](https://webpack.academy/p/the-core-concepts)ã€‚



## [Vue Cli](https://cli.vuejs.org/zh/)

### å®‰è£…

> Node ç‰ˆæœ¬è¦æ±‚
>
> Vue CLI éœ€è¦ [Node.js](https://nodejs.org/) 8.9 æˆ–æ›´é«˜ç‰ˆæœ¬ (æ¨è 8.11.0+)ã€‚ä½ å¯ä»¥ä½¿ç”¨ [nvm](https://github.com/creationix/nvm) æˆ– [nvm-windows](https://github.com/coreybutler/nvm-windows) åœ¨åŒä¸€å°ç”µè„‘ä¸­ç®¡ç†å¤šä¸ª Node ç‰ˆæœ¬ã€‚

å®‰è£…è¿™ä¸ªæ–°çš„åŒ…ï¼š



```js
npm install -g @vue/cli
// sudo npm install -g @vue/cli
```



å®‰è£…ä¹‹åï¼Œä½ å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è®¿é—® `vue` å‘½ä»¤ã€‚ä½ å¯ä»¥é€šè¿‡ç®€å•è¿è¡Œ `vue`ï¼Œçœ‹çœ‹æ˜¯å¦å±•ç¤ºå‡ºäº†ä¸€ä»½æ‰€æœ‰å¯ç”¨å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼Œæ¥éªŒè¯å®ƒæ˜¯å¦å®‰è£…æˆåŠŸã€‚

ä½ è¿˜å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤æ¥æ£€æŸ¥å…¶ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ï¼š

```bash
vue --version
```



### å¿«é€ŸåŸå‹å¼€å§‹



ä½ å¯ä»¥ä½¿ç”¨ `vue serve` å’Œ `vue build` å‘½ä»¤å¯¹å•ä¸ª `*.vue` æ–‡ä»¶è¿›è¡Œå¿«é€ŸåŸå‹å¼€å‘ï¼Œä¸è¿‡è¿™éœ€è¦å…ˆé¢å¤–å®‰è£…ä¸€ä¸ªå…¨å±€çš„æ‰©å±•ï¼š

```bash
npm install -g @vue/cli-service-global
// sudo npm install -g @vue/cli-service-global // mac æˆ–è€… linuxç³»ç»Ÿ
```

`vue serve` çš„ç¼ºç‚¹å°±æ˜¯å®ƒéœ€è¦å®‰è£…å…¨å±€ä¾èµ–ï¼Œè¿™ä½¿å¾—å®ƒåœ¨ä¸åŒæœºå™¨ä¸Šçš„ä¸€è‡´æ€§ä¸èƒ½å¾—åˆ°ä¿è¯ã€‚å› æ­¤è¿™åªé€‚ç”¨äºå¿«é€ŸåŸå‹å¼€å‘ã€‚

####  vue serve

```text
Usage: serve [options] [entry]

åœ¨å¼€å‘ç¯å¢ƒæ¨¡å¼ä¸‹é›¶é…ç½®ä¸º .js æˆ– .vue æ–‡ä»¶å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨


Options:

  -o, --open  æ‰“å¼€æµè§ˆå™¨
  -c, --copy  å°†æœ¬åœ° URL å¤åˆ¶åˆ°å‰ªåˆ‡æ¿
  -h, --help  è¾“å‡ºç”¨æ³•ä¿¡æ¯
```

ä½ æ‰€éœ€è¦çš„ä»…ä»…æ˜¯ä¸€ä¸ª `App.vue` æ–‡ä»¶ï¼š

```vue
<template>
  <h1>Hello!</h1>
</template>
```

ç„¶ååœ¨è¿™ä¸ª `App.vue` æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
vue serve
```

`vue serve` ä½¿ç”¨äº†å’Œ `vue create` åˆ›å»ºçš„é¡¹ç›®ç›¸åŒçš„é»˜è®¤è®¾ç½® (webpackã€Babelã€PostCSS å’Œ ESLint)ã€‚å®ƒä¼šåœ¨å½“å‰ç›®å½•è‡ªåŠ¨æ¨å¯¼å…¥å£æ–‡ä»¶â€”â€”å…¥å£å¯ä»¥æ˜¯ `main.js`ã€`index.js`ã€`App.vue` æˆ– `app.vue` ä¸­çš„ä¸€ä¸ªã€‚ä½ ä¹Ÿå¯ä»¥æ˜¾å¼åœ°æŒ‡å®šå…¥å£æ–‡ä»¶ï¼š

```bash
vue serve MyComponent.vue
```

å¦‚æœéœ€è¦ï¼Œä½ è¿˜å¯ä»¥æä¾›ä¸€ä¸ª `index.html`ã€`package.json`ã€å®‰è£…å¹¶ä½¿ç”¨æœ¬åœ°ä¾èµ–ã€ç”šè‡³é€šè¿‡ç›¸åº”çš„é…ç½®æ–‡ä»¶é…ç½® Babelã€PostCSS å’Œ ESLintã€‚

#### [vue build](https://cli.vuejs.org/zh/guide/prototyping.html#vue-build)

```text
Usage: build [options] [entry]

åœ¨ç”Ÿäº§ç¯å¢ƒæ¨¡å¼ä¸‹é›¶é…ç½®æ„å»ºä¸€ä¸ª .js æˆ– .vue æ–‡ä»¶


Options:

  -t, --target <target>  æ„å»ºç›®æ ‡ (app | lib | wc | wc-async, é»˜è®¤å€¼ï¼šapp)
  -n, --name <name>      åº“çš„åå­—æˆ– Web Components ç»„ä»¶çš„åå­— (é»˜è®¤å€¼ï¼šå…¥å£æ–‡ä»¶å)
  -d, --dest <dir>       è¾“å‡ºç›®å½• (é»˜è®¤å€¼ï¼šdist)
  -h, --help             è¾“å‡ºç”¨æ³•ä¿¡æ¯
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `vue build` å°†ç›®æ ‡æ–‡ä»¶æ„å»ºæˆä¸€ä¸ªç”Ÿäº§ç¯å¢ƒçš„åŒ…å¹¶ç”¨æ¥éƒ¨ç½²ï¼š

```bash
vue build MyComponent.vue
```

`vue build` ä¹Ÿæä¾›äº†å°†ç»„ä»¶æ„å»ºæˆä¸ºä¸€ä¸ªåº“æˆ–ä¸€ä¸ª Web Components ç»„ä»¶çš„èƒ½åŠ›ã€‚æŸ¥é˜…[æ„å»ºç›®æ ‡](https://cli.vuejs.org/zh/guide/build-targets.html)äº†è§£æ›´å¤šã€‚



### åˆ›å»ºä¸€ä¸ªé¡¹ç›®

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼š

```bash
vue create hello-world
```

ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢

```bash
vue ui
```

## Vue [Router](https://router.vuejs.org/zh/)

Vue Router æ˜¯ [Vue.js](http://cn.vuejs.org/) å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå’Œ Vue.js çš„æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œè®©æ„å»ºå•é¡µé¢åº”ç”¨å˜å¾—æ˜“å¦‚åæŒã€‚åŒ…å«çš„åŠŸèƒ½æœ‰ï¼š

- åµŒå¥—çš„è·¯ç”±/è§†å›¾è¡¨

- æ¨¡å—åŒ–çš„ã€åŸºäºç»„ä»¶çš„è·¯ç”±é…ç½®

- è·¯ç”±å‚æ•°ã€æŸ¥è¯¢ã€é€šé…ç¬¦

- åŸºäº Vue.js è¿‡æ¸¡ç³»ç»Ÿçš„è§†å›¾è¿‡æ¸¡æ•ˆæœ

- ç»†ç²’åº¦çš„å¯¼èˆªæ§åˆ¶

- å¸¦æœ‰è‡ªåŠ¨æ¿€æ´»çš„ CSS class çš„é“¾æ¥

- HTML5 å†å²æ¨¡å¼æˆ– hash æ¨¡å¼ï¼Œåœ¨ IE9 ä¸­è‡ªåŠ¨é™çº§

- è‡ªå®šä¹‰çš„æ»šåŠ¨æ¡è¡Œä¸º

  

### èµ·æ­¥



ç”¨ Vue.js + Vue Router åˆ›å»ºå•é¡µåº”ç”¨ï¼Œæ˜¯éå¸¸ç®€å•çš„ã€‚ä½¿ç”¨ Vue.js ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥é€šè¿‡ç»„åˆç»„ä»¶æ¥ç»„æˆåº”ç”¨ç¨‹åºï¼Œå½“ä½ è¦æŠŠ Vue Router æ·»åŠ è¿›æ¥ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯ï¼Œå°†ç»„ä»¶ (components) æ˜ å°„åˆ°è·¯ç”± (routes)ï¼Œç„¶åå‘Šè¯‰ Vue Router åœ¨å“ªé‡Œæ¸²æŸ“å®ƒä»¬ã€‚ä¸‹é¢æ˜¯ä¸ªåŸºæœ¬ä¾‹å­ï¼š

#### [html](https://router.vuejs.org/zh/guide/#html)

```html
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>

<div id="app">
  <h1>Hello App!</h1>
  <p>
    <!-- ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆª. -->
    <!-- é€šè¿‡ä¼ å…¥ `to` å±æ€§æŒ‡å®šé“¾æ¥. -->
    <!-- <router-link> é»˜è®¤ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ª `<a>` æ ‡ç­¾ -->
    <router-link to="/foo">Go to Foo</router-link>
    <router-link to="/bar">Go to Bar</router-link>
  </p>
  <!-- è·¯ç”±å‡ºå£ -->
  <!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ -->
  <router-view></router-view>
</div>
```

#### [javascript](https://router.vuejs.org/zh/guide/#javascript)

```js
// 0. å¦‚æœä½¿ç”¨æ¨¡å—åŒ–æœºåˆ¶ç¼–ç¨‹ï¼Œå¯¼å…¥Vueå’ŒVueRouterï¼Œè¦è°ƒç”¨ Vue.use(VueRouter)

// 1. å®šä¹‰ (è·¯ç”±) ç»„ä»¶ã€‚
// å¯ä»¥ä»å…¶ä»–æ–‡ä»¶ import è¿›æ¥
const Foo = { template: '<div>foo</div>' }
const Bar = { template: '<div>bar</div>' }

// 2. å®šä¹‰è·¯ç”±
// æ¯ä¸ªè·¯ç”±åº”è¯¥æ˜ å°„ä¸€ä¸ªç»„ä»¶ã€‚ å…¶ä¸­"component" å¯ä»¥æ˜¯
// é€šè¿‡ Vue.extend() åˆ›å»ºçš„ç»„ä»¶æ„é€ å™¨ï¼Œ
// æˆ–è€…ï¼Œåªæ˜¯ä¸€ä¸ªç»„ä»¶é…ç½®å¯¹è±¡ã€‚
// æˆ‘ä»¬æ™šç‚¹å†è®¨è®ºåµŒå¥—è·¯ç”±ã€‚
const routes = [
  { path: '/foo', component: Foo },
  { path: '/bar', component: Bar }
]

// 3. åˆ›å»º router å®ä¾‹ï¼Œç„¶åä¼  `routes` é…ç½®
// ä½ è¿˜å¯ä»¥ä¼ åˆ«çš„é…ç½®å‚æ•°, ä¸è¿‡å…ˆè¿™ä¹ˆç®€å•ç€å§ã€‚
const router = new VueRouter({
  routes // (ç¼©å†™) ç›¸å½“äº routes: routes
})

// 4. åˆ›å»ºå’ŒæŒ‚è½½æ ¹å®ä¾‹ã€‚
// è®°å¾—è¦é€šè¿‡ router é…ç½®å‚æ•°æ³¨å…¥è·¯ç”±ï¼Œ
// ä»è€Œè®©æ•´ä¸ªåº”ç”¨éƒ½æœ‰è·¯ç”±åŠŸèƒ½
const app = new Vue({
  router
}).$mount('#app')

// ç°åœ¨ï¼Œåº”ç”¨å·²ç»å¯åŠ¨äº†ï¼
```

é€šè¿‡æ³¨å…¥è·¯ç”±å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶å†…é€šè¿‡ `this.$router` è®¿é—®è·¯ç”±å™¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `this.$route` è®¿é—®å½“å‰è·¯ç”±ï¼š

```js
// Home.vue
export default {
  computed: {
    username() {
      // æˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ° `params` æ˜¯ä»€ä¹ˆ
      return this.$route.params.username
    }
  },
  methods: {
    goBack() {
      window.history.length > 1 ? this.$router.go(-1) : this.$router.push('/')
    }
  }
}
```

è¯¥æ–‡æ¡£é€šç¯‡éƒ½å¸¸ä½¿ç”¨ `router` å®ä¾‹ã€‚ç•™æ„ä¸€ä¸‹ `this.$router` å’Œ `router` ä½¿ç”¨èµ·æ¥å®Œå…¨ä¸€æ ·ã€‚æˆ‘ä»¬ä½¿ç”¨ `this.$router` çš„åŸå› æ˜¯æˆ‘ä»¬å¹¶ä¸æƒ³åœ¨æ¯ä¸ªç‹¬ç«‹éœ€è¦å°è£…è·¯ç”±çš„ç»„ä»¶ä¸­éƒ½å¯¼å…¥è·¯ç”±ã€‚

ä½ å¯ä»¥çœ‹çœ‹è¿™ä¸ª[åœ¨çº¿çš„](https://jsfiddle.net/yyx990803/xgrjzsup/)ä¾‹å­ã€‚

è¦æ³¨æ„ï¼Œå½“ `` å¯¹åº”çš„è·¯ç”±åŒ¹é…æˆåŠŸï¼Œå°†è‡ªåŠ¨è®¾ç½® class å±æ€§å€¼ `.router-link-active`ã€‚æŸ¥çœ‹ [API æ–‡æ¡£](https://router.vuejs.org/zh/api/#router-link) å­¦ä¹ æ›´å¤šç›¸å…³å†…å®¹ã€‚



### åŠ¨æ€è·¯ç”±åŒ¹é…

æˆ‘ä»¬ç»å¸¸éœ€è¦æŠŠæŸç§æ¨¡å¼åŒ¹é…åˆ°çš„æ‰€æœ‰è·¯ç”±ï¼Œå…¨éƒ½æ˜ å°„åˆ°åŒä¸ªç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª `User` ç»„ä»¶ï¼Œå¯¹äºæ‰€æœ‰ ID å„ä¸ç›¸åŒçš„ç”¨æˆ·ï¼Œéƒ½è¦ä½¿ç”¨è¿™ä¸ªç»„ä»¶æ¥æ¸²æŸ“ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `vue-router` çš„è·¯ç”±è·¯å¾„ä¸­ä½¿ç”¨â€œåŠ¨æ€è·¯å¾„å‚æ•°â€(dynamic segment) æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼š

```js
const User = {
  template: '<div>User</div>'
}

const router = new VueRouter({
  routes: [
    // åŠ¨æ€è·¯å¾„å‚æ•° ä»¥å†’å·å¼€å¤´
    { path: '/user/:id', component: User }
  ]
})
```

ç°åœ¨å‘¢ï¼Œåƒ `/user/foo` å’Œ `/user/bar` éƒ½å°†æ˜ å°„åˆ°ç›¸åŒçš„è·¯ç”±ã€‚

ä¸€ä¸ªâ€œè·¯å¾„å‚æ•°â€ä½¿ç”¨å†’å· `:` æ ‡è®°ã€‚å½“åŒ¹é…åˆ°ä¸€ä¸ªè·¯ç”±æ—¶ï¼Œå‚æ•°å€¼ä¼šè¢«è®¾ç½®åˆ° `this.$route.params`ï¼Œå¯ä»¥åœ¨æ¯ä¸ªç»„ä»¶å†…ä½¿ç”¨ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–° `User` çš„æ¨¡æ¿ï¼Œè¾“å‡ºå½“å‰ç”¨æˆ·çš„ IDï¼šVuex](https://vuex.vuejs.org/zh/)

```bash
const User = {
  template: '<div>User {{ $route.params.id }}</div>'
}
```

#### å“åº”è·¯ç”±å‚æ•°çš„å˜åŒ–

æé†’ä¸€ä¸‹ï¼Œå½“ä½¿ç”¨è·¯ç”±å‚æ•°æ—¶ï¼Œä¾‹å¦‚ä» `/user/foo` å¯¼èˆªåˆ° `/user/bar`ï¼Œ**åŸæ¥çš„ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨**ã€‚å› ä¸ºä¸¤ä¸ªè·¯ç”±éƒ½æ¸²æŸ“åŒä¸ªç»„ä»¶ï¼Œæ¯”èµ·é”€æ¯å†åˆ›å»ºï¼Œå¤ç”¨åˆ™æ˜¾å¾—æ›´åŠ é«˜æ•ˆã€‚**ä¸è¿‡ï¼Œè¿™ä¹Ÿæ„å‘³ç€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸ä¼šå†è¢«è°ƒç”¨**ã€‚

å¤ç”¨ç»„ä»¶æ—¶ï¼Œæƒ³å¯¹è·¯ç”±å‚æ•°çš„å˜åŒ–ä½œå‡ºå“åº”çš„è¯ï¼Œä½ å¯ä»¥ç®€å•åœ° watch (ç›‘æµ‹å˜åŒ–) `$route` å¯¹è±¡ï¼š

```js
const App = {
  watch: {
    $route(to, from) {
      // å¯¹è·¯ç”±å˜åŒ–ä½œå‡ºå“åº”...
    }
  }
}
```

#### æ•è·æ‰€æœ‰è·¯ç”±æˆ– 404 Not found è·¯ç”±

å¸¸è§„å‚æ•°åªä¼šåŒ¹é…è¢« `/` åˆ†éš”çš„ URL ç‰‡æ®µä¸­çš„å­—ç¬¦ã€‚å¦‚æœæƒ³åŒ¹é…**ä»»æ„è·¯å¾„**ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ (`*`)ï¼š

```bash
{
  // ä¼šåŒ¹é…æ‰€æœ‰è·¯å¾„
  path: '*'
}
{
  // ä¼šåŒ¹é…ä»¥ `/user-` å¼€å¤´çš„ä»»æ„è·¯å¾„
  path: '/user-*'
}
```

å½“ä½¿ç”¨*é€šé…ç¬¦*è·¯ç”±æ—¶ï¼Œè¯·ç¡®ä¿è·¯ç”±çš„é¡ºåºæ˜¯æ­£ç¡®çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å«æœ‰*é€šé…ç¬¦*çš„è·¯ç”±åº”è¯¥æ”¾åœ¨æœ€åã€‚è·¯ç”± `{ path: '*' }` é€šå¸¸ç”¨äºå®¢æˆ·ç«¯ 404 é”™è¯¯ã€‚

å½“ä½¿ç”¨ä¸€ä¸ª*é€šé…ç¬¦*æ—¶ï¼Œ`$route.params` å†…ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªåä¸º `pathMatch` å‚æ•°ã€‚å®ƒåŒ…å«äº† URL é€šè¿‡*é€šé…ç¬¦*è¢«åŒ¹é…çš„éƒ¨åˆ†ï¼š

```json
// ç»™å‡ºä¸€ä¸ªè·¯ç”± { path: '/user-*' }
this.$router.push('/user-admin')
this.$route.params.pathMatch // 'admin'
// ç»™å‡ºä¸€ä¸ªè·¯ç”± { path: '*' }
this.$router.push('/non-existing')
this.$route.params.pathMatch // '/non-existing'
```

#### åŒ¹é…ä¼˜å…ˆçº§

æœ‰æ—¶å€™ï¼ŒåŒä¸€ä¸ªè·¯å¾„å¯ä»¥åŒ¹é…å¤šä¸ªè·¯ç”±ï¼Œæ­¤æ—¶ï¼ŒåŒ¹é…çš„ä¼˜å…ˆçº§å°±æŒ‰ç…§è·¯ç”±çš„å®šä¹‰é¡ºåºï¼šè°å…ˆå®šä¹‰çš„ï¼Œè°çš„ä¼˜å…ˆçº§å°±æœ€é«˜ã€‚

```bash
    const routes = [
        {path:"/home",component:Introduce},
        {path:"/home",component:Index}
    ]
```

### åµŒå¥—è·¯ç”±

å®é™…ç”Ÿæ´»ä¸­çš„åº”ç”¨ç•Œé¢ï¼Œé€šå¸¸ç”±å¤šå±‚åµŒå¥—çš„ç»„ä»¶ç»„åˆè€Œæˆã€‚åŒæ ·åœ°ï¼ŒURL ä¸­å„æ®µåŠ¨æ€è·¯å¾„ä¹ŸæŒ‰æŸç§ç»“æ„å¯¹åº”åµŒå¥—çš„å„å±‚ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š

![image-20200601171424938](Vue%20%E5%9F%BA%E7%A1%80%E7%AC%AC%E4%BA%94%E5%A4%A9.assets/image-20200601171424938.png)



æ¥ç€ä¸ŠèŠ‚åˆ›å»ºçš„ appï¼š



```html
<div id="app">
  <router-view></router-view>
</div>
```

```js
const User = {
  template: '<div>User {{ $route.params.id }}</div>'
}

const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User }
  ]
})
```

è¿™é‡Œçš„ `router-view` æ˜¯æœ€é¡¶å±‚çš„å‡ºå£ï¼Œæ¸²æŸ“æœ€é«˜çº§è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶ã€‚åŒæ ·åœ°ï¼Œä¸€ä¸ªè¢«æ¸²æŸ“ç»„ä»¶åŒæ ·å¯ä»¥åŒ…å«è‡ªå·±çš„åµŒå¥— `router-view`ã€‚ä¾‹å¦‚ï¼Œåœ¨ `User` ç»„ä»¶çš„æ¨¡æ¿æ·»åŠ ä¸€ä¸ª `router-view`ï¼š

```html
const User = {
  template: `
    <div class="user">
      <h2>User {{ $route.params.id }}</h2>
      <router-view></router-view>
    </div>
  `
}
```

è¦åœ¨åµŒå¥—çš„å‡ºå£ä¸­æ¸²æŸ“ç»„ä»¶ï¼Œéœ€è¦åœ¨ `VueRouter` çš„å‚æ•°ä¸­ä½¿ç”¨ `children` é…ç½®ï¼š

```js
const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User,
      children: [
        {
          // å½“ /user/:id/profile åŒ¹é…æˆåŠŸï¼Œ
          // UserProfile ä¼šè¢«æ¸²æŸ“åœ¨ User çš„ <router-view> ä¸­
          path: 'profile',
          component: UserProfile
        },
        {
          // å½“ /user/:id/posts åŒ¹é…æˆåŠŸ
          // UserPosts ä¼šè¢«æ¸²æŸ“åœ¨ User çš„ <router-view> ä¸­
          path: 'posts',
          component: UserPosts
        }
      ]
    }
  ]
})
```

**è¦æ³¨æ„ï¼Œä»¥ `/` å¼€å¤´çš„åµŒå¥—è·¯å¾„ä¼šè¢«å½“ä½œæ ¹è·¯å¾„ã€‚ è¿™è®©ä½ å……åˆ†çš„ä½¿ç”¨åµŒå¥—ç»„ä»¶è€Œæ— é¡»è®¾ç½®åµŒå¥—çš„è·¯å¾„ã€‚**

ä½ ä¼šå‘ç°ï¼Œ`children` é…ç½®å°±æ˜¯åƒ `routes` é…ç½®ä¸€æ ·çš„è·¯ç”±é…ç½®æ•°ç»„ï¼Œæ‰€ä»¥å‘¢ï¼Œä½ å¯ä»¥åµŒå¥—å¤šå±‚è·¯ç”±ã€‚

æ­¤æ—¶ï¼ŒåŸºäºä¸Šé¢çš„é…ç½®ï¼Œå½“ä½ è®¿é—® `/user/foo` æ—¶,å¦‚æœä½ æƒ³è¦æ¸²æŸ“ç‚¹ä»€ä¹ˆï¼Œå¯ä»¥æä¾›ä¸€ä¸ª ç©ºçš„ å­è·¯ç”±ï¼š

```html
const router = new VueRouter({
  routes: [
    {
      path: '/user/:id', component: User,
      children: [
        // å½“ /user/:id åŒ¹é…æˆåŠŸï¼Œ
        // UserHome ä¼šè¢«æ¸²æŸ“åœ¨ User çš„ <router-view> ä¸­
        { path: '', component: UserHome },

        // ...å…¶ä»–å­è·¯ç”±
      ]
    }
  ]
})
```

### ç¼–ç¨‹å¼çš„å¯¼èˆª

é™¤äº†ä½¿ç”¨ <router-view> åˆ›å»º a æ ‡ç­¾æ¥å®šä¹‰å¯¼èˆªé“¾æ¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å€ŸåŠ© router çš„å®ä¾‹æ–¹æ³•ï¼Œé€šè¿‡ç¼–å†™ä»£ç æ¥å®ç°ã€‚

#### `router.push(location, onComplete?, onAbort?)`

> **æ³¨æ„ï¼šåœ¨ Vue å®ä¾‹å†…éƒ¨ï¼Œä½ å¯ä»¥é€šè¿‡ `$router` è®¿é—®è·¯ç”±å®ä¾‹ã€‚å› æ­¤ä½ å¯ä»¥è°ƒç”¨ `this.$router.push`ã€‚**

æƒ³è¦å¯¼èˆªåˆ°ä¸åŒçš„ URLï¼Œåˆ™ä½¿ç”¨ `router.push` æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå‘ history æ ˆæ·»åŠ ä¸€ä¸ªæ–°çš„è®°å½•ï¼Œæ‰€ä»¥ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨åé€€æŒ‰é’®æ—¶ï¼Œåˆ™å›åˆ°ä¹‹å‰çš„ URLã€‚

å½“ä½ ç‚¹å‡»<router-link> `` æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨å†…éƒ¨è°ƒç”¨ï¼Œæ‰€ä»¥è¯´ï¼Œç‚¹å‡» `` ç­‰åŒäºè°ƒç”¨ `router.push(...)`ã€‚

| å£°æ˜å¼                  | ç¼–ç¨‹å¼             |
| ----------------------- | ------------------ |
| <router-link :to="..."> | `router.push(...)` |

è¯¥æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²è·¯å¾„ï¼Œæˆ–è€…ä¸€ä¸ªæè¿°åœ°å€çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š

```bash
// å­—ç¬¦ä¸²
router.push('home')

// å¯¹è±¡
router.push({ path: 'home' })

// å‘½åçš„è·¯ç”±
router.push({ name: 'user', params: { userId: '123' }})

// å¸¦æŸ¥è¯¢å‚æ•°ï¼Œå˜æˆ /register?plan=private
router.push({ path: 'register', query: { plan: 'private' }})
```



> **æ³¨æ„ï¼šå¦‚æœæä¾›äº† `path`ï¼Œ`params` ä¼šè¢«å¿½ç•¥ï¼Œä¸Šè¿°ä¾‹å­ä¸­çš„ `query` å¹¶ä¸å±äºè¿™ç§æƒ…å†µã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä¸‹é¢ä¾‹å­çš„åšæ³•ï¼Œä½ éœ€è¦æä¾›è·¯ç”±çš„ `name` æˆ–æ‰‹å†™å®Œæ•´çš„å¸¦æœ‰å‚æ•°çš„ `path`ï¼š**

```bash

```

```js
const userId = '123'
router.push({ name: 'user', params: { userId }}) // -> /user/123
router.push({ path: `/user/${userId}` }) // -> /user/123
// è¿™é‡Œçš„ params ä¸ç”Ÿæ•ˆ
router.push({ path: '/user', params: { userId }}) // -> /user

```

#### `router.replace(location, onComplete?, onAbort?)`

è·Ÿ `router.push` å¾ˆåƒï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ï¼Œå®ƒä¸ä¼šå‘ history æ·»åŠ æ–°è®°å½•ï¼Œè€Œæ˜¯è·Ÿå®ƒçš„æ–¹æ³•åä¸€æ · â€”â€” æ›¿æ¢æ‰å½“å‰çš„ history è®°å½•ã€‚

| å£°æ˜å¼                          | ç¼–ç¨‹å¼              |
| ------------------------------- | ------------------- |
| <router-link :to="..." replace> | `router.replace(..` |

#### `router.go(n)`

è¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ„æ€æ˜¯åœ¨ history è®°å½•ä¸­å‘å‰æˆ–è€…åé€€å¤šå°‘æ­¥ï¼Œç±»ä¼¼ `window.history.go(n)`ã€‚

ä¾‹å­

```js
// åœ¨æµè§ˆå™¨è®°å½•ä¸­å‰è¿›ä¸€æ­¥ï¼Œç­‰åŒäº history.forward()
router.go(1)

// åé€€ä¸€æ­¥è®°å½•ï¼Œç­‰åŒäº history.back()
router.go(-1)

// å‰è¿› 3 æ­¥è®°å½•
router.go(3)

// å¦‚æœ history è®°å½•ä¸å¤Ÿç”¨ï¼Œé‚£å°±é»˜é»˜åœ°å¤±è´¥å‘—
router.go(-100)
router.go(100)
```

#### æ“ä½œ History

ä½ ä¹Ÿè®¸æ³¨æ„åˆ° `router.push`ã€ `router.replace` å’Œ `router.go` è·Ÿ [`window.history.pushState`ã€ `window.history.replaceState` å’Œ `window.history.go`](https://developer.mozilla.org/en-US/docs/Web/API/History)å¥½åƒï¼Œ å®é™…ä¸Šå®ƒä»¬ç¡®å®æ˜¯æ•ˆä»¿ `window.history` API çš„ã€‚

å› æ­¤ï¼Œå¦‚æœä½ å·²ç»ç†Ÿæ‚‰ [Browser History APIs](https://developer.mozilla.org/en-US/docs/Web/API/History_API)ï¼Œé‚£ä¹ˆåœ¨ Vue Router ä¸­æ“ä½œ history å°±æ˜¯è¶…çº§ç®€å•çš„ã€‚

è¿˜æœ‰å€¼å¾—æåŠçš„ï¼ŒVue Router çš„å¯¼èˆªæ–¹æ³• (`push`ã€ `replace`ã€ `go`) åœ¨å„ç±»è·¯ç”±æ¨¡å¼ (`history`ã€ `hash` å’Œ `abstract`) ä¸‹è¡¨ç°ä¸€è‡´ã€‚

### å‘½åè·¯ç”±

æœ‰æ—¶å€™ï¼Œé€šè¿‡ä¸€ä¸ªåç§°æ¥æ ‡è¯†ä¸€ä¸ªè·¯ç”±æ˜¾å¾—æ›´æ–¹ä¾¿ä¸€äº›ï¼Œç‰¹åˆ«æ˜¯åœ¨é“¾æ¥ä¸€ä¸ªè·¯ç”±ï¼Œæˆ–è€…æ˜¯æ‰§è¡Œä¸€äº›è·³è½¬çš„æ—¶å€™ã€‚ä½ å¯ä»¥åœ¨åˆ›å»º Router å®ä¾‹çš„æ—¶å€™ï¼Œåœ¨ `routes` é…ç½®ä¸­ç»™æŸä¸ªè·¯ç”±è®¾ç½®åç§°ã€‚

```js
const router = new VueRouter({
  routes: [
    {
      path: '/user/:userId',
      name: 'user',
      component: User
    }
  ]
})
```

è¦é“¾æ¥åˆ°ä¸€ä¸ªå‘½åè·¯ç”±ï¼Œå¯ä»¥ç»™ `router-link` çš„ `to` å±æ€§ä¼ ä¸€ä¸ªå¯¹è±¡ï¼š

```html
<router-link :to="{ name: 'user', params: { userId: 123 }}">User</router-link>
```

è¿™è·Ÿä»£ç è°ƒç”¨ `router.push()` æ˜¯ä¸€å›äº‹ï¼š

```js
router.push({ name: 'user', params: { userId: 123 }})
```

è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šæŠŠè·¯ç”±å¯¼èˆªåˆ° `/user/123` è·¯å¾„ã€‚



### å‘½åè§†å›¾

æœ‰æ—¶å€™æƒ³åŒæ—¶ (åŒçº§) å±•ç¤ºå¤šä¸ªè§†å›¾ï¼Œè€Œä¸æ˜¯åµŒå¥—å±•ç¤ºï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ªå¸ƒå±€ï¼Œæœ‰ `sidebar` (ä¾§å¯¼èˆª) å’Œ `main` (ä¸»å†…å®¹) ä¸¤ä¸ªè§†å›¾ï¼Œè¿™ä¸ªæ—¶å€™å‘½åè§†å›¾å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ä½ å¯ä»¥åœ¨ç•Œé¢ä¸­æ‹¥æœ‰å¤šä¸ªå•ç‹¬å‘½åçš„è§†å›¾ï¼Œè€Œä¸æ˜¯åªæœ‰ä¸€ä¸ªå•ç‹¬çš„å‡ºå£ã€‚å¦‚æœ `router-view` æ²¡æœ‰è®¾ç½®åå­—ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º `default`ã€‚

```html
<router-view class="view one"></router-view>
<router-view class="view two" name="a"></router-view>
<router-view class="view three" name="b"></router-view>
```

ä¸€ä¸ªè§†å›¾ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æ¸²æŸ“ï¼Œå› æ­¤å¯¹äºåŒä¸ªè·¯ç”±ï¼Œå¤šä¸ªè§†å›¾å°±éœ€è¦å¤šä¸ªç»„ä»¶ã€‚ç¡®ä¿æ­£ç¡®ä½¿ç”¨ `components` é…ç½® (å¸¦ä¸Š s)ï¼š

```js
const router = new VueRouter({
  routes: [
    {
      path: '/',
      components: {
        default: Foo,
        a: Bar,
        b: Baz
      }
    }
  ]
})
```

ä»¥ä¸Šæ¡ˆä¾‹ç›¸å…³çš„å¯è¿è¡Œä»£ç è¯·[ç§»æ­¥è¿™é‡Œ](https://jsfiddle.net/posva/6du90epg/)ã€‚

#### [åµŒå¥—å‘½åè§†å›¾](https://router.vuejs.org/zh/guide/essentials/named-views.html#åµŒå¥—å‘½åè§†å›¾)

æˆ‘ä»¬ä¹Ÿæœ‰å¯èƒ½ä½¿ç”¨å‘½åè§†å›¾åˆ›å»ºåµŒå¥—è§†å›¾çš„å¤æ‚å¸ƒå±€ã€‚è¿™æ—¶ä½ ä¹Ÿéœ€è¦å‘½åç”¨åˆ°çš„åµŒå¥— `router-view` ç»„ä»¶ã€‚æˆ‘ä»¬ä»¥ä¸€ä¸ªè®¾ç½®é¢æ¿ä¸ºä¾‹ï¼š

```text
/settings/emails                                       /settings/profile
+-----------------------------------+                  +------------------------------+
| UserSettings                      |                  | UserSettings                 |
| +-----+-------------------------+ |                  | +-----+--------------------+ |
| | Nav | UserEmailsSubscriptions | |  +------------>  | | Nav | UserProfile        | |
| |     +-------------------------+ |                  | |     +--------------------+ |
| |     |                         | |                  | |     | UserProfilePreview | |
| +-----+-------------------------+ |                  | +-----+--------------------+ |
+-----------------------------------+                  +------------------------------+
```

- `Nav` åªæ˜¯ä¸€ä¸ªå¸¸è§„ç»„ä»¶ã€‚
- `UserSettings` æ˜¯ä¸€ä¸ªè§†å›¾ç»„ä»¶ã€‚
- `UserEmailsSubscriptions`ã€`UserProfile`ã€`UserProfilePreview` æ˜¯åµŒå¥—çš„è§†å›¾ç»„ä»¶ã€‚

**æ³¨æ„**ï¼š*æˆ‘ä»¬å…ˆå¿˜è®° HTML/CSS å…·ä½“çš„å¸ƒå±€çš„æ ·å­ï¼Œåªä¸“æ³¨åœ¨ç”¨åˆ°çš„ç»„ä»¶ä¸Šã€‚*

`UserSettings` ç»„ä»¶çš„ ` éƒ¨åˆ†åº”è¯¥æ˜¯ç±»ä¼¼ä¸‹é¢çš„è¿™æ®µä»£ç ï¼š

```html
<!-- UserSettings.vue -->
<div>
  <h1>User Settings</h1>
  <NavBar/>
  <router-view/>
  <router-view name="helper"/>
</div>
```

*åµŒå¥—çš„è§†å›¾ç»„ä»¶åœ¨æ­¤å·²ç»è¢«å¿½ç•¥äº†ï¼Œä½†æ˜¯ä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://jsfiddle.net/posva/22wgksa3/)æ‰¾åˆ°å®Œæ•´çš„æºä»£ç ã€‚*

ç„¶åä½ å¯ä»¥ç”¨è¿™ä¸ªè·¯ç”±é…ç½®å®Œæˆè¯¥å¸ƒå±€ï¼š

```js
{
  path: '/settings',
  // ä½ ä¹Ÿå¯ä»¥åœ¨é¡¶çº§è·¯ç”±å°±é…ç½®å‘½åè§†å›¾
  component: UserSettings,
  children: [{
    path: 'emails',
    component: UserEmailsSubscriptions
  }, {
    path: 'profile',
    components: {
      default: UserProfile,
      helper: UserProfilePreview
    }
  }]
}
```

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">

        <router-link :to="{name:'home',params:{id:3}}">ä¸»é¡µ</router-link>
        <router-link to="/introduce">å…¬å¸ä»‹ç»</router-link>
        <router-link to="/product">äº§å“è¯¦æƒ…</router-link>
        <router-view></router-view>
        <router-view name="product"></router-view>
        <router-view name="profile"></router-view>
        <div>
            <button @click="navigateTo('home')">é¦–é¡µ</button>
            <button @click="navigateTo('product')">äº§å“è¯¦æƒ…</button>
            <button @click="navigateTo('introduce')">å…¬å¸ä»‹ç»</button>
        </div>
    </div>
</body>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script>
    // å®šä¹‰ç»„ä»¶
    const Index = {
        template: `<div>ä¸»é¡µ123
        </div>`,
    }
    const Introduce = {
        template: `<div>å…¬å¸ä»‹ç»</div>`
    }
    const Product = {
        template: `<div>äº§å“ä»‹ç»</div>`
    }
    const routes = [
        {
            path: '/home/:id', components:{default: Index,product:Product,profile:Introduce},name:"home"
        },
        {
            path: '/product/:id', component: Product,
            name: "product"
        }, {
            path: "/introduce/:id",
            component: Introduce,
            name: "introduce"
        }
    ]
    const router = new VueRouter({
        routes
    })
    const app = new Vue({
        router,
        methods: {
            navigateTo: function (name) {
                // this.$router.push(name) 
                let id = 123;
                let path = name;
                this.$router.replace({
                    name: name,
                    params: {
                        id
                    }
                })
                // this.$router.push({
                //     name:name,
                //     params:{
                //         userId:123
                //     }
                // })
                // let userId = 123;
                // this.$router.push({
                //     path:name+`/${userId}`
                // })
            }
        },
    }).$mount("#app");
</script>

</html>
```



### é‡å®šå‘å’Œåˆ«å

#### [é‡å®šå‘](https://router.vuejs.org/zh/guide/essentials/redirect-and-alias.html#é‡å®šå‘)

é‡å®šå‘ä¹Ÿæ˜¯é€šè¿‡ `routes` é…ç½®æ¥å®Œæˆï¼Œä¸‹é¢ä¾‹å­æ˜¯ä» `/a` é‡å®šå‘åˆ° `/b`ï¼š

```js
const router = new VueRouter({
  routes: [
    { path: '/a', redirect: '/b' }
  ]
})
```

é‡å®šå‘çš„ç›®æ ‡ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘½åçš„è·¯ç”±ï¼š

```js
const router = new VueRouter({
  routes: [
    { path: '/a', redirect: { name: 'foo' }}
  ]
})
```

ç”šè‡³æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼ŒåŠ¨æ€è¿”å›é‡å®šå‘ç›®æ ‡ï¼š

```js
const router = new VueRouter({
  routes: [
    { path: '/a', redirect: to => {
      // æ–¹æ³•æ¥æ”¶ ç›®æ ‡è·¯ç”± ä½œä¸ºå‚æ•°
      // return é‡å®šå‘çš„ å­—ç¬¦ä¸²è·¯å¾„/è·¯å¾„å¯¹è±¡
    }}
  ]
})
```

#### åˆ«å

â€œé‡å®šå‘â€çš„æ„æ€æ˜¯ï¼Œå½“ç”¨æˆ·è®¿é—® `/a`æ—¶ï¼ŒURL å°†ä¼šè¢«æ›¿æ¢æˆ `/b`ï¼Œç„¶ååŒ¹é…è·¯ç”±ä¸º `/b`ï¼Œé‚£ä¹ˆâ€œåˆ«åâ€åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

**`/a` çš„åˆ«åæ˜¯ `/b`ï¼Œæ„å‘³ç€ï¼Œå½“ç”¨æˆ·è®¿é—® `/b` æ—¶ï¼ŒURL ä¼šä¿æŒä¸º `/b`ï¼Œä½†æ˜¯è·¯ç”±åŒ¹é…åˆ™ä¸º `/a`ï¼Œå°±åƒç”¨æˆ·è®¿é—® `/a` ä¸€æ ·ã€‚**

ä¸Šé¢å¯¹åº”çš„è·¯ç”±é…ç½®ä¸ºï¼š

```js
const router = new VueRouter({
  routes: [
    { path: '/a', component: A, alias: '/b' }
  ]
})
```

â€œåˆ«åâ€çš„åŠŸèƒ½è®©ä½ å¯ä»¥è‡ªç”±åœ°å°† UI ç»“æ„æ˜ å°„åˆ°ä»»æ„çš„ URLï¼Œè€Œä¸æ˜¯å—é™äºé…ç½®çš„åµŒå¥—è·¯ç”±ç»“æ„ã€‚

### è·¯ç”±ç»„ä»¶ä¼ å‚

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `$route` ä¼šä½¿ä¹‹ä¸å…¶å¯¹åº”è·¯ç”±å½¢æˆé«˜åº¦è€¦åˆï¼Œä»è€Œä½¿ç»„ä»¶åªèƒ½åœ¨æŸäº›ç‰¹å®šçš„ URL ä¸Šä½¿ç”¨ï¼Œé™åˆ¶äº†å…¶çµæ´»æ€§ã€‚

ä½¿ç”¨ `props` å°†ç»„ä»¶å’Œè·¯ç”±è§£è€¦ï¼š

**å–ä»£ä¸ `$route` çš„è€¦åˆ**

```js
const User = {
  template: '<div>User {{ $route.params.id }}</div>'
}
const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User }
  ]
})
```

**é€šè¿‡ `props` è§£è€¦**

```js
const User = {
  props: ['id'],
  template: '<div>User {{ id }}</div>'
}
const router = new VueRouter({
  routes: [
    { path: '/user/:id', component: User, props: true },

    // å¯¹äºåŒ…å«å‘½åè§†å›¾çš„è·¯ç”±ï¼Œä½ å¿…é¡»åˆ†åˆ«ä¸ºæ¯ä¸ªå‘½åè§†å›¾æ·»åŠ  `props` é€‰é¡¹ï¼š
    {
      path: '/user/:id',
      components: { default: User, sidebar: Sidebar },
      props: { default: true, sidebar: false }
    }
  ]
})
```

è¿™æ ·ä½ ä¾¿å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¯¥ç»„ä»¶ï¼Œä½¿å¾—è¯¥ç»„ä»¶æ›´æ˜“äºé‡ç”¨å’Œæµ‹è¯•ã€‚

#### [å¸ƒå°”æ¨¡å¼](https://router.vuejs.org/zh/guide/essentials/passing-props.html#å¸ƒå°”æ¨¡å¼)

å¦‚æœ `props` è¢«è®¾ç½®ä¸º `true`ï¼Œ`route.params` å°†ä¼šè¢«è®¾ç½®ä¸ºç»„ä»¶å±æ€§ã€‚

#### [å¯¹è±¡æ¨¡å¼](https://router.vuejs.org/zh/guide/essentials/passing-props.html#å¯¹è±¡æ¨¡å¼)

å¦‚æœ `props` æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¼šè¢«æŒ‰åŸæ ·è®¾ç½®ä¸ºç»„ä»¶å±æ€§ã€‚å½“ `props` æ˜¯é™æ€çš„æ—¶å€™æœ‰ç”¨ã€‚

```js
const router = new VueRouter({
  routes: [
    { path: '/promotion/from-newsletter', component: Promotion, props: { newsletterPopup: false } }
  ]
})
```

#### [å‡½æ•°æ¨¡å¼](https://router.vuejs.org/zh/guide/essentials/passing-props.html#å‡½æ•°æ¨¡å¼)

ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°è¿”å› `props`ã€‚è¿™æ ·ä½ ä¾¿å¯ä»¥å°†å‚æ•°è½¬æ¢æˆå¦ä¸€ç§ç±»å‹ï¼Œå°†é™æ€å€¼ä¸åŸºäºè·¯ç”±çš„å€¼ç»“åˆç­‰ç­‰ã€‚

```js
const router = new VueRouter({
  routes: [
    { path: '/search', component: SearchUser, props: (route) => ({ query: route.query.q }) }
  ]
})
```

URL `/search?q=vue` ä¼šå°† `{query: 'vue'}` ä½œä¸ºå±æ€§ä¼ é€’ç»™ `SearchUser` ç»„ä»¶ã€‚

è¯·å°½å¯èƒ½ä¿æŒ `props` å‡½æ•°ä¸ºæ— çŠ¶æ€çš„ï¼Œå› ä¸ºå®ƒåªä¼šåœ¨è·¯ç”±å‘ç”Ÿå˜åŒ–æ—¶èµ·ä½œç”¨ã€‚å¦‚æœä½ éœ€è¦çŠ¶æ€æ¥å®šä¹‰ `props`ï¼Œè¯·ä½¿ç”¨åŒ…è£…ç»„ä»¶ï¼Œè¿™æ · Vue æ‰å¯ä»¥å¯¹çŠ¶æ€å˜åŒ–åšå‡ºååº”ã€‚



```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">

        <router-link :to="{name:'home',params:{id:3}}">ä¸»é¡µ</router-link>
        <router-link to="/introduce">å…¬å¸ä»‹ç»</router-link>
        <router-link to="/product">äº§å“è¯¦æƒ…</router-link>
        <router-view></router-view>
        <router-view name="product"></router-view>
        <router-view name="profile"></router-view>
        <div>
            <button @click="navigateTo('home')">é¦–é¡µ</button>
            <button @click="navigateTo('product')">äº§å“è¯¦æƒ…</button>
            <button @click="navigateTo('introduce')">å…¬å¸ä»‹ç»</button>
        </div>
    </div>
</body>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
<script>
    // å®šä¹‰ç»„ä»¶
    const Index = {
        // props:["id"],
        // props:["checked"],
        props:["query"],
        template: `<div>ä¸»é¡µ123</div>`,
    }
    const Introduce = {
        template: `<div>å…¬å¸ä»‹ç»</div>`
    }
    const Product = {
        template: `<div>äº§å“ä»‹ç»</div>`
    }
    const routes = [
        {
            path: '/home/:id', 
            component:Index,
            name:"home",
            // props: true
            // props:{
            //     checked:true
            // }
            props:(route)=>{
                return {
                    query:route.query
                }
            }
        },
        {
            path: '/product/:id', component: Product,
            name: "product"
        }, {
            path: "/introduce/:id",
            component: Introduce,
            name: "introduce"
        }
    ]
    const router = new VueRouter({
        routes
    })
    const app = new Vue({
        router,
        methods: {
            navigateTo: function (name) {
                // this.$router.push(name) 
                let id = 123;
                let path = name;
                this.$router.replace({
                    name: name,
                    params: {
                        id
                    }
                })
                // this.$router.push({
                //     name:name,
                //     params:{
                //         userId:123
                //     }
                // })
                // let userId = 123;
                // this.$router.push({
                //     path:name+`/${userId}`
                // })
            }
        },
    }).$mount("#app");
</script>

</html>
```



###  HTML5 History æ¨¡å¼

`vue-router` é»˜è®¤ hash æ¨¡å¼ â€”â€” ä½¿ç”¨ URL çš„ hash æ¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„ URLï¼Œäºæ˜¯å½“ URL æ”¹å˜æ—¶ï¼Œé¡µé¢ä¸ä¼šé‡æ–°åŠ è½½ã€‚

å¦‚æœä¸æƒ³è¦å¾ˆä¸‘çš„ hashï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è·¯ç”±çš„ **history æ¨¡å¼**ï¼Œè¿™ç§æ¨¡å¼å……åˆ†åˆ©ç”¨ `history.pushState` API æ¥å®Œæˆ URL è·³è½¬è€Œæ— é¡»é‡æ–°åŠ è½½é¡µé¢ã€‚

```js
const router = new VueRouter({
  mode: 'history',
  routes: [...]
})
```

å½“ä½ ä½¿ç”¨ history æ¨¡å¼æ—¶ï¼ŒURL å°±åƒæ­£å¸¸çš„ urlï¼Œä¾‹å¦‚ `http://yoursite.com/user/id`ï¼Œä¹Ÿå¥½çœ‹ï¼

ä¸è¿‡è¿™ç§æ¨¡å¼è¦ç©å¥½ï¼Œè¿˜éœ€è¦åå°é…ç½®æ”¯æŒã€‚å› ä¸ºæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸ªå•é¡µå®¢æˆ·ç«¯åº”ç”¨ï¼Œå¦‚æœåå°æ²¡æœ‰æ­£ç¡®çš„é…ç½®ï¼Œå½“ç”¨æˆ·åœ¨æµè§ˆå™¨ç›´æ¥è®¿é—® `http://oursite.com/user/id` å°±ä¼šè¿”å› 404ï¼Œè¿™å°±ä¸å¥½çœ‹äº†ã€‚

æ‰€ä»¥å‘¢ï¼Œä½ è¦åœ¨æœåŠ¡ç«¯å¢åŠ ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„å€™é€‰èµ„æºï¼šå¦‚æœ URL åŒ¹é…ä¸åˆ°ä»»ä½•é™æ€èµ„æºï¼Œåˆ™åº”è¯¥è¿”å›åŒä¸€ä¸ª `index.html` é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢å°±æ˜¯ä½  app ä¾èµ–çš„é¡µé¢ã€‚

### [è¿›é˜¶](https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB)

## [Vuex](https://vuex.vuejs.org/zh/)

### ç›´æ¥ä¸‹è½½ / CDN å¼•ç”¨

https://unpkg.com/vuex

[Unpkg.com](https://unpkg.com/) æä¾›äº†åŸºäº NPM çš„ CDN é“¾æ¥ã€‚ä»¥ä¸Šçš„é“¾æ¥ä¼šä¸€ç›´æŒ‡å‘ NPM ä¸Šå‘å¸ƒçš„æœ€æ–°ç‰ˆæœ¬ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ `https://unpkg.com/vuex@2.0.0` è¿™æ ·çš„æ–¹å¼æŒ‡å®šç‰¹å®šçš„ç‰ˆæœ¬ã€‚

åœ¨ Vue ä¹‹åå¼•å…¥ `vuex` ä¼šè¿›è¡Œè‡ªåŠ¨å®‰è£…ï¼š

```html
<script src="/path/to/vue.js"></script>
<script src="/path/to/vuex.js"></script>
```

### [#](https://vuex.vuejs.org/zh/installation.html#npm)NPM

```bash
npm install vuex --save
```

### [#](https://vuex.vuejs.org/zh/installation.html#yarn)Yarn

```bash
yarn add vuex
```

åœ¨ä¸€ä¸ªæ¨¡å—åŒ–çš„æ‰“åŒ…ç³»ç»Ÿä¸­ï¼Œæ‚¨å¿…é¡»æ˜¾å¼åœ°é€šè¿‡ `Vue.use()` æ¥å®‰è£… Vuexï¼š

```js
import Vue from 'vue'
import Vuex from 'vuex'

Vue.use(Vuex)
```

å½“ä½¿ç”¨å…¨å±€ script æ ‡ç­¾å¼•ç”¨ Vuex æ—¶ï¼Œä¸éœ€è¦ä»¥ä¸Šå®‰è£…è¿‡ç¨‹ã€‚

### [#](https://vuex.vuejs.org/zh/installation.html#promise)Promise

Vuex ä¾èµ– [Promise](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises)ã€‚å¦‚æœä½ æ”¯æŒçš„æµè§ˆå™¨å¹¶æ²¡æœ‰å®ç° Promise (æ¯”å¦‚ IE)ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª polyfill çš„åº“ï¼Œä¾‹å¦‚ [es6-promise](https://github.com/stefanpenner/es6-promise)ã€‚

ä½ å¯ä»¥é€šè¿‡ CDN å°†å…¶å¼•å…¥ï¼š

```html
<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.js"></script>
```

ç„¶å `window.Promise` ä¼šè‡ªåŠ¨å¯ç”¨ã€‚

å¦‚æœä½ å–œæ¬¢ä½¿ç”¨è¯¸å¦‚ npm æˆ– Yarn ç­‰åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹åˆ—æ–¹å¼æ‰§è¡Œå®‰è£…ï¼š

```bash
npm install es6-promise --save # npm
yarn add es6-promise # Yarn
```

æˆ–è€…æ›´è¿›ä¸€æ­¥ï¼Œå°†ä¸‹åˆ—ä»£ç æ·»åŠ åˆ°ä½ ä½¿ç”¨ Vuex ä¹‹å‰çš„ä¸€ä¸ªåœ°æ–¹ï¼š

```js
import 'es6-promise/auto'
```

### [#](https://vuex.vuejs.org/zh/installation.html#è‡ªå·±æ„å»º)è‡ªå·±æ„å»º

å¦‚æœéœ€è¦ä½¿ç”¨ dev åˆ†æ”¯ä¸‹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä» GitHub ä¸Šå…‹éš†ä»£ç å¹¶è‡ªå·±æ„å»ºã€‚

```bash
git clone https://github.com/vuejs/vuex.git node_modules/vuex
cd node_modules/vuex
npm install
npm run build
```

### Vuexæ˜¯ä»€ä¹ˆï¼Ÿ

Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„**çŠ¶æ€ç®¡ç†æ¨¡å¼**ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚Vuex ä¹Ÿé›†æˆåˆ° Vue çš„å®˜æ–¹è°ƒè¯•å·¥å…· [devtools extension](https://github.com/vuejs/vue-devtools)ï¼Œæä¾›äº†è¯¸å¦‚é›¶é…ç½®çš„ time-travel è°ƒè¯•ã€çŠ¶æ€å¿«ç…§å¯¼å…¥å¯¼å‡ºç­‰é«˜çº§è°ƒè¯•åŠŸèƒ½ã€‚

###  ä»€ä¹ˆæ˜¯â€œçŠ¶æ€ç®¡ç†æ¨¡å¼â€ï¼Ÿ

è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ Vue è®¡æ•°åº”ç”¨å¼€å§‹ï¼š

```html
new Vue({
  // state
  data () {
    return {
      count: 0
    }
  },
  // view
  template: `
    <div>{{ count }}</div>
  `,
  // actions
  methods: {
    increment () {
      this.count++
    }
  }
})
```

è¿™ä¸ªçŠ¶æ€è‡ªç®¡ç†åº”ç”¨åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

- **state**ï¼Œé©±åŠ¨åº”ç”¨çš„æ•°æ®æºï¼›
- **view**ï¼Œä»¥å£°æ˜æ–¹å¼å°† **state** æ˜ å°„åˆ°è§†å›¾ï¼›
- **actions**ï¼Œå“åº”åœ¨ **view** ä¸Šçš„ç”¨æˆ·è¾“å…¥å¯¼è‡´çš„çŠ¶æ€å˜åŒ–ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¡¨ç¤ºâ€œå•å‘æ•°æ®æµâ€ç†å¿µçš„ç®€å•ç¤ºæ„ï¼š



![img](Vue%20%E5%9F%BA%E7%A1%80%E7%AC%AC%E4%BA%94%E5%A4%A9.assets/flow.png)

ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨é‡åˆ°**å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€**æ—¶ï¼Œå•å‘æ•°æ®æµçš„ç®€æ´æ€§å¾ˆå®¹æ˜“è¢«ç ´åï¼š

- å¤šä¸ªè§†å›¾ä¾èµ–äºåŒä¸€çŠ¶æ€ã€‚
- æ¥è‡ªä¸åŒè§†å›¾çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€ã€‚

å¯¹äºé—®é¢˜ä¸€ï¼Œä¼ å‚çš„æ–¹æ³•å¯¹äºå¤šå±‚åµŒå¥—çš„ç»„ä»¶å°†ä¼šéå¸¸ç¹çï¼Œå¹¶ä¸”å¯¹äºå…„å¼Ÿç»„ä»¶é—´çš„çŠ¶æ€ä¼ é€’æ— èƒ½ä¸ºåŠ›ã€‚å¯¹äºé—®é¢˜äºŒï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡‡ç”¨çˆ¶å­ç»„ä»¶ç›´æ¥å¼•ç”¨æˆ–è€…é€šè¿‡äº‹ä»¶æ¥å˜æ›´å’ŒåŒæ­¥çŠ¶æ€çš„å¤šä»½æ‹·è´ã€‚ä»¥ä¸Šçš„è¿™äº›æ¨¡å¼éå¸¸è„†å¼±ï¼Œé€šå¸¸ä¼šå¯¼è‡´æ— æ³•ç»´æŠ¤çš„ä»£ç ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸æŠŠç»„ä»¶çš„å…±äº«çŠ¶æ€æŠ½å–å‡ºæ¥ï¼Œä»¥ä¸€ä¸ªå…¨å±€å•ä¾‹æ¨¡å¼ç®¡ç†å‘¢ï¼Ÿåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„ç»„ä»¶æ ‘æ„æˆäº†ä¸€ä¸ªå·¨å¤§çš„â€œè§†å›¾â€ï¼Œä¸ç®¡åœ¨æ ‘çš„å“ªä¸ªä½ç½®ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è·å–çŠ¶æ€æˆ–è€…è§¦å‘è¡Œä¸ºï¼

é€šè¿‡å®šä¹‰å’Œéš”ç¦»çŠ¶æ€ç®¡ç†ä¸­çš„å„ç§æ¦‚å¿µå¹¶é€šè¿‡å¼ºåˆ¶è§„åˆ™ç»´æŒè§†å›¾å’ŒçŠ¶æ€é—´çš„ç‹¬ç«‹æ€§ï¼Œæˆ‘ä»¬çš„ä»£ç å°†ä¼šå˜å¾—æ›´ç»“æ„åŒ–ä¸”æ˜“ç»´æŠ¤ã€‚



![vuex](Vue%20%E5%9F%BA%E7%A1%80%E7%AC%AC%E4%BA%94%E5%A4%A9.assets/vuex.png)

Vuex å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†å…±äº«çŠ¶æ€ï¼Œå¹¶é™„å¸¦äº†æ›´å¤šçš„æ¦‚å¿µå’Œæ¡†æ¶ã€‚è¿™éœ€è¦å¯¹çŸ­æœŸå’Œé•¿æœŸæ•ˆç›Šè¿›è¡Œæƒè¡¡ã€‚

å¦‚æœæ‚¨ä¸æ‰“ç®—å¼€å‘å¤§å‹å•é¡µåº”ç”¨ï¼Œä½¿ç”¨ Vuex å¯èƒ½æ˜¯ç¹çå†—ä½™çš„ã€‚ç¡®å®æ˜¯å¦‚æ­¤â€”â€”å¦‚æœæ‚¨çš„åº”ç”¨å¤Ÿç®€å•ï¼Œæ‚¨æœ€å¥½ä¸è¦ä½¿ç”¨ Vuexã€‚ä¸€ä¸ªç®€å•çš„ [store æ¨¡å¼](https://cn.vuejs.org/v2/guide/state-management.html#ç®€å•çŠ¶æ€ç®¡ç†èµ·æ­¥ä½¿ç”¨)å°±è¶³å¤Ÿæ‚¨æ‰€éœ€äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦æ„å»ºä¸€ä¸ªä¸­å¤§å‹å•é¡µåº”ç”¨ï¼Œæ‚¨å¾ˆå¯èƒ½ä¼šè€ƒè™‘å¦‚ä½•æ›´å¥½åœ°åœ¨ç»„ä»¶å¤–éƒ¨ç®¡ç†çŠ¶æ€ï¼ŒVuex å°†ä¼šæˆä¸ºè‡ªç„¶è€Œç„¶çš„é€‰æ‹©ã€‚å¼•ç”¨ Redux çš„ä½œè€… Dan Abramov çš„è¯è¯´å°±æ˜¯ï¼š

> Flux æ¶æ„å°±åƒçœ¼é•œï¼šæ‚¨è‡ªä¼šçŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚

### å¼€å§‹

æ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ storeï¼ˆä»“åº“ï¼‰ã€‚â€œstoreâ€åŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒåŒ…å«ç€ä½ çš„åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„**çŠ¶æ€ (state)**ã€‚Vuex å’Œå•çº¯çš„å…¨å±€å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¸åŒï¼š

1. Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ã€‚å½“ Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°ã€‚
2. ä½ ä¸èƒ½ç›´æ¥æ”¹å˜ store ä¸­çš„çŠ¶æ€ã€‚æ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°**æäº¤ (commit) mutation**ã€‚è¿™æ ·ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿå®ç°ä¸€äº›å·¥å…·å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°äº†è§£æˆ‘ä»¬çš„åº”ç”¨ã€‚



### æœ€ç®€å•çš„ Store

[å®‰è£…](https://vuex.vuejs.org/zh/installation.html) Vuex ä¹‹åï¼Œè®©æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ª storeã€‚åˆ›å»ºè¿‡ç¨‹ç›´æˆªäº†å½“â€”â€”ä»…éœ€è¦æä¾›ä¸€ä¸ªåˆå§‹ state å¯¹è±¡å’Œä¸€äº› mutationï¼š

```js
import Vue from 'vue'
import Vuex from 'vuex'

const store = new Vuex.Store({
  state: {
    count: 0
  },
  mutations: {
    increment (state) {
      state.count++
    }
  }
})
```

ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ `store.state` æ¥è·å–çŠ¶æ€å¯¹è±¡ï¼Œä»¥åŠé€šè¿‡ `store.commit` æ–¹æ³•è§¦å‘çŠ¶æ€å˜æ›´ï¼š

```js
store.commit('increment')

console.log(store.state.count) // -> 1
```

ä¸ºäº†åœ¨ Vue ç»„ä»¶ä¸­è®¿é—® `this.$store` propertyï¼Œä½ éœ€è¦ä¸º Vue å®ä¾‹æä¾›åˆ›å»ºå¥½çš„ storeã€‚Vuex æä¾›äº†ä¸€ä¸ªä»æ ¹ç»„ä»¶å‘æ‰€æœ‰å­ç»„ä»¶ï¼Œä»¥ `store` é€‰é¡¹çš„æ–¹å¼â€œæ³¨å…¥â€è¯¥ store çš„æœºåˆ¶ï¼š

```js
new Vue({
  el: '#app',
  store: store,
})
```

æç¤º

å¦‚æœä½¿ç”¨ ES6ï¼Œä½ ä¹Ÿå¯ä»¥ä»¥ ES6 å¯¹è±¡çš„ property ç®€å†™ (ç”¨åœ¨å¯¹è±¡æŸä¸ª property çš„ key å’Œè¢«ä¼ å…¥çš„å˜é‡åŒåæ—¶)ï¼š

```js
new Vue({
  el: '#app',
  store
})
```

ç°åœ¨æˆ‘ä»¬å¯ä»¥ä»ç»„ä»¶çš„æ–¹æ³•æäº¤ä¸€ä¸ªå˜æ›´ï¼š

```js
methods: {
  increment() {
    this.$store.commit('increment')
    console.log(this.$store.state.count)
  }
}
```

å†æ¬¡å¼ºè°ƒï¼Œæˆ‘ä»¬é€šè¿‡æäº¤ mutation çš„æ–¹å¼ï¼Œè€Œéç›´æ¥æ”¹å˜ `store.state.count`ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æƒ³è¦æ›´æ˜ç¡®åœ°è¿½è¸ªåˆ°çŠ¶æ€çš„å˜åŒ–ã€‚è¿™ä¸ªç®€å•çš„çº¦å®šèƒ½å¤Ÿè®©ä½ çš„æ„å›¾æ›´åŠ æ˜æ˜¾ï¼Œè¿™æ ·ä½ åœ¨é˜…è¯»ä»£ç çš„æ—¶å€™èƒ½æ›´å®¹æ˜“åœ°è§£è¯»åº”ç”¨å†…éƒ¨çš„çŠ¶æ€æ”¹å˜ã€‚æ­¤å¤–ï¼Œè¿™æ ·ä¹Ÿè®©æˆ‘ä»¬æœ‰æœºä¼šå»å®ç°ä¸€äº›èƒ½è®°å½•æ¯æ¬¡çŠ¶æ€æ”¹å˜ï¼Œä¿å­˜çŠ¶æ€å¿«ç…§çš„è°ƒè¯•å·¥å…·ã€‚æœ‰äº†å®ƒï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å®ç°å¦‚æ—¶é—´ç©¿æ¢­èˆ¬çš„è°ƒè¯•ä½“éªŒã€‚

ç”±äº store ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œåœ¨ç»„ä»¶ä¸­è°ƒç”¨ store ä¸­çš„çŠ¶æ€ç®€å•åˆ°ä»…éœ€è¦åœ¨è®¡ç®—å±æ€§ä¸­è¿”å›å³å¯ã€‚è§¦å‘å˜åŒ–ä¹Ÿä»…ä»…æ˜¯åœ¨ç»„ä»¶çš„ methods ä¸­æäº¤ mutationã€‚

è¿™æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„ Vuex è®°æ•°åº”ç”¨ç¤ºä¾‹ã€‚

```html
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="app">

    </div>
</body>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vuex"></script>
<script>
    const store = new Vuex.Store({
        state:{
            counter:1
        },
        mutations:{
            increment:function(state){
                state.counter++;
            }
        }
    })
    const app = new Vue({
        // state
        store,
        // view
        template:`<div>{{$store.state.counter}} <button @click="increment">æ·»åŠ </button></div>`,
        // actions
        methods: {
            increment:function(){
                this.$store.commit("increment");
            }
        },
    }).$mount("#app");
</script>

</html>
```



æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¼šæ›´æ·±å…¥åœ°æ¢è®¨ä¸€äº›æ ¸å¿ƒæ¦‚å¿µã€‚è®©æˆ‘ä»¬å…ˆä» [State](https://vuex.vuejs.org/zh/guide/state.html) æ¦‚å¿µå¼€å§‹ã€‚





